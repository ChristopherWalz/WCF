var requirejs,require,define;!function(global,setTimeout){function commentReplace(e,t){return t||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var i;for(i=0;i<e.length&&(!e[i]||!t(e[i],i,e));i+=1);}}function eachReverse(e,t){if(e){var i;for(i=e.length-1;i>-1&&(!e[i]||!t(e[i],i,e));i-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var i;for(i in e)if(hasProp(e,i)&&t(e[i],i))break}function mixin(e,t,i,n){return t&&eachProp(t,function(t,a){!i&&hasProp(e,a)||(!n||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[a]=t:(e[a]||(e[a]={}),mixin(e[a],t,i,n)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,i,n){var a=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return a.requireType=e,a.requireModules=n,i&&(a.originalError=i),a}function newContext(e){function t(e){var t,i;for(t=0;t<e.length;t++)if(i=e[t],"."===i)e.splice(t,1),t-=1;else if(".."===i){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}function i(e,i,n){var a,o,r,s,l,c,d,u,h,p,f,m,g=i&&i.split("/"),_=E.map,b=_&&_["*"];if(e&&(e=e.split("/"),d=e.length-1,E.nodeIdCompat&&jsSuffixRegExp.test(e[d])&&(e[d]=e[d].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&g&&(m=g.slice(0,g.length-1),e=m.concat(e)),t(e),e=e.join("/")),n&&_&&(g||b)){r=e.split("/");e:for(s=r.length;s>0;s-=1){if(c=r.slice(0,s).join("/"),g)for(l=g.length;l>0;l-=1)if(o=getOwn(_,g.slice(0,l).join("/")),o&&(o=getOwn(o,c))){u=o,h=s;break e}!p&&b&&getOwn(b,c)&&(p=getOwn(b,c),f=s)}!u&&p&&(u=p,h=f),u&&(r.splice(0,h,u),e=r.join("/"))}return a=getOwn(E.pkgs,e),a?a:e}function n(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===w.contextName)return t.parentNode.removeChild(t),!0})}function a(e){var t=getOwn(E.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),w.require.undef(e),w.makeRequire(null,{skipMap:!0})([e]),!0}function o(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function r(e,t,n,a){var r,s,l,c,d=null,u=t?t.name:null,h=e,p=!0,f="";return e||(p=!1,e="_@r"+(N+=1)),c=o(e),d=c[0],e=c[1],d&&(d=i(d,u,a),s=getOwn(I,d)),e&&(d?f=n?e:s&&s.normalize?s.normalize(e,function(e){return i(e,u,a)}):e.indexOf("!")===-1?i(e,u,a):e:(f=i(e,u,a),c=o(f),d=c[0],f=c[1],n=!0,r=w.nameToUrl(f))),l=!d||s||n?"":"_unnormalized"+(M+=1),{prefix:d,name:f,parentMap:t,unnormalized:!!l,url:r,originalName:h,isDefine:p,id:(d?d+"!"+f:f)+l}}function s(e){var t=e.id,i=getOwn(L,t);return i||(i=L[t]=new w.Module(e)),i}function l(e,t,i){var n=e.id,a=getOwn(L,n);!hasProp(I,n)||a&&!a.defineEmitComplete?(a=s(e),a.error&&"error"===t?i(a.error):a.on(t,i)):"defined"===t&&i(I[n])}function c(e,t){var i=e.requireModules,n=!1;t?t(e):(each(i,function(t){var i=getOwn(L,t);i&&(i.error=e,i.events.error&&(n=!0,i.emit("error",e)))}),n||req.onError(e))}function d(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(w.defQueueMap[t]=!0),D.push(e)}),globalDefQueue=[])}function u(e){delete L[e],delete S[e]}function h(e,t,i){var n=e.map.id;e.error?e.emit("error",e.error):(t[n]=!0,each(e.depMaps,function(n,a){var o=n.id,r=getOwn(L,o);!r||e.depMatched[a]||i[o]||(getOwn(t,o)?(e.defineDep(a,I[o]),e.check()):h(r,t,i))}),i[n]=!0)}function p(){var e,t,i=1e3*E.waitSeconds,o=i&&w.startTime+i<(new Date).getTime(),r=[],s=[],l=!1,d=!0;if(!b){if(b=!0,eachProp(S,function(e){var i=e.map,c=i.id;if(e.enabled&&(i.isDefine||s.push(e),!e.error))if(!e.inited&&o)a(c)?(t=!0,l=!0):(r.push(c),n(c));else if(!e.inited&&e.fetched&&i.isDefine&&(l=!0,!i.prefix))return d=!1}),o&&r.length)return e=makeError("timeout","Load timeout for modules: "+r,null,r),e.contextName=w.contextName,c(e);d&&each(s,function(e){h(e,{},{})}),o&&!t||!l||!isBrowser&&!isWebWorker||C||(C=setTimeout(function(){C=0,p()},50)),b=!1}}function f(e){hasProp(I,e[0])||s(r(e[0],null,!0)).init(e[1],e[2])}function m(e,t,i,n){e.detachEvent&&!isOpera?n&&e.detachEvent(n,t):e.removeEventListener(i,t,!1)}function g(e){var t=e.currentTarget||e.srcElement;return m(t,w.onScriptLoad,"load","onreadystatechange"),m(t,w.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function _(){var e;for(d();D.length;){if(e=D.shift(),null===e[0])return c(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));f(e)}w.defQueueMap={}}var b,v,w,y,C,E={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},L={},S={},x={},D=[],I={},T={},k={},N=1,M=1;return y={require:function(e){return e.require?e.require:e.require=w.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?I[e.map.id]=e.exports:e.exports=I[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(E.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},v=function(e){this.events=getOwn(x,e.id)||{},this.map=e,this.shim=getOwn(E.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},v.prototype={init:function(e,t,i,n){n=n||{},this.inited||(this.factory=t,i?this.on("error",i):this.events.error&&(i=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=i,this.inited=!0,this.ignore=n.ignore,n.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,w.startTime=(new Date).getTime();var e=this.map;return this.shim?void w.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;T[e]||(T[e]=!0,w.load(this.map.id,e))},check:function(){var e,t,i,n,a,o,r;if(this.enabled&&!this.enabling)if(i=this.map.id,n=this.depExports,a=this.exports,o=this.factory,this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{a=w.execCb(i,o,n,a)}catch(t){e=t}else a=w.execCb(i,o,n,a);if(this.map.isDefine&&void 0===a&&(t=this.module,t?a=t.exports:this.usingExports&&(a=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else a=o;this.exports=a,this.map.isDefine&&!this.ignore&&(I[i]=a,req.onResourceLoad&&(r=[],each(this.depMaps,function(e){r.push(e.normalizedMap||e)}),req.onResourceLoad(w,this.map,r))),u(i),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(w.defQueueMap,i)||this.fetch()},callPlugin:function(){var e=this.map,t=e.id,n=r(e.prefix);this.depMaps.push(n),l(n,"defined",bind(this,function(n){var a,o,d,h=getOwn(k,this.map.id),p=this.map.name,f=this.map.parentMap?this.map.parentMap.name:null,m=w.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(n.normalize&&(p=n.normalize(p,function(e){return i(e,f,!0)})||""),o=r(e.prefix+"!"+p,this.map.parentMap,!0),l(o,"defined",bind(this,function(e){this.map.normalizedMap=o,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),d=getOwn(L,o.id),void(d&&(this.depMaps.push(o),this.events.error&&d.on("error",bind(this,function(e){this.emit("error",e)})),d.enable()))):h?(this.map.url=w.nameToUrl(h),void this.load()):(a=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),a.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(L,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&u(e.map.id)}),c(e)}),a.fromText=bind(this,function(i,n){var o=e.name,l=r(o),d=useInteractive;n&&(i=n),d&&(useInteractive=!1),s(l),hasProp(E.config,t)&&(E.config[o]=E.config[t]);try{req.exec(i)}catch(e){return c(makeError("fromtexteval","fromText eval for "+t+" failed: "+e,e,[t]))}d&&(useInteractive=!0),this.depMaps.push(l),w.completeLoad(o),m([o],a)}),void n.load(e.name,m,a,E))})),w.enable(n,this),this.pluginMaps[n.id]=n},enable:function(){S[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var i,n,a;if("string"==typeof e){if(e=r(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,a=getOwn(y,e.id))return void(this.depExports[t]=a(this));this.depCount+=1,l(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?l(e,"error",bind(this,this.errback)):this.events.error&&l(e,"error",bind(this,function(e){this.emit("error",e)}))}i=e.id,n=L[i],hasProp(y,i)||!n||n.enabled||w.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(L,e.id);t&&!t.enabled&&w.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var i=this.events[e];i||(i=this.events[e]=[]),i.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},w={config:E,contextName:e,registry:L,defined:I,urlFetched:T,defQueue:D,defQueueMap:{},Module:v,makeModuleMap:r,nextTick:req.nextTick,onError:c,configure:function(e){var t,i,n;e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs&&(t=e.urlArgs,e.urlArgs=function(e,i){return(i.indexOf("?")===-1?"?":"&")+t}),i=E.shim,n={paths:!0,bundles:!0,config:!0,map:!0},eachProp(e,function(e,t){n[t]?(E[t]||(E[t]={}),mixin(E[t],e,!0,!0)):E[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(k[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=w.makeShimExports(e)),i[t]=e}),E.shim=i),e.packages&&each(e.packages,function(e){var t,i;e="string"==typeof e?{name:e}:e,i=e.name,t=e.location,t&&(E.paths[i]=e.location),E.pkgs[i]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(L,function(e,t){e.inited||e.map.unnormalized||(e.map=r(t,null,!0))}),(e.deps||e.callback)&&w.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,a){function o(i,n,l){var d,u,h;return a.enableBuildCallback&&n&&isFunction(n)&&(n.__requireJsBuild=!0),"string"==typeof i?isFunction(n)?c(makeError("requireargs","Invalid require call"),l):t&&hasProp(y,i)?y[i](L[t.id]):req.get?req.get(w,i,t,o):(u=r(i,t,!1,!0),d=u.id,hasProp(I,d)?I[d]:c(makeError("notloaded",'Module name "'+d+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(_(),w.nextTick(function(){_(),h=s(r(null,t)),h.skipMap=a.skipMap,h.init(i,n,l,{enabled:!0}),p()}),o)}return a=a||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var n,a=e.lastIndexOf("."),o=e.split("/")[0],r="."===o||".."===o;return a!==-1&&(!r||a>1)&&(n=e.substring(a,e.length),e=e.substring(0,a)),w.nameToUrl(i(e,t&&t.id,!0),n,!0)},defined:function(e){return hasProp(I,r(e,t,!1,!0).id)},specified:function(e){return e=r(e,t,!1,!0).id,hasProp(I,e)||hasProp(L,e)}}),t||(o.undef=function(e){d();var i=r(e,t,!0),a=getOwn(L,e);a.undefed=!0,n(e),delete I[e],delete T[i.url],delete x[e],eachReverse(D,function(t,i){t[0]===e&&D.splice(i,1)}),delete w.defQueueMap[e],a&&(a.events.defined&&(x[e]=a.events),u(e))}),o},enable:function(e){var t=getOwn(L,e.id);t&&s(e).enable()},completeLoad:function(e){var t,i,n,o=getOwn(E.shim,e)||{},r=o.exports;for(d();D.length;){if(i=D.shift(),null===i[0]){if(i[0]=e,t)break;t=!0}else i[0]===e&&(t=!0);f(i)}if(w.defQueueMap={},n=getOwn(L,e),!t&&!hasProp(I,e)&&n&&!n.inited){if(!(!E.enforceDefine||r&&getGlobal(r)))return a(e)?void 0:c(makeError("nodefine","No define call for "+e,null,[e]));f([e,o.deps||[],o.exportsFn])}p()},nameToUrl:function(e,t,i){var n,a,o,r,s,l,c,d=getOwn(E.pkgs,e);if(d&&(e=d),c=getOwn(k,e))return w.nameToUrl(c,t,i);if(req.jsExtRegExp.test(e))s=e+(t||"");else{for(n=E.paths,a=e.split("/"),o=a.length;o>0;o-=1)if(r=a.slice(0,o).join("/"),l=getOwn(n,r)){isArray(l)&&(l=l[0]),a.splice(0,o,l);break}s=a.join("/"),s+=t||(/^data\:|^blob\:|\?/.test(s)||i?"":".js"),s=("/"===s.charAt(0)||s.match(/^[\w\+\.\-]+:/)?"":E.baseUrl)+s}return E.urlArgs&&!/^blob\:/.test(s)?s+E.urlArgs(e,s):s},load:function(e,t){req.load(w,e,t)},execCb:function(e,t,i,n){return t.apply(n,i)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=g(e);w.completeLoad(t.id)}},onScriptError:function(e){var t,i=g(e);if(!a(i.id))return t=[],eachProp(L,function(e,n){0!==n.indexOf("_@r")&&each(e.depMaps,function(e){if(e.id===i.id)return t.push(n),!0})}),c(makeError("scripterror",'Script error for "'+i.id+(t.length?'", needed by: '+t.join(", "):'"'),e,[i.id]))}},w.require=w.makeRequire(),w}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.3",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,i,n){var a,o,r=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=i,i=n):e=[]),o&&o.context&&(r=o.context),a=getOwn(contexts,r),a||(a=contexts[r]=req.s.newContext(r)),o&&a.configure(o),a.require(e,t,i)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,i){var n=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return n.type=e.scriptType||"text/javascript",n.charset="utf-8",n.async=!0,n},req.load=function(e,t,i){var n,a=e&&e.config||{};if(isBrowser)return n=req.createNode(a,t,i),n.setAttribute("data-requirecontext",e.contextName),n.setAttribute("data-requiremodule",t),!n.attachEvent||n.attachEvent.toString&&n.attachEvent.toString().indexOf("[native code")<0||isOpera?(n.addEventListener("load",e.onScriptLoad,!1),n.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,n.attachEvent("onreadystatechange",e.onScriptLoad)),n.src=i,a.onNodeCreated&&a.onNodeCreated(n,a,t,i),currentlyAddingScript=n,baseElement?head.insertBefore(n,baseElement):head.appendChild(n),currentlyAddingScript=null,n;if(isWebWorker)try{setTimeout(function(){},0),importScripts(i),e.completeLoad(t)}catch(n){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+i,n,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||mainScript.indexOf("!")!==-1||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,i){var n,a;"string"!=typeof e&&(i=t,t=e,e=null),isArray(t)||(i=t,t=null),!t&&isFunction(i)&&(t=[],i.length&&(i.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,i){t.push(i)}),t=(1===i.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(n=currentlyAddingScript||getInteractiveScript(),n&&(e||(e=n.getAttribute("data-requiremodule")),a=contexts[n.getAttribute("data-requirecontext")])),a?(a.defQueue.push([e,t,i]),a.defQueueMap[e]=!0):globalDefQueue.push([e,t,i])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this,"undefined"==typeof setTimeout?void 0:setTimeout),define("requireLib",function(){}),requirejs.config({paths:{enquire:"3rdParty/enquire",favico:"3rdParty/favico","perfect-scrollbar":"3rdParty/perfect-scrollbar"},shim:{enquire:{exports:"enquire"},favico:{exports:"Favico"},"perfect-scrollbar":{exports:"PerfectScrollbar"}},map:{"*":{Ajax:"WoltLabSuite/Core/Ajax",AjaxJsonp:"WoltLabSuite/Core/Ajax/Jsonp",AjaxRequest:"WoltLabSuite/Core/Ajax/Request",CallbackList:"WoltLabSuite/Core/CallbackList",ColorUtil:"WoltLabSuite/Core/ColorUtil",Core:"WoltLabSuite/Core/Core",DateUtil:"WoltLabSuite/Core/Date/Util",Dictionary:"WoltLabSuite/Core/Dictionary","Dom/ChangeListener":"WoltLabSuite/Core/Dom/Change/Listener","Dom/Traverse":"WoltLabSuite/Core/Dom/Traverse","Dom/Util":"WoltLabSuite/Core/Dom/Util",Environment:"WoltLabSuite/Core/Environment",EventHandler:"WoltLabSuite/Core/Event/Handler",EventKey:"WoltLabSuite/Core/Event/Key",Language:"WoltLabSuite/Core/Language",List:"WoltLabSuite/Core/List",ObjectMap:"WoltLabSuite/Core/ObjectMap",Permission:"WoltLabSuite/Core/Permission",StringUtil:"WoltLabSuite/Core/StringUtil","Ui/Alignment":"WoltLabSuite/Core/Ui/Alignment","Ui/CloseOverlay":"WoltLabSuite/Core/Ui/CloseOverlay","Ui/Confirmation":"WoltLabSuite/Core/Ui/Confirmation","Ui/Dialog":"WoltLabSuite/Core/Ui/Dialog","Ui/Notification":"WoltLabSuite/Core/Ui/Notification","Ui/ReusableDropdown":"WoltLabSuite/Core/Ui/Dropdown/Reusable","Ui/Screen":"WoltLabSuite/Core/Ui/Screen","Ui/Scroll":"WoltLabSuite/Core/Ui/Scroll","Ui/SimpleDropdown":"WoltLabSuite/Core/Ui/Dropdown/Simple","Ui/TabMenu":"WoltLabSuite/Core/Ui/TabMenu",Upload:"WoltLabSuite/Core/Upload",User:"WoltLabSuite/Core/User"}},waitSeconds:0}),define("jquery",[],function(){return window.jQuery}),define("require.config",function(){}),function(e,t){e.elAttr=function(e,t,i){return void 0===i?e.getAttribute(t)||"":void e.setAttribute(t,i)},e.elAttrBool=function(e,t){var i=elAttr(e,t);return"1"===i||"true"===i},e.elByClass=function(e,i){return(i||t).getElementsByClassName(e)},e.elById=function(e){return t.getElementById(e)},e.elBySel=function(e,i){return(i||t).querySelector(e)},e.elBySelAll=function(e,i,n){var a=(i||t).querySelectorAll(e);return"function"==typeof n&&Array.prototype.forEach.call(a,n),a},e.elByTag=function(e,i){return(i||t).getElementsByTagName(e)},e.elCreate=function(e){return t.createElement(e)},e.elData=function(e,t,i){return t="data-"+t,void 0===i?e.getAttribute(t)||"":void e.setAttribute(t,i)},e.elDataBool=function(e,t){var i=elData(e,t);return"1"===i||"true"===i},e.elHide=function(e){e.style.setProperty("display","none","")},e.elRemove=function(e){e.parentNode.removeChild(e)},e.elShow=function(e){e.style.removeProperty("display")},e.elToggle=function(e){"none"===e.style.getPropertyValue("display")?elShow(e):elHide(e)},e.forEach=function(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i],i)},e.objOwns=function(e,t){return e.hasOwnProperty(t)};"touchstart"in t.documentElement||"ontouchstart"in e||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0?"touchstart":"click";Object.defineProperty(e,"WCF_CLICK_EVENT",{value:"click"}),function(){function t(){e.history.state&&e.history.state.name&&"initial"!==e.history.state.name?(e.history.replaceState({name:"skip",depth:++i},"",""),e.history.back(),setTimeout(t,1)):e.history.replaceState({name:"initial"},"","")}var i=0;t(),e.addEventListener("popstate",function(t){t.state&&t.state.name&&"skip"===t.state.name&&e.history.go(t.state.depth)})}()}(window,document),define("wcf.globalHelper",function(){}),define("WoltLabSuite/Core/Core",[],function(){"use strict";var e=function(e){return"object"==typeof e&&(Array.isArray(e)||i.isPlainObject(e))?t(e):e},t=function(t){var i,n;if(!t)return null;if(Array.isArray(t))return t.slice();i={};for(n in t)objOwns(t,n)&&"undefined"!=typeof t[n]&&(i[n]=e(t[n]));return i},i={clone:function(t){return e(t)},convertLegacyUrl:function(e){return e.replace(/^index\.php\/(.*?)\/\?/,function(e,t){var i,n,a,o=t.split(/([A-Z][a-z0-9]+)/);for(t="",i=0,n=o.length;i<n;i++)a=o[i].trim(),a.length&&(t.length&&(t+="-"),t+=a.toLowerCase());return"index.php?"+t+"/&"})},extend:function(e){var t,i,n,a,o;for(e=e||{},t=this.clone(e),i=1,n=arguments.length;i<n;i++)if(a=arguments[i])for(o in a)objOwns(a,o)&&(Array.isArray(a[o])||"object"!=typeof a[o]?t[o]=a[o]:this.isPlainObject(a[o])?t[o]=this.extend(e[o],a[o]):t[o]=a[o]);return t},inherit:function(e,t,n){if(void 0===e||null===e)throw new TypeError("The constructor must not be undefined or null.");if(void 0===t||null===t)throw new TypeError("The super constructor must not be undefined or null.");if(void 0===t.prototype)throw new TypeError("The super constructor must have a prototype.");e._super=t,e.prototype=i.extend(Object.create(t.prototype,{constructor:{configurable:!0,enumerable:!1,value:e,writable:!0}}),n||{})},isPlainObject:function(e){return"object"==typeof e&&null!==e&&!e.nodeType&&Object.getPrototypeOf(e)===Object.prototype},getType:function(e){return Object.prototype.toString.call(e).replace(/^\[object (.+)\]$/,"$1")},getUuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,i="x"==e?t:3&t|8;return i.toString(16)})},serialize:function(e,t){var i,n,a,o=[];for(i in e)objOwns(e,i)&&(n=t?t+"["+i+"]":i,a=e[i],"object"==typeof a?o.push(this.serialize(a,n)):o.push(encodeURIComponent(n)+"="+encodeURIComponent(a)));return o.join("&")},triggerEvent:function(e,t){var i;try{i=new Event(t,{bubbles:!0,cancelable:!0})}catch(e){i=document.createEvent("Event"),i.initEvent(t,!0,!0)}e.dispatchEvent(i)}};return i}),define("WoltLabSuite/Core/Dictionary",["Core"],function(e){"use strict";function t(){this._dictionary=i?new Map:{}}var i=objOwns(window,"Map")&&"function"==typeof window.Map;return t.prototype={set:function(e,t){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new TypeError("Only strings can be used as keys, rejected '"+e+"' ("+typeof e+").");i?this._dictionary.set(e,t):this._dictionary[e]=t},delete:function(e){"number"==typeof e&&(e=e.toString()),i?this._dictionary.delete(e):this._dictionary[e]=void 0},has:function(e){return"number"==typeof e&&(e=e.toString()),i?this._dictionary.has(e):objOwns(this._dictionary,e)&&"undefined"!=typeof this._dictionary[e]},get:function(e){if("number"==typeof e&&(e=e.toString()),this.has(e))return i?this._dictionary.get(e):this._dictionary[e]},forEach:function(e){var t,n,a;if("function"!=typeof e)throw new TypeError("forEach() expects a callback as first parameter.");if(i)this._dictionary.forEach(e);else for(t=Object.keys(this._dictionary),n=0,a=t.length;n<a;n++)e(this._dictionary[t[n]],t[n])},merge:function(){var e,i,n;for(e=0,i=arguments.length;e<i;e++){if(n=arguments[e],!(n instanceof t))throw new TypeError("Expected an object of type Dictionary, but argument "+e+" is not.");n.forEach(function(e,t){this.set(t,e)}.bind(this))}},toObject:function(){if(!i)return e.clone(this._dictionary);var t={};return this._dictionary.forEach(function(e,i){t[i]=e}),t}},t.fromObject=function(e){var i,n=new t;for(i in e)objOwns(e,i)&&n.set(i,e[i]);return n},Object.defineProperty(t.prototype,"size",{enumerable:!1,configurable:!0,get:function(){return i?this._dictionary.size:Object.keys(this._dictionary).length}}),t}),define("WoltLabSuite/Core/Template.grammar",["require"],function(e){var t=function(e,t,i,n){for(i=i||{},n=e.length;n--;i[e[n]]=t);return i},i=[2,37],n=[5,9,11,12,13,18,19,21,22,23,25,26,27,28,30,31,32,33,35,37,39],a=[1,24],o=[1,25],r=[1,31],s=[1,29],l=[1,30],c=[1,26],d=[1,27],u=[1,33],h=[11,12,15,40,41,45,47,49,50,52],p=[9,11,12,13,18,19,21,23,26,28,30,31,32,33,35,37],f=[11,12,15,40,41,44,45,46,47,49,50,52],m=[18,35,37],g=[12,15],_={trace:function(){},yy:{},symbols_:{error:2,TEMPLATE:3,CHUNK_STAR:4,EOF:5,CHUNK_STAR_repetition0:6,CHUNK:7,PLAIN_ANY:8,T_LITERAL:9,COMMAND:10,T_ANY:11,T_WS:12,"{if":13,COMMAND_PARAMETERS:14,"}":15,COMMAND_repetition0:16,COMMAND_option0:17,"{/if}":18,"{include":19,COMMAND_PARAMETER_LIST:20,"{implode":21,"{/implode}":22,"{foreach":23,COMMAND_option1:24,"{/foreach}":25,"{lang}":26,"{/lang}":27,"{":28,VARIABLE:29,"{#":30,"{@":31,"{ldelim}":32,"{rdelim}":33,ELSE:34,"{else}":35,ELSE_IF:36,"{elseif":37,FOREACH_ELSE:38,"{foreachelse}":39,T_VARIABLE:40,T_VARIABLE_NAME:41,VARIABLE_repetition0:42,VARIABLE_SUFFIX:43,"[":44,"]":45,".":46,"(":47,VARIABLE_SUFFIX_option0:48,")":49,"=":50,COMMAND_PARAMETER_VALUE:51,T_QUOTED_STRING:52,COMMAND_PARAMETERS_repetition_plus0:53,COMMAND_PARAMETER:54,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",9:"T_LITERAL",11:"T_ANY",12:"T_WS",13:"{if",15:"}",18:"{/if}",19:"{include",21:"{implode",22:"{/implode}",23:"{foreach",25:"{/foreach}",26:"{lang}",27:"{/lang}",28:"{",30:"{#",31:"{@",32:"{ldelim}",33:"{rdelim}",35:"{else}",37:"{elseif",39:"{foreachelse}",40:"T_VARIABLE",41:"T_VARIABLE_NAME",44:"[",45:"]",46:".",47:"(",49:")",50:"=",52:"T_QUOTED_STRING"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[8,1],[8,1],[10,7],[10,3],[10,5],[10,6],[10,3],[10,3],[10,3],[10,3],[10,1],[10,1],[34,2],[36,4],[38,2],[29,3],[43,3],[43,2],[43,3],[20,5],[20,3],[51,1],[51,1],[14,1],[54,1],[54,1],[54,1],[54,1],[54,1],[54,1],[54,3],[6,0],[6,2],[16,0],[16,2],[17,0],[17,1],[24,0],[24,1],[42,0],[42,2],[48,0],[48,1],[53,1],[53,2]],performAction:function(e,t,i,n,a,o,r){var s,l=o.length-1;switch(a){case 1:return o[l-1]+";";case 2:s=o[l].reduce(function(e,t){return t.encode&&!e[1]?e[0]+=" + '"+t.value:t.encode&&e[1]?e[0]+=t.value:!t.encode&&e[1]?e[0]+="' + "+t.value:t.encode||e[1]||(e[0]+=" + "+t.value),e[1]=t.encode,e},["''",!1]),s[1]&&(s[0]+="'"),this.$=s[0];break;case 3:case 4:this.$={encode:!0,value:o[l].replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/(\r\n|\n|\r)/g,"\\n")};break;case 5:this.$={encode:!1,value:o[l]};break;case 8:this.$="(function() { if ("+o[l-5]+") { return "+o[l-3]+"; } "+o[l-2].join(" ")+" "+(o[l-1]||"")+" return ''; })()";break;case 9:if(!o[l-1].file)throw new Error("Missing parameter file");this.$=o[l-1].file+".fetch(v)";break;case 10:if(!o[l-3].from)throw new Error("Missing parameter from");if(!o[l-3].item)throw new Error("Missing parameter item");o[l-3].glue||(o[l-3].glue="', '"),this.$="(function() { return "+o[l-3].from+".map(function(item) { v["+o[l-3].item+"] = item; return "+o[l-1]+"; }).join("+o[l-3].glue+"); })()";break;case 11:if(!o[l-4].from)throw new Error("Missing parameter from");if(!o[l-4].item)throw new Error("Missing parameter item");this.$="(function() {var looped = false, result = '';if ("+o[l-4].from+" instanceof Array) {for (var i = 0; i < "+o[l-4].from+".length; i++) { looped = true;v["+o[l-4].key+"] = i;v["+o[l-4].item+"] = "+o[l-4].from+"[i];result += "+o[l-2]+";}} else {for (var key in "+o[l-4].from+") {if (!"+o[l-4].from+".hasOwnProperty(key)) continue;looped = true;v["+o[l-4].key+"] = key;v["+o[l-4].item+"] = "+o[l-4].from+"[key];result += "+o[l-2]+";}}return (looped ? result : "+(o[l-1]||"''")+"); })()";break;case 12:this.$="Language.get("+o[l-1]+", v)";break;case 13:this.$="StringUtil.escapeHTML("+o[l-1]+")";break;case 14:this.$="StringUtil.formatNumeric("+o[l-1]+")";break;case 15:this.$=o[l-1];break;case 16:this.$="'{'";break;case 17:this.$="'}'";break;case 18:this.$="else { return "+o[l]+"; }";break;case 19:this.$="else if ("+o[l-2]+") { return "+o[l]+"; }";break;case 20:this.$=o[l];break;case 21:this.$="v['"+o[l-1]+"']"+o[l].join("");break;case 22:this.$=o[l-2]+o[l-1]+o[l];break;case 23:this.$="['"+o[l]+"']";break;case 24:case 36:this.$=o[l-2]+(o[l-1]||"")+o[l];break;case 25:this.$=o[l],this.$[o[l-4]]=o[l-2];break;case 26:this.$={},this.$[o[l-2]]=o[l];break;case 29:this.$=o[l].join("");break;case 37:case 39:case 45:this.$=[];break;case 38:case 40:case 46:case 50:o[l-1].push(o[l]);break;case 49:this.$=[o[l]]}},table:[t([5,9,11,12,13,19,21,23,26,28,30,31,32,33],i,{3:1,4:2,6:3}),{1:[3]},{5:[1,4]},t([5,18,22,25,27,35,37,39],[2,2],{7:5,8:6,10:8,9:[1,7],11:[1,9],12:[1,10],13:[1,11],19:[1,12],21:[1,13],23:[1,14],26:[1,15],28:[1,16],30:[1,17],31:[1,18],32:[1,19],33:[1,20]}),{1:[2,1]},t(n,[2,38]),t(n,[2,3]),t(n,[2,4]),t(n,[2,5]),t(n,[2,6]),t(n,[2,7]),{11:a,12:o,14:21,29:28,40:r,41:s,47:l,50:c,52:d,53:22,54:23},{20:32,41:u},{20:34,41:u},{20:35,41:u},t([9,11,12,13,19,21,23,26,27,28,30,31,32,33],i,{6:3,4:36}),{29:37,40:r},{29:38,40:r},{29:39,40:r},t(n,[2,16]),t(n,[2,17]),{15:[1,40]},t([15,45,49],[2,29],{29:28,54:41,11:a,12:o,40:r,41:s,47:l,50:c,52:d}),t(h,[2,49]),t(h,[2,30]),t(h,[2,31]),t(h,[2,32]),t(h,[2,33]),t(h,[2,34]),t(h,[2,35]),{11:a,12:o,14:42,29:28,40:r,41:s,47:l,50:c,52:d,53:22,54:23},{41:[1,43]},{15:[1,44]},{50:[1,45]},{15:[1,46]},{15:[1,47]},{27:[1,48]},{15:[1,49]},{15:[1,50]},{15:[1,51]},t(p,i,{6:3,4:52}),t(h,[2,50]),{49:[1,53]},t(f,[2,45],{42:54}),t(n,[2,9]),{29:57,40:r,51:55,52:[1,56]},t([9,11,12,13,19,21,22,23,26,28,30,31,32,33],i,{6:3,4:58}),t([9,11,12,13,19,21,23,25,26,28,30,31,32,33,39],i,{6:3,4:59}),t(n,[2,12]),t(n,[2,13]),t(n,[2,14]),t(n,[2,15]),t(m,[2,39],{16:60}),t(h,[2,36]),t([11,12,15,40,41,45,49,50,52],[2,21],{43:61,44:[1,62],46:[1,63],47:[1,64]}),{12:[1,65],15:[2,26]},t(g,[2,27]),t(g,[2,28]),{22:[1,66]},{24:67,25:[2,43],38:68,39:[1,69]},{17:70,18:[2,41],34:72,35:[1,74],36:71,37:[1,73]},t(f,[2,46]),{11:a,12:o,14:75,29:28,40:r,41:s,47:l,50:c,52:d,53:22,54:23},{41:[1,76]},{11:a,12:o,14:78,29:28,40:r,41:s,47:l,48:77,49:[2,47],50:c,52:d,53:22,54:23},{20:79,41:u},t(n,[2,10]),{25:[1,80]},{25:[2,44]},t([9,11,12,13,19,21,23,25,26,28,30,31,32,33],i,{6:3,4:81}),{18:[1,82]},t(m,[2,40]),{18:[2,42]},{11:a,12:o,14:83,29:28,40:r,41:s,47:l,50:c,52:d,53:22,54:23},t([9,11,12,13,18,19,21,23,26,28,30,31,32,33],i,{6:3,4:84}),{45:[1,85]},t(f,[2,23]),{49:[1,86]},{49:[2,48]},{15:[2,25]},t(n,[2,11]),{25:[2,20]},t(n,[2,8]),{15:[1,87]},{18:[2,18]},t(f,[2,22]),t(f,[2,24]),t(p,i,{6:3,4:88}),t(m,[2,19])],defaultActions:{4:[2,1],68:[2,44],72:[2,42],78:[2,48],79:[2,25],81:[2,20],84:[2,18]},parseError:function(e,t){function i(e,t){this.message=e,this.hash=t}if(!t.recoverable)throw i.prototype=Error,new i(e,t);this.trace(e)},parse:function(e){var t,i,n,a,o,r,s,l,c,d,u,h,p,f,m,g=this,_=[0],b=[null],v=[],w=this.table,y="",C=0,E=0,L=0,S=2,x=1,D=v.slice.call(arguments,1),I=Object.create(this.lexer),T={yy:{}};for(t in this.yy)Object.prototype.hasOwnProperty.call(this.yy,t)&&(T.yy[t]=this.yy[t]);for(I.setInput(e,T.yy),T.yy.lexer=I,T.yy.parser=this,"undefined"==typeof I.yylloc&&(I.yylloc={}),i=I.yylloc,v.push(i),n=I.options&&I.options.ranges,"function"==typeof T.yy.parseError?this.parseError=T.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,
a=function(){var e;return e=I.lex()||x,"number"!=typeof e&&(e=g.symbols_[e]||e),e},d={};;){if(s=_[_.length-1],this.defaultActions[s]?l=this.defaultActions[s]:(null!==o&&"undefined"!=typeof o||(o=a()),l=w[s]&&w[s][o]),"undefined"==typeof l||!l.length||!l[0]){m="",f=[];for(u in w[s])this.terminals_[u]&&u>S&&f.push("'"+this.terminals_[u]+"'");m=I.showPosition?"Parse error on line "+(C+1)+":\n"+I.showPosition()+"\nExpecting "+f.join(", ")+", got '"+(this.terminals_[o]||o)+"'":"Parse error on line "+(C+1)+": Unexpected "+(o==x?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(m,{text:I.match,token:this.terminals_[o]||o,line:I.yylineno,loc:i,expected:f})}if(l[0]instanceof Array&&l.length>1)throw new Error("Parse Error: multiple actions possible at state: "+s+", token: "+o);switch(l[0]){case 1:_.push(o),b.push(I.yytext),v.push(I.yylloc),_.push(l[1]),o=null,r?(o=r,r=null):(E=I.yyleng,y=I.yytext,C=I.yylineno,i=I.yylloc,L>0&&L--);break;case 2:if(h=this.productions_[l[1]][1],d.$=b[b.length-h],d._$={first_line:v[v.length-(h||1)].first_line,last_line:v[v.length-1].last_line,first_column:v[v.length-(h||1)].first_column,last_column:v[v.length-1].last_column},n&&(d._$.range=[v[v.length-(h||1)].range[0],v[v.length-1].range[1]]),c=this.performAction.apply(d,[y,E,C,T.yy,l[1],b,v].concat(D)),"undefined"!=typeof c)return c;h&&(_=_.slice(0,-1*h*2),b=b.slice(0,-1*h),v=v.slice(0,-1*h)),_.push(this.productions_[l[1]][0]),b.push(d.$),v.push(d._$),p=w[_[_.length-2]][_[_.length-1]],_.push(p);break;case 3:return!0}}return!0}},b=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e,t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,e=t.match(/(?:\r\n?|\n).*/g),e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(e){var t,i,n=e.length,a=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,t=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),a.length-1&&(this.yylineno-=a.length-1),i=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:a?(a.length===t.length?this.yylloc.first_column:0)+t[t.length-a.length].length-a[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var i,n,a,o;if(this.options.backtrack_lexer&&(a={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(a.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],i=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),i)return i;if(this._backtrack){for(o in a)this[o]=a[o];return!1}return!1},next:function(){var e,t,i,n,a,o;if(this.done)return this.EOF;for(this._input||(this.done=!0),this._more||(this.yytext="",this.match=""),a=this._currentRules(),o=0;o<a.length;o++)if(i=this._input.match(this.rules[a[o]]),i&&(!t||i[0].length>t[0].length)){if(t=i,n=o,this.options.backtrack_lexer){if(e=this.test_match(i,a[o]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?(e=this.test_match(t,a[n]),e!==!1&&e):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,i,n){switch(i){case 0:break;case 1:return t.yytext=t.yytext.substring(9,t.yytext.length-10),9;case 2:return 52;case 3:return 52;case 4:return 40;case 5:return 41;case 6:return 46;case 7:return 44;case 8:return 45;case 9:return 47;case 10:return 49;case 11:return 50;case 12:return 32;case 13:return 33;case 14:return this.begin("command"),30;case 15:return this.begin("command"),31;case 16:return this.begin("command"),13;case 17:return this.begin("command"),37;case 18:return this.begin("command"),37;case 19:return 35;case 20:return 18;case 21:return 26;case 22:return 27;case 23:return this.begin("command"),19;case 24:return this.begin("command"),21;case 25:return 22;case 26:return this.begin("command"),23;case 27:return 39;case 28:return 25;case 29:return this.begin("command"),28;case 30:return this.popState(),15;case 31:return 12;case 32:return 5;case 33:return 11}},rules:[/^(?:\{\*[\s\S]*?\*\})/,/^(?:\{literal\}[\s\S]*?\{\/literal\})/,/^(?:"([^"]|\\\.)*")/,/^(?:'([^']|\\\.)*')/,/^(?:\$)/,/^(?:[_a-zA-Z][_a-zA-Z0-9]*)/,/^(?:\.)/,/^(?:\[)/,/^(?:\])/,/^(?:\()/,/^(?:\))/,/^(?:=)/,/^(?:\{ldelim\})/,/^(?:\{rdelim\})/,/^(?:\{#)/,/^(?:\{@)/,/^(?:\{if )/,/^(?:\{else if )/,/^(?:\{elseif )/,/^(?:\{else\})/,/^(?:\{\/if\})/,/^(?:\{lang\})/,/^(?:\{\/lang\})/,/^(?:\{include )/,/^(?:\{implode )/,/^(?:\{\/implode\})/,/^(?:\{foreach )/,/^(?:\{foreachelse\})/,/^(?:\{\/foreach\})/,/^(?:\{(?!\s))/,/^(?:\})/,/^(?:\s+)/,/^(?:$)/,/^(?:[^{])/],conditions:{command:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33],inclusive:!0},INITIAL:{rules:[0,1,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,31,32,33],inclusive:!0}}};return e}();return _.lexer=b,_}),define("WoltLabSuite/Core/NumberUtil",[],function(){"use strict";var e={round:function(e,t){return"undefined"==typeof t||0===+t?Math.round(e):(e=+e,t=+t,isNaN(e)||"number"!=typeof t||t%1!==0?NaN:(e=e.toString().split("e"),e=Math.round(+(e[0]+"e"+(e[1]?+e[1]-t:-t))),e=e.toString().split("e"),+(e[0]+"e"+(e[1]?+e[1]+t:t))))}};return e}),define("WoltLabSuite/Core/StringUtil",["Language","./NumberUtil"],function(e,t){"use strict";return{addThousandsSeparator:function(t){return void 0===e&&(e=require("Language")),String(t).replace(/(^-?\d{1,3}|\d{3})(?=(?:\d{3})+(?:$|\.))/g,"$1"+e.get("wcf.global.thousandsSeparator"))},escapeHTML:function(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},escapeRegExp:function(e){return String(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},formatNumeric:function(i,n){void 0===e&&(e=require("Language")),i=String(t.round(i,n||-2));var a=i.split(".");return i=this.addThousandsSeparator(a[0]),a.length>1&&(i+=e.get("wcf.global.decimalPoint")+a[1]),i=i.replace("-","−")},lcfirst:function(e){return String(e).substring(0,1).toLowerCase()+e.substring(1)},ucfirst:function(e){return String(e).substring(0,1).toUpperCase()+e.substring(1)},unescapeHTML:function(e){return String(e).replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">")},shortUnit:function(e){var i="";return e>=1e6?(e/=1e6,e=e>10?Math.floor(e):t.round(e,-1),i="M"):e>=1e3&&(e/=1e3,e=e>10?Math.floor(e):t.round(e,-1),i="k"),this.formatNumeric(e)+i}}}),define("WoltLabSuite/Core/Template",["./Template.grammar","./StringUtil","Language"],function(e,t,i){"use strict";function n(){this.yy={}}function a(n){void 0===i&&(i=require("Language")),void 0===t&&(t=require("StringUtil"));try{n=e.parse(n),n="var tmp = {};\nfor (var key in v) tmp[key] = v[key];\nv = tmp;\nv.__wcf = window.WCF; v.__window = window;\nreturn "+n,this.fetch=new Function("StringUtil","Language","v",n).bind(void 0,t,i)}catch(e){throw console.debug(e.message),e}}return n.prototype=e,e.Parser=n,e=new n,Object.defineProperty(a,"callbacks",{enumerable:!1,configurable:!1,get:function(){throw new Error("WCF.Template.callbacks is no longer supported")},set:function(e){throw new Error("WCF.Template.callbacks is no longer supported")}}),a.prototype={fetch:function(e){throw new Error("This Template is not initialized.")}},a}),define("WoltLabSuite/Core/Language",["Dictionary","./Template"],function(e,t){"use strict";var i=new e,n={addObject:function(t){i.merge(e.fromObject(t))},add:function(e,t){i.set(e,t)},get:function(e,n){n||(n={});var a=i.get(e);if(void 0===a)return e;if("string"==typeof a){try{i.set(e,new t(a))}catch(n){i.set(e,new t("{literal}"+a.replace(/\{\/literal\}/g,"{/literal}{ldelim}/literal}{literal}")+"{/literal}"))}a=i.get(e)}return a instanceof t&&(a=a.fetch(n)),a}};return n}),define("WoltLabSuite/Core/CallbackList",["Dictionary"],function(e){"use strict";function t(){this._dictionary=new e}return t.prototype={add:function(e,t){if("function"!=typeof t)throw new TypeError("Expected a valid callback as second argument for identifier '"+e+"'.");this._dictionary.has(e)||this._dictionary.set(e,[]),this._dictionary.get(e).push(t)},remove:function(e){this._dictionary.delete(e)},forEach:function(e,t){if(null===e)this._dictionary.forEach(function(e,i){e.forEach(t)});else{var i=this._dictionary.get(e);void 0!==i&&i.forEach(t)}}},t}),define("WoltLabSuite/Core/Dom/Change/Listener",["CallbackList"],function(e){"use strict";var t=new e,i=!1;return{add:t.add.bind(t),remove:t.remove.bind(t),trigger:function(){if(!i)try{i=!0,t.forEach(null,function(e){e()})}finally{i=!1}}}}),define("WoltLabSuite/Core/Environment",[],function(){"use strict";var e="other",t="none",i="desktop",n=!1;return{setup:function(){var a,o,r,s,l;if("object"==typeof window.chrome)e="chrome";else for(a=window.getComputedStyle(document.documentElement),o=0,r=a.length;o<r;o++)s=a[o],0===s.indexOf("-ms-")?e="microsoft":0===s.indexOf("-moz-")?e="firefox":0===s.indexOf("-webkit-")&&(e="safari");l=window.navigator.userAgent.toLowerCase(),l.indexOf("crios")!==-1?(e="chrome",i="ios"):/(?:iphone|ipad|ipod)/.test(l)?(e="safari",i="ios"):l.indexOf("android")!==-1?i="android":l.indexOf("iemobile")!==-1&&(e="microsoft",i="windows"),"desktop"!==i||l.indexOf("mobile")===-1&&l.indexOf("tablet")===-1||(i="mobile"),t="redactor",n=!!("ontouchstart"in window)||!!("msMaxTouchPoints"in window.navigator)&&window.navigator.msMaxTouchPoints>0||window.DocumentTouch&&document instanceof DocumentTouch},browser:function(){return e},editor:function(){return t},platform:function(){return i},touch:function(){return n}}}),define("WoltLabSuite/Core/Dom/Util",["Environment","StringUtil"],function(e,t){"use strict";function i(e,t,i){if(!t.contains(e))throw new Error("Ancestor element does not contain target element.");for(var n,a=i+"Sibling";null!==e&&e!==t;){if(null!==e[i+"ElementSibling"])return!1;if(e[a])for(n=e[a];n;){if(""!==n.textContent.trim())return!1;n=n[a]}e=e.parentNode}return!0}var n=0,a={createFragmentFromHtml:function(e){var t,i=elCreate("div");for(this.setInnerHtml(i,e),t=document.createDocumentFragment();i.childNodes.length;)t.appendChild(i.childNodes[0]);return t},getUniqueId:function(){var e;do e="wcf"+n++;while(null!==elById(e));return e},identify:function(e){if(!(e instanceof Element))throw new TypeError("Expected a valid DOM element as argument.");var t=elAttr(e,"id");return t||(t=this.getUniqueId(),elAttr(e,"id",t)),t},outerHeight:function(e,t){t=t||window.getComputedStyle(e);var i=e.offsetHeight;return i+=~~t.marginTop+~~t.marginBottom},outerWidth:function(e,t){t=t||window.getComputedStyle(e);var i=e.offsetWidth;return i+=~~t.marginLeft+~~t.marginRight},outerDimensions:function(e){var t=window.getComputedStyle(e);return{height:this.outerHeight(e,t),width:this.outerWidth(e,t)}},offset:function(e){var t=e.getBoundingClientRect();return{top:Math.round(t.top+(window.scrollY||window.pageYOffset)),left:Math.round(t.left+(window.scrollX||window.pageXOffset))}},prepend:function(e,t){0===t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[0])},insertAfter:function(e,t){null!==t.nextElementSibling?t.parentNode.insertBefore(e,t.nextElementSibling):t.parentNode.appendChild(e)},setStyles:function(e,t){var i,n=!1;for(i in t)t.hasOwnProperty(i)&&(/ !important$/.test(t[i])?(n=!0,t[i]=t[i].replace(/ !important$/,"")):n=!1,"important"!==e.style.getPropertyPriority(i)||n||e.style.removeProperty(i),e.style.setProperty(i,t[i],n?"important":""))},styleAsInt:function(e,t){var i=e.getPropertyValue(t);return null===i?0:parseInt(i)},setInnerHtml:function(e,t){var i,n,a,o,r;for(e.innerHTML=t,a=elBySelAll("script",e),o=0,r=a.length;o<r;o++)n=a[o],i=elCreate("script"),n.src?i.src=n.src:i.textContent=n.textContent,e.appendChild(i),elRemove(n)},insertHtml:function(e,t,i){var n,a,o=elCreate("div");if(this.setInnerHtml(o,e),o.childNodes.length){switch(n=o.childNodes[0],i){case"append":t.appendChild(n);break;case"after":this.insertAfter(n,t);break;case"prepend":this.prepend(n,t);break;case"before":t.parentNode.insertBefore(n,t);break;default:throw new Error("Unknown insert method '"+i+"'.")}for(;o.childNodes.length;)a=o.childNodes[0],this.insertAfter(a,n),n=a}},contains:function(e,t){for(;null!==t;)if(t=t.parentNode,e===t)return!0;return!1},getDataAttributes:function(e,i,n,a){var o,r,s,l,c,d,u,h;for(i=i||"",/^data-/.test(i)||(i="data-"+i),n=n===!0,a=a===!0,r={},c=0,d=e.attributes.length;c<d;c++)if(o=e.attributes[c],0===o.name.indexOf(i)){if(s=o.name.replace(new RegExp("^"+i),""),n)for(l=s.split("-"),s="",u=0,h=l.length;u<h;u++)s.length&&(a&&"id"===l[u]?l[u]="ID":l[u]=t.ucfirst(l[u])),s+=l[u];r[s]=o.value}return r},unwrapChildNodes:function(e){for(var t=e.parentNode;e.childNodes.length;)t.insertBefore(e.childNodes[0],e);elRemove(e)},replaceElement:function(e,t){for(;e.childNodes.length;)t.appendChild(e.childNodes[0]);e.parentNode.insertBefore(t,e),elRemove(e)},isAtNodeStart:function(e,t){return i(e,t,"previous")},isAtNodeEnd:function(e,t){return i(e,t,"next")},getFixedParent:function(e){for(;e&&e!==document.body;){if("fixed"===window.getComputedStyle(e).getPropertyValue("position"))return e;e=e.offsetParent}return null}};return window.bc_wcfDomUtil=a,a}),function(e,t,i){var n=window.matchMedia;"undefined"!=typeof module&&module.exports?module.exports=i(n):"function"==typeof define&&define.amd?define("enquire",[],function(){return t[e]=i(n)}):t[e]=i(n)}("enquire",this,function(e){"use strict";function t(e,t){var i,n=0,a=e.length;for(n;n<a&&(i=t(e[n],n),i!==!1);n++);}function i(e){return"[object Array]"===Object.prototype.toString.apply(e)}function n(e){return"function"==typeof e}function a(e){this.options=e,!e.deferSetup&&this.setup()}function o(t,i){this.query=t,this.isUnconditional=i,this.handlers=[],this.mql=e(t);var n=this;this.listener=function(e){n.mql=e,n.assess()},this.mql.addListener(this.listener)}function r(){if(!e)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!e("only all").matches}return a.prototype={setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(e){return this.options===e||this.options.match===e}},o.prototype={addHandler:function(e){var t=new a(e);this.handlers.push(t),this.matches()&&t.on()},removeHandler:function(e){var i=this.handlers;t(i,function(t,n){if(t.equals(e))return t.destroy(),!i.splice(n,1)})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){t(this.handlers,function(e){e.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var e=this.matches()?"on":"off";t(this.handlers,function(t){t[e]()})}},r.prototype={register:function(e,a,r){var s=this.queries,l=r&&this.browserIsIncapable;return s[e]||(s[e]=new o(e,l)),n(a)&&(a={match:a}),i(a)||(a=[a]),t(a,function(t){n(t)&&(t={match:t}),s[e].addHandler(t)}),this},unregister:function(e,t){var i=this.queries[e];return i&&(t?i.removeHandler(t):(i.clear(),delete this.queries[e])),this}},new r}),define("WoltLabSuite/Core/ObjectMap",[],function(){"use strict";function e(){this._map=t?new WeakMap:{key:[],value:[]}}var t=objOwns(window,"WeakMap")&&"function"==typeof window.WeakMap;return e.prototype={set:function(e,i){if("object"!=typeof e||null===e)throw new TypeError("Only objects can be used as key");if("object"!=typeof i||null===i)throw new TypeError("Only objects can be used as value");t?this._map.set(e,i):(this._map.key.push(e),this._map.value.push(i))},delete:function(e){if(t)this._map.delete(e);else{var i=this._map.key.indexOf(e);this._map.key.splice(i),this._map.value.splice(i)}},has:function(e){return t?this._map.has(e):this._map.key.indexOf(e)!==-1},get:function(e){if(t)return this._map.get(e);var i=this._map.key.indexOf(e);return i!==-1?this._map.value[i]:void 0}},e}),define("WoltLabSuite/Core/Dom/Traverse",[],function(){"use strict";var e=0,t=1,i=2,n=3,a=[function(e,t){return!0},function(e,t){return e.matches(t)},function(e,t){return e.classList.contains(t)},function(e,t){return e.nodeName===t}],o=function(e,t,i){var n,o;if(!(e instanceof Element))throw new TypeError("Expected a valid element as first argument.");for(n=[],o=0;o<e.childElementCount;o++)a[t](e.children[o],i)&&n.push(e.children[o]);return n},r=function(e,t,i,n){if(!(e instanceof Element))throw new TypeError("Expected a valid element as first argument.");for(e=e.parentNode;e instanceof Element;){if(e===n)return null;if(a[t](e,i))return e;e=e.parentNode}return null},s=function(e,t,i,n){if(!(e instanceof Element))throw new TypeError("Expected a valid element as first argument.");return e instanceof Element&&null!==e[t]&&a[i](e[t],n)?e[t]:null};return{childBySel:function(e,i){return o(e,t,i)[0]||null},childByClass:function(e,t){return o(e,i,t)[0]||null},childByTag:function(e,t){return o(e,n,t)[0]||null},childrenBySel:function(e,i){return o(e,t,i)},childrenByClass:function(e,t){return o(e,i,t)},childrenByTag:function(e,t){return o(e,n,t)},parentBySel:function(e,i,n){return r(e,t,i,n)},parentByClass:function(e,t,n){return r(e,i,t,n)},parentByTag:function(e,t,i){return r(e,n,t,i)},next:function(t){return s(t,"nextElementSibling",e,null)},nextBySel:function(e,i){return s(e,"nextElementSibling",t,i)},nextByClass:function(e,t){return s(e,"nextElementSibling",i,t)},nextByTag:function(e,t){return s(e,"nextElementSibling",n,t)},prev:function(t){return s(t,"previousElementSibling",e,null)},prevBySel:function(e,i){return s(e,"previousElementSibling",t,i)},prevByClass:function(e,t){return s(e,"previousElementSibling",i,t)},prevByTag:function(e,t){return s(e,"previousElementSibling",n,t)}}}),define("WoltLabSuite/Core/Ui/Confirmation",["Core","Language","Ui/Dialog"],function(e,t,i){"use strict";var n=!1,a=null,o=null,r={},s=null,l={show:function(t){if(void 0===i&&(i=require("Ui/Dialog")),!n){if(r=e.extend({cancel:null,confirm:null,legacyCallback:null,message:"",messageIsHtml:!1,parameters:{},template:""},t),r.message="string"==typeof r.message?r.message.trim():"",!r.message.length)throw new Error("Expected a non-empty string for option 'message'.");if("function"!=typeof r.confirm&&"function"!=typeof r.legacyCallback)throw new TypeError("Expected a valid callback for option 'confirm'.");null===o&&this._createDialog(),o.innerHTML="string"==typeof r.template?r.template.trim():"",r.messageIsHtml?s.innerHTML=r.message:s.textContent=r.message,n=!0,i.open(this)}},_dialogSetup:function(){return{id:"wcfSystemConfirmation",options:{onClose:this._onClose.bind(this),onShow:this._onShow.bind(this),title:t.get("wcf.global.confirmation.title")}}},getContentElement:function(){return o},_createDialog:function(){var e,n,r=elCreate("div");elAttr(r,"id","wcfSystemConfirmation"),r.classList.add("systemConfirmation"),s=elCreate("p"),r.appendChild(s),o=elCreate("div"),elAttr(o,"id","wcfSystemConfirmationContent"),r.appendChild(o),e=elCreate("div"),e.classList.add("formSubmit"),r.appendChild(e),a=elCreate("button"),a.classList.add("buttonPrimary"),a.textContent=t.get("wcf.global.confirmation.confirm"),a.addEventListener(WCF_CLICK_EVENT,this._confirm.bind(this)),e.appendChild(a),n=elCreate("button"),n.textContent=t.get("wcf.global.confirmation.cancel"),n.addEventListener(WCF_CLICK_EVENT,function(){i.close("wcfSystemConfirmation")}),e.appendChild(n),document.body.appendChild(r)},_confirm:function(){"function"==typeof r.legacyCallback?r.legacyCallback("confirm",r.parameters,o):r.confirm(r.parameters,o),n=!1,i.close("wcfSystemConfirmation")},_onClose:function(){n&&(a.blur(),n=!1,"function"==typeof r.legacyCallback?r.legacyCallback("cancel",r.parameters,o):"function"==typeof r.cancel&&r.cancel(r.parameters))},_onShow:function(){a.blur(),a.focus()}};return l}),define("WoltLabSuite/Core/Ui/Screen",["Core","Dictionary","Environment"],function(e,t,i){"use strict";var n=null,a=new t,o=0,r=null,s=0,l=t.fromObject({"screen-xs":"(max-width: 544px)","screen-sm":"(min-width: 545px) and (max-width: 768px)","screen-sm-down":"(max-width: 768px)","screen-sm-up":"(min-width: 545px)","screen-sm-md":"(min-width: 545px) and (max-width: 1024px)","screen-md":"(min-width: 769px) and (max-width: 1024px)","screen-md-down":"(max-width: 1024px)","screen-md-up":"(min-width: 769px)","screen-lg":"(min-width: 1025px)"}),c=new t;return{on:function(t,i){var n=e.getUuid(),a=this._getQueryObject(t);return"function"==typeof i.match&&a.callbacksMatch.set(n,i.match),"function"==typeof i.unmatch&&a.callbacksUnmatch.set(n,i.unmatch),"function"==typeof i.setup&&(a.mql.matches?i.setup():a.callbacksSetup.set(n,i.setup)),n},remove:function(e,t){var i=this._getQueryObject(e);i.callbacksMatch.delete(t),i.callbacksUnmatch.delete(t),i.callbacksSetup.delete(t)},is:function(e){return this._getQueryObject(e).mql.matches},scrollDisable:function(){if(0===o){s=document.body.scrollTop,r="body",s||(s=document.documentElement.scrollTop,r="documentElement");var e=elById("pageContainer");"ios"===i.platform()?(e.style.setProperty("position","relative",""),e.style.setProperty("top","-"+s+"px","")):e.style.setProperty("margin-top","-"+s+"px",""),document.documentElement.classList.add("disableScrolling")}o++},scrollEnable:function(){if(o&&(o--,0===o)){document.documentElement.classList.remove("disableScrolling");var e=elById("pageContainer");"ios"===i.platform()?(e.style.removeProperty("position"),e.style.removeProperty("top")):e.style.removeProperty("margin-top"),s&&(document[r].scrollTop=~~s)}},setDialogContainer:function(e){n=e},_getQueryObject:function(e){if("string"!=typeof e||""===e.trim())throw new TypeError("Expected a non-empty string for parameter 'query'.");c.has(e)&&(e=c.get(e)),l.has(e)&&(e=l.get(e));var i=a.get(e);return i||(i={callbacksMatch:new t,callbacksUnmatch:new t,callbacksSetup:new t,mql:window.matchMedia(e)},i.mql.addListener(this._mqlChange.bind(this)),a.set(e,i),e!==i.mql.media&&c.set(i.mql.media,e)),i},_mqlChange:function(e){var i=this._getQueryObject(e.media);e.matches?i.callbacksSetup.size?(i.callbacksSetup.forEach(function(e){e()}),i.callbacksSetup=new t):i.callbacksMatch.forEach(function(e){e()}):i.callbacksUnmatch.forEach(function(e){e()})}}}),define("WoltLabSuite/Core/Ui/Alignment",["Core","Language","Dom/Traverse","Dom/Util"],function(e,t,i,n){"use strict";return{set:function(a,o,r){var s,l,c,d,u,h,p,f,m,g,_,b,v,w,y,C,E,L;if(r=e.extend({verticalOffset:0,pointer:!1,pointerOffset:4,pointerClassNames:[],refDimensionsElement:null,horizontal:"left",vertical:"bottom",allowFlip:"both"},r),Array.isArray(r.pointerClassNames)&&r.pointerClassNames.length===(r.pointer?1:2)||(r.pointerClassNames=[]),["left","right","center"].indexOf(r.horizontal)===-1&&(r.horizontal="left"),"bottom"!==r.vertical&&(r.vertical="top"),["both","horizontal","vertical","none"].indexOf(r.allowFlip)===-1&&(r.allowFlip="both"),n.setStyles(a,{bottom:"auto !important",left:"0 !important",right:"auto !important",top:"0 !important",visibility:"hidden !important"}),s=n.outerDimensions(a),l=n.outerDimensions(r.refDimensionsElement instanceof Element?r.refDimensionsElement:o),c=n.offset(o),d=window.innerHeight,u=document.body.clientWidth,h={result:null},p=!1,"center"===r.horizontal&&(p=!0,h=this._tryAlignmentHorizontal(r.horizontal,s,l,c,u),h.result||("both"===r.allowFlip||"horizontal"===r.allowFlip?r.horizontal="left":h.result=!0)),"rtl"===t.get("wcf.global.pageDirection")&&(r.horizontal="left"===r.horizontal?"right":"left"),h.result||(f=h,h=this._tryAlignmentHorizontal(r.horizontal,s,l,c,u),h.result||"both"!==r.allowFlip&&"horizontal"!==r.allowFlip||(m=this._tryAlignmentHorizontal("left"===r.horizontal?"right":"left",s,l,c,u),m.result?h=m:p&&(h=f))),g=h.left,_=h.right,b=this._tryAlignmentVertical(r.vertical,s,l,c,d,r.verticalOffset),b.result||"both"!==r.allowFlip&&"vertical"!==r.allowFlip||(v=this._tryAlignmentVertical("top"===r.vertical?"bottom":"top",s,l,c,d,r.verticalOffset),v.result&&(b=v)),w=b.bottom,y=b.top,r.pointer){if(C=i.childrenByClass(a,"elementPointer"),C=C[0]||null,null===C)throw new Error("Expected the .elementPointer element to be a direct children.");"center"===h.align?(C.classList.add("center"),C.classList.remove("left"),C.classList.remove("right")):(C.classList.add(h.align),C.classList.remove("center"),C.classList.remove("left"===h.align?"right":"left")),"top"===b.align?C.classList.add("flipVertical"):C.classList.remove("flipVertical")}else 2===r.pointerClassNames.length&&(E=0,L=1,a.classList["auto"===y?"add":"remove"](r.pointerClassNames[E]),a.classList["auto"===g?"add":"remove"](r.pointerClassNames[L]));"auto"!==w&&(w=Math.round(w)+"px"),"auto"!==g&&(g=Math.ceil(g)+"px"),"auto"!==_&&(_=Math.floor(_)+"px"),"auto"!==y&&(y=Math.round(y)+"px"),n.setStyles(a,{bottom:w,left:g,right:_,top:y}),elShow(a),a.style.removeProperty("visibility")},_tryAlignmentHorizontal:function(e,t,i,n,a){var o="auto",r="auto",s=!0;return"left"===e?(o=n.left,o+t.width>a&&(s=!1)):"right"===e?n.left+i.width<t.width?s=!1:(r=a-(n.left+i.width),r<0&&(s=!1)):(o=n.left+i.width/2-t.width/2,o=~~o,(o<0||o+t.width>a)&&(s=!1)),{align:e,left:o,right:r,result:s}},_tryAlignmentVertical:function(e,t,i,n,a,o){var r,s="auto",l="auto",c=!0;return"top"===e?(r=document.body.clientHeight,s=r-n.top+o,r-(s+t.height)<(window.scrollY||window.pageYOffset)&&(c=!1)):(l=n.top+i.height+o,l+t.height-(window.scrollY||window.pageYOffset)>a&&(c=!1)),{align:e,bottom:s,top:l,result:c}}}}),define("WoltLabSuite/Core/Ui/CloseOverlay",["CallbackList"],function(e){"use strict";var t=new e,i={setup:function(){document.body.addEventListener(WCF_CLICK_EVENT,this.execute.bind(this))},add:t.add.bind(t),remove:t.remove.bind(t),execute:function(){t.forEach(null,function(e){e()})}};return i.setup(),i}),define("WoltLabSuite/Core/Ui/Dropdown/Simple",["CallbackList","Core","Dictionary","Ui/Alignment","Dom/ChangeListener","Dom/Traverse","Dom/Util","Ui/CloseOverlay"],function(e,t,i,n,a,o,r,s){"use strict";var l=null,c=new e,d=!1,u=new i,h=new i,p=null;return{setup:function(){d||(d=!0,p=elCreate("div"),p.className="dropdownMenuContainer",document.body.appendChild(p),l=elByClass("dropdownToggle"),this.initAll(),s.add("WoltLabSuite/Core/Ui/Dropdown/Simple",this.closeAll.bind(this)),a.add("WoltLabSuite/Core/Ui/Dropdown/Simple",this.initAll.bind(this)),document.addEventListener("scroll",this._onScroll.bind(this)),window.bc_wcfSimpleDropdown=this)},initAll:function(){for(var e=0,t=l.length;e<t;e++)this.init(l[e],!1)},init:function(e,i){var n,a,s,l,c;if(this.setup(),e.classList.contains("jsDropdownEnabled")||elData(e,"target"))return!1;if(n=o.parentByClass(e,"dropdown"),null===n)throw new Error("Invalid dropdown passed, button '"+r.identify(e)+"' does not have a parent with .dropdown.");if(a=o.nextByClass(e,"dropdownMenu"),null===a)throw new Error("Invalid dropdown passed, button '"+r.identify(e)+"' does not have a menu as next sibling.");p.appendChild(a),s=r.identify(n),u.has(s)||(e.classList.add("jsDropdownEnabled"),e.addEventListener(WCF_CLICK_EVENT,this._toggle.bind(this)),u.set(s,n),h.set(s,a),s.match(/^wcf\d+$/)||elData(a,"source",s),a.childElementCount&&a.children[0].classList.contains("scrollableDropdownMenu")&&(a=a.children[0],elData(a,"scroll-to-active",!0),l=null,c=null,a.addEventListener("wheel",function(e){null===l&&(l=a.clientHeight),null===c&&(c=a.scrollHeight),e.wheelDelta>0&&0===a.scrollTop?e.preventDefault():e.wheelDelta<0&&a.scrollTop+l===c&&e.preventDefault()}))),elData(e,"target",s),i&&setTimeout(function(){t.triggerEvent(e,WCF_CLICK_EVENT)},10)},initFragment:function(e,t){this.setup();var i=r.identify(e);u.has(i)||(u.set(i,e),p.appendChild(t),h.set(i,t))},registerCallback:function(e,t){c.add(e,t)},getDropdown:function(e){return u.get(e)},getDropdownMenu:function(e){return h.get(e)},toggleDropdown:function(e,t){this._toggle(null,e,t)},setAlignment:function(e,t,i){var a,o=elBySel(".dropdownToggle",e);null!==o&&o.parentNode.classList.contains("inputAddonTextarea")&&(a=o),n.set(t,i||e,{pointerClassNames:["dropdownArrowBottom","dropdownArrowRight"],refDimensionsElement:a||null,horizontal:"right"===elData(t,"dropdown-alignment-horizontal")?"right":"left",vertical:"top"===elData(t,"dropdown-alignment-vertical")?"top":"bottom"})},setAlignmentById:function(e){var t,i=u.get(e);if(void 0===i)throw new Error("Unknown dropdown identifier '"+e+"'.");t=h.get(e),this.setAlignment(i,t)},isOpen:function(e){var t=h.get(e);return void 0!==t&&t.classList.contains("dropdownOpen")},open:function(e){var t=h.get(e);void 0===t||t.classList.contains("dropdownOpen")||this.toggleDropdown(e)},close:function(e){var t=u.get(e);void 0!==t&&(t.classList.remove("dropdownOpen"),
h.get(e).classList.remove("dropdownOpen"))},closeAll:function(){u.forEach(function(e,t){e.classList.contains("dropdownOpen")&&(e.classList.remove("dropdownOpen"),h.get(t).classList.remove("dropdownOpen"),this._notifyCallbacks(t,"close"))}.bind(this))},destroy:function(e){if(!u.has(e))return!1;try{this.close(e),elRemove(h.get(e))}catch(e){}return h.delete(e),u.delete(e),!0},_onDialogScroll:function(e){var t,i,n,a,o,s,l=e.currentTarget,c=elBySelAll(".dropdown.dropdownOpen",l);for(t=0,i=c.length;t<i;t++)n=c[t],a=r.identify(n),o=r.offset(n),s=r.offset(l),o.top+n.clientHeight<=s.top?this.toggleDropdown(a):o.top>=s.top+l.offsetHeight?this.toggleDropdown(a):o.left<=s.left?this.toggleDropdown(a):o.left>=s.left+l.offsetWidth?this.toggleDropdown(a):this.setAlignment(a,h.get(a))},_onScroll:function(){u.forEach(function(e,t){e.classList.contains("dropdownOpen")&&(elDataBool(e,"is-overlay-dropdown-button")?this.setAlignment(e,h.get(t)):this.close(t))}.bind(this))},_notifyCallbacks:function(e,t){c.forEach(e,function(i){i(e,t)})},_toggle:function(e,t,i){var n,a,r,s,l;return null!==e&&(e.preventDefault(),e.stopPropagation(),t=elData(e.currentTarget,"target")),n=u.get(t),a=!1,void 0!==n&&(e&&(r=e.currentTarget,s=r.parentNode,s!==n&&(s.classList.add("dropdown"),s.id=n.id,n.classList.remove("dropdown"),n.id="",n=s,u.set(t,s))),elDataBool(n,"dropdown-prevent-toggle")&&n.classList.contains("dropdownOpen")&&(a=!0),null===elData(n,"is-overlay-dropdown-button")&&(l=o.parentByClass(n,"dialogContent"),elData(n,"is-overlay-dropdown-button",null!==l),null!==l&&l.addEventListener("scroll",this._onDialogScroll.bind(this)))),u.forEach(function(e,n){var o,r,s,l,c,d=h.get(n);if(e.classList.contains("dropdownOpen"))a===!1&&(e.classList.remove("dropdownOpen"),d.classList.remove("dropdownOpen"),this._notifyCallbacks(n,"close"));else if(n===t&&d.childElementCount>0){if(e.classList.add("dropdownOpen"),d.classList.add("dropdownOpen"),d.childElementCount&&elDataBool(d.children[0],"scroll-to-active")){for(o=d.children[0],o.removeAttribute("data-scroll-to-active"),r=null,s=0,l=o.childElementCount;s<l;s++)if(o.children[s].classList.contains("active")){r=o.children[s];break}r&&(o.scrollTop=Math.max(r.offsetTop+r.clientHeight-d.clientHeight,0))}c=elBySel(".scrollableDropdownMenu",d),null!==c&&c.classList[c.scrollHeight>c.clientHeight?"add":"remove"]("forceScrollbar"),this._notifyCallbacks(n,"open"),this.setAlignment(e,d,i)}}.bind(this)),window.WCF.Dropdown.Interactive.Handler.closeAll(),null===e}}}),define("WoltLabSuite/Core/Ui/Dialog",["enquire","Ajax","Core","Dictionary","Environment","Language","ObjectMap","Dom/ChangeListener","Dom/Traverse","Dom/Util","Ui/Confirmation","Ui/Screen","Ui/SimpleDropdown"],function(e,t,i,n,a,o,r,s,l,c,d,u,h){"use strict";var p=null,f=null,m=new n,g=new r,_=!1,b=null,v=elByClass("jsStaticDialog");return{setup:function(){void 0===t&&(t=require("Ajax")),f=elCreate("div"),f.classList.add("dialogOverlay"),elAttr(f,"aria-hidden","true"),f.addEventListener(WCF_CLICK_EVENT,this._closeOnBackdrop.bind(this)),f.addEventListener("wheel",function(e){e.target===f&&e.preventDefault()}),elById("content").appendChild(f),b=function(e){return 27!==e.keyCode||"INPUT"===e.target.nodeName||"TEXTAREA"===e.target.nodeName||(this.close(p),!1)}.bind(this),u.on("screen-xs",{match:function(){_=!0},unmatch:function(){_=!1},setup:function(){_=!0}}),this._initStaticDialogs(),s.add("Ui/Dialog",this._initStaticDialogs.bind(this)),u.setDialogContainer(f),"ios"===a.platform()&&window.addEventListener("resize",function(){m.forEach(function(e){elAttrBool(e.dialog,"aria-hidden")||this.rebuild(elData(e.dialog,"id"))}.bind(this))}.bind(this))},_initStaticDialogs:function(){for(var e,t,i;v.length;)e=v[0],e.classList.remove("jsStaticDialog"),i=elData(e,"dialog-id"),i&&(t=elById(i))&&function(e,t){t.classList.remove("jsStaticDialogContent"),elHide(t),e.addEventListener(WCF_CLICK_EVENT,this.openStatic.bind(this,t.id,null,{title:elData(t,"title")}))}.bind(this)(e,t)},open:function(e,n){var a,o,r,s=g.get(e);if(i.isPlainObject(s))return this.openStatic(s.id,n);if("function"!=typeof e._dialogSetup)throw new Error("Callback object does not implement the method '_dialogSetup()'.");if(a=e._dialogSetup(),!i.isPlainObject(a))throw new Error("Expected an object literal as return value of '_dialogSetup()'.");if(s={id:a.id},o=!0,void 0===a.source){if(r=elById(a.id),null===r)throw new Error("Element id '"+a.id+"' is invalid and no source attribute was given.");a.source=document.createDocumentFragment(),a.source.appendChild(r),r.removeAttribute("id"),elShow(r)}else if(null===a.source)a.source=n;else if("function"==typeof a.source)a.source();else if(i.isPlainObject(a.source)){if("string"!=typeof n||""===n.trim())return t.api(this,a.source.data,function(t){t.returnValues&&"string"==typeof t.returnValues.template&&(this.open(e,t.returnValues.template),"function"==typeof a.source.after&&a.source.after(m.get(a.id).content,t))}.bind(this)),{};a.source=n}else{if("string"==typeof a.source&&(r=elCreate("div"),elAttr(r,"id",a.id),c.setInnerHtml(r,a.source),a.source=document.createDocumentFragment(),a.source.appendChild(r)),!a.source.nodeType||a.source.nodeType!==Node.DOCUMENT_FRAGMENT_NODE)throw new Error("Expected at least a document fragment as 'source' attribute.");o=!1}return g.set(e,s),this.openStatic(a.id,a.source,a.options,o)},openStatic:function(e,t,n,r){document.documentElement.classList.add("pageOverlayActive"),m.has(e)?this._updateDialog(e,t):(n=i.extend({backdropCloseOnClick:!0,closable:!0,closeButtonLabel:o.get("wcf.global.button.close"),closeConfirmMessage:"",disableContentPadding:!1,title:"",onBeforeClose:null,onClose:null,onShow:null},n),n.closable||(n.backdropCloseOnClick=!1),n.closeConfirmMessage&&(n.onBeforeClose=function(e){d.show({confirm:this.close.bind(this,e),message:n.closeConfirmMessage})}.bind(this)),this._createDialog(e,t,n));var s=m.get(e);return"ios"===a.platform()?(u.scrollDisable(),window.setTimeout(function(){var e=elBySel("input, textarea",s.content);null!==e&&e.focus()}.bind(this),200)):"desktop"!==a.platform()&&u.scrollDisable(),s},setTitle:function(e,t){var i,n,a;if("object"==typeof e&&(i=g.get(e),void 0!==i&&(e=i.id)),n=m.get(e),void 0===n)throw new Error("Expected a valid dialog id, '"+e+"' does not match any active dialog.");a=elByClass("dialogTitle",n.dialog),a.length&&(a[0].textContent=t)},_createDialog:function(e,t,i,n){var a,o,r,s,l,d,u,h,p,g,_,b,v=null;if(null===t&&(v=elById(e),null===v))throw new Error("Expected either a HTML string or an existing element id.");if(a=elCreate("div"),a.classList.add("dialogContainer"),elAttr(a,"aria-hidden","true"),elAttr(a,"role","dialog"),elData(a,"id",e),o=elCreate("header"),a.appendChild(o),r=c.getUniqueId(),elAttr(a,"aria-labelledby",r),s=elCreate("span"),s.classList.add("dialogTitle"),s.textContent=i.title,elAttr(s,"id",r),o.appendChild(s),i.closable&&(l=elCreate("a"),l.className="dialogCloseButton jsTooltip",elAttr(l,"title",i.closeButtonLabel),elAttr(l,"aria-label",i.closeButtonLabel),l.addEventListener(WCF_CLICK_EVENT,this._close.bind(this)),o.appendChild(l),d=elCreate("span"),d.className="icon icon24 fa-times",l.appendChild(d)),u=elCreate("div"),u.classList.add("dialogContent"),i.disableContentPadding&&u.classList.add("dialogContentNoPadding"),a.appendChild(u),u.addEventListener("wheel",function(e){for(var t,i,n,a=!1,o=e.target;;){if(t=o.clientHeight,i=o.scrollHeight,t<i){if(n=o.scrollTop,e.wheelDelta>0&&n>0){a=!0;break}if(e.wheelDelta<0&&n+t<i){a=!0;break}}if(!o||o===u)break;o=o.parentNode}a===!1&&e.preventDefault()}),null===v){if("string"==typeof t)h=elCreate("div"),h.id=e,c.setInnerHtml(h,t);else if(t instanceof DocumentFragment){for(p=[],_=0,b=t.childNodes.length;_<b;_++)g=t.childNodes[_],g.nodeType===Node.ELEMENT_NODE&&p.push(g);"div"!==p[0].nodeName||p.length>1?(h=elCreate("div"),h.id=e,h.appendChild(t)):h=t}}else h=v;u.appendChild(h),"none"===h.style.getPropertyValue("display")&&elShow(h),m.set(e,{backdropCloseOnClick:i.backdropCloseOnClick,content:h,dialog:a,header:o,onBeforeClose:i.onBeforeClose,onClose:i.onClose,onShow:i.onShow}),c.prepend(a,f),"function"==typeof i.onSetup&&i.onSetup(h),n!==!0&&this._updateDialog(e,null)},_updateDialog:function(e,t){var i,n=m.get(e);if(void 0===n)throw new Error("Expected a valid dialog id, '"+e+"' does not match any active dialog.");"string"==typeof t&&c.setInnerHtml(n.content,t),"true"===elAttr(n.dialog,"aria-hidden")&&("true"===elAttr(f,"aria-hidden")&&window.addEventListener("keyup",b),elAttr(n.dialog,"aria-hidden","false"),elAttr(f,"aria-hidden","false"),elData(f,"close-on-click",n.backdropCloseOnClick?"true":"false"),p=e,i=elBySel(".jsDialogAutoFocus",n.dialog),null!==i&&null!==i.offsetParent&&i.focus(),"function"==typeof n.onShow&&n.onShow(n.content),h.closeAll(),window.WCF.Dropdown.Interactive.Handler.closeAll()),this.rebuild(e),s.trigger()},rebuild:function(e){var t,i,n,o,r=m.get(e);if(void 0===r)throw new Error("Expected a valid dialog id, '"+e+"' does not match any active dialog.");"true"!==elAttr(r.dialog,"aria-hidden")&&(t=r.content.parentNode,i=elBySel(".formSubmit",r.content),n=0,null!==i?(t.classList.add("dialogForm"),i.classList.add("dialogFormSubmit"),n+=c.outerHeight(i),n-=1,t.style.setProperty("margin-bottom",n+"px","")):(t.classList.remove("dialogForm"),t.style.removeProperty("margin-bottom")),n+=c.outerHeight(r.header),o=window.innerHeight*(_?1:.8)-n,t.style.setProperty("max-height",~~o+"px",""),"chrome"===a.browser()&&(r.content.scrollHeight>o?r.content.style.setProperty("margin-right","-1px",""):r.content.style.removeProperty("margin-right")))},_close:function(e){e.preventDefault();var t=m.get(p);return"function"==typeof t.onBeforeClose?(t.onBeforeClose(p),!1):void this.close(p)},_closeOnBackdrop:function(e){return e.target!==f||void("true"===elData(f,"close-on-click")?this._close(e):e.preventDefault())},close:function(e){var t,i,n,o;if("object"==typeof e&&(t=g.get(e),void 0!==t&&(e=t.id)),i=m.get(e),void 0===i)throw new Error("Expected a valid dialog id, '"+e+"' does not match any active dialog.");for("function"==typeof i.onClose&&i.onClose(e),elAttr(i.dialog,"aria-hidden","true"),p=null,n=0;n<f.childElementCount;n++)if(o=f.children[n],"false"===elAttr(o,"aria-hidden")){p=elData(o,"id");break}null===p?(elAttr(f,"aria-hidden","true"),elData(f,"close-on-click","false"),window.removeEventListener("keyup",b),document.documentElement.classList.remove("pageOverlayActive")):(i=m.get(p),elData(f,"close-on-click",i.backdropCloseOnClick?"true":"false")),"desktop"!==a.platform()&&u.scrollEnable()},getDialog:function(e){if("object"==typeof e){var t=g.get(e);void 0!==t&&(e=t.id)}return m.get(e)},_ajaxSetup:function(){return{}}}}),define("WoltLabSuite/Core/Ajax/Status",["Language"],function(e){"use strict";var t=0,i=null,n=null,a={_init:function(){var t,n;i=elCreate("div"),i.classList.add("spinner"),t=elCreate("span"),t.className="icon icon48 fa-spinner",i.appendChild(t),n=elCreate("span"),n.textContent=e.get("wcf.global.loading"),i.appendChild(n),document.body.appendChild(i)},show:function(){null===i&&this._init(),t++,null===n&&(n=window.setTimeout(function(){t&&i.classList.add("active"),n=null},250))},hide:function(){t--,0===t&&(null!==n&&window.clearTimeout(n),i.classList.remove("active"))}};return a}),define("WoltLabSuite/Core/Ajax/Request",["Core","Language","Dom/ChangeListener","Dom/Util","Ui/Dialog","WoltLabSuite/Core/Ajax/Status"],function(e,t,i,n,a,o){"use strict";function r(e){this._data=null,this._options={},this._previousXhr=null,this._xhr=null,this._init(e)}var s=!1,l=!1;return r.prototype={_init:function(t){this._options=e.extend({data:{},contentType:"application/x-www-form-urlencoded; charset=UTF-8",responseType:"application/json",type:"POST",url:"",withCredentials:!1,autoAbort:!1,ignoreError:!1,pinData:!1,silent:!1,failure:null,finalize:null,success:null,progress:null,uploadProgress:null,callbackObject:null},t),"object"==typeof t.callbackObject&&(this._options.callbackObject=t.callbackObject),this._options.url=e.convertLegacyUrl(this._options.url),0===this._options.url.indexOf("index.php")&&(this._options.url=WSC_API_URL+this._options.url),0===this._options.url.indexOf(WSC_API_URL)&&(this._options.withCredentials=!0),this._options.pinData&&(this._data=e.extend({},this._options.data)),null!==this._options.callbackObject&&("function"==typeof this._options.callbackObject._ajaxFailure&&(this._options.failure=this._options.callbackObject._ajaxFailure.bind(this._options.callbackObject)),"function"==typeof this._options.callbackObject._ajaxFinalize&&(this._options.finalize=this._options.callbackObject._ajaxFinalize.bind(this._options.callbackObject)),"function"==typeof this._options.callbackObject._ajaxSuccess&&(this._options.success=this._options.callbackObject._ajaxSuccess.bind(this._options.callbackObject)),"function"==typeof this._options.callbackObject._ajaxProgress&&(this._options.progress=this._options.callbackObject._ajaxProgress.bind(this._options.callbackObject)),"function"==typeof this._options.callbackObject._ajaxUploadProgress&&(this._options.uploadProgress=this._options.callbackObject._ajaxUploadProgress.bind(this._options.callbackObject))),s===!1&&(s=!0,window.addEventListener("beforeunload",function(){l=!0}))},sendRequest:function(t){var i,n,a;(t===!0||this._options.autoAbort)&&this.abortPrevious(),this._options.silent||o.show(),this._xhr instanceof XMLHttpRequest&&(this._previousXhr=this._xhr),this._xhr=new XMLHttpRequest,this._xhr.open(this._options.type,this._options.url,!0),this._options.contentType&&this._xhr.setRequestHeader("Content-Type",this._options.contentType),this._xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),this._options.withCredentials&&(this._xhr.withCredentials=!0),i=this,n=e.clone(this._options),this._xhr.onload=function(){this.readyState===XMLHttpRequest.DONE&&(this.status>=200&&this.status<300||304===this.status?n.responseType&&0!==this.getResponseHeader("Content-Type").indexOf(n.responseType)?i._failure(this,n):i._success(this,n):i._failure(this,n))},this._xhr.onerror=function(){i._failure(this,n)},this._options.progress&&(this._xhr.onprogress=this._options.progress),this._options.uploadProgress&&(this._xhr.upload.onprogress=this._options.uploadProgress),"POST"===this._options.type?(a=this._options.data,"object"==typeof a&&"FormData"!==e.getType(a)&&(a=e.serialize(a)),this._xhr.send(a)):this._xhr.send()},abortPrevious:function(){null!==this._previousXhr&&(this._previousXhr.abort(),this._previousXhr=null,this._options.silent||o.hide())},setOption:function(e,t){this._options[e]=t},getOption:function(e){return objOwns(this._options,e)?this._options[e]:null},setData:function(t){null!==this._data&&"FormData"!==e.getType(t)&&(t=e.extend(this._data,t)),this._options.data=t},_success:function(e,t){if(t.silent||o.hide(),"function"==typeof t.success){var i=null;if("application/json"===e.getResponseHeader("Content-Type")){try{i=JSON.parse(e.responseText)}catch(i){return void this._failure(e,t)}i&&i.returnValues&&void 0!==i.returnValues.template&&(i.returnValues.template=i.returnValues.template.trim())}t.success(i,e.responseText,e,t.data)}this._finalize(t)},_failure:function(e,i){var r,s,c,d,u;if(!l){i.silent||o.hide(),r=null;try{r=JSON.parse(e.responseText)}catch(e){}if(s=!0,"function"==typeof i.failure&&(s=i.failure(r||{},e.responseText||"",e,i.data)),i.ignoreError!==!0&&s!==!1){if(c="",d="",null!==r?(r.stacktrace?c="<br><p>Stacktrace:</p><p>"+r.stacktrace+"</p>":r.exceptionID&&(c="<br><p>Exception ID: <code>"+r.exceptionID+"</code></p>"),d=r.message,r.previous.forEach(function(e){c+="<hr><p>"+e.message+"</p>",c+="<br><p>Stacktrace</p><p>"+e.stacktrace+"</p>"})):d=e.responseText,!d||"undefined"===d)return;u='<div class="ajaxDebugMessage"><p>'+d+"</p>"+c+"</div>",void 0===a&&(a=require("Ui/Dialog")),a.openStatic(n.getUniqueId(),u,{title:t.get("wcf.global.error.title")})}this._finalize(i)}},_finalize:function(e){var t,n,a,o,r;for("function"==typeof e.finalize&&e.finalize(this._xhr),this._previousXhr=null,i.trigger(),t=elBySelAll('a[href*="#"]'),n=0,a=t.length;n<a;n++)o=t[n],r=elAttr(o,"href"),r.indexOf("AJAXProxy")===-1&&r.indexOf("ajax-proxy")===-1||(r=r.substr(r.indexOf("#")),elAttr(o,"href",document.location.toString().replace(/#.*/,"")+r))}},r}),define("WoltLabSuite/Core/Ajax",["AjaxRequest","Core","ObjectMap"],function(e,t,i){"use strict";var n=new i,a={api:function(t,i,a,o){var r,s,l,c;if("object"!=typeof i&&(i={}),r=n.get(t),void 0===r){if("function"!=typeof t._ajaxSetup)throw new TypeError("Callback object must implement at least _ajaxSetup().");s=t._ajaxSetup(),s.pinData=!0,s.callbackObject=t,s.url||(s.url="index.php?ajax-proxy/&t="+SECURITY_TOKEN,s.withCredentials=!0),r=new e(s),n.set(t,r)}return l=null,c=null,"function"==typeof a&&(l=r.getOption("success"),r.setOption("success",a)),"function"==typeof o&&(c=r.getOption("failure"),r.setOption("failure",o)),r.setData(i),r.sendRequest(),null!==l&&r.setOption("success",l),null!==c&&r.setOption("failure",c),r},apiOnce:function(t){void 0===e&&(e=require("AjaxRequest")),t.pinData=!1,t.callbackObject=null,t.url||(t.url="index.php?ajax-proxy/&t="+SECURITY_TOKEN,t.withCredentials=!0);var i=new e(t);i.sendRequest()}};return a}),function(){var e=function(e){"use strict";function t(e){if(e.paused||e.ended||_)return!1;try{u.clearRect(0,0,c,l),u.drawImage(e,0,0,c,l)}catch(e){}w=setTimeout(t,N.duration,e),k.setIcon(d)}function i(e){var t,i=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;return e=e.replace(i,function(e,t,i,n){return t+t+i+i+n+n}),t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),!!t&&{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}}function n(e,t){var i,n={};for(i in e)n[i]=e[i];for(i in t)n[i]=t[i];return n}function a(){return document.hidden||document.msHidden||document.webkitHidden||document.mozHidden}var o,r,s,l,c,d,u,h,p,f,m,g,_,b,v,w,y,C,E,L,S,x,D,I,T,k,N;return e=e?e:{},o={bgColor:"#d00",textColor:"#fff",fontFamily:"sans-serif",fontStyle:"bold",type:"circle",position:"down",animation:"slide",elementId:!1,dataUrl:!1},b={},b.ff="undefined"!=typeof InstallTrigger,b.chrome=!!window.chrome,b.opera=!!window.opera||navigator.userAgent.indexOf("Opera")>=0,b.ie=!1,b.safari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,b.supported=b.chrome||b.ff||b.opera,y=[],g=function(){},p=_=!1,C=function(){var t,a,p,f;if(r=n(o,e),r.bgColor=i(r.bgColor),r.textColor=i(r.textColor),r.position=r.position.toLowerCase(),r.animation=N.types[""+r.animation]?r.animation:o.animation,t=r.position.indexOf("up")>-1,a=r.position.indexOf("left")>-1,t||a)for(p=0;p<N.types[""+r.animation].length;p++)f=N.types[""+r.animation][p],t&&(f.y<.6?f.y=f.y-.4:f.y=f.y-2*f.y+(1-f.w)),a&&(f.x<.6?f.x=f.x-.4:f.x=f.x-2*f.x+(1-f.h)),N.types[""+r.animation][p]=f;r.type=L[""+r.type]?r.type:o.type,s=k.getIcon(),d=document.createElement("canvas"),h=document.createElement("img"),s.hasAttribute("href")?(h.setAttribute("src",s.getAttribute("href")),h.onload=function(){l=h.height>0?h.height:32,c=h.width>0?h.width:32,d.height=l,d.width=c,u=d.getContext("2d"),E.ready()}):(h.setAttribute("src",""),l=32,c=32,h.height=l,h.width=c,d.height=l,d.width=c,u=d.getContext("2d"),E.ready())},E={},E.ready=function(){p=!0,E.reset(),g()},E.reset=function(){p&&(y=[],f=!1,m=!1,u.clearRect(0,0,c,l),u.drawImage(h,0,0,c,l),k.setIcon(d),window.clearTimeout(v),window.clearTimeout(w))},E.start=function(){var e,t;p&&!m&&(e=function(){f=y[0],m=!1,y.length>0&&(y.shift(),E.start())},y.length>0&&(m=!0,t=function(){["type","animation","bgColor","textColor","fontFamily","fontStyle"].forEach(function(e){e in y[0].options&&(r[e]=y[0].options[e])}),N.run(y[0].options,function(){e()},!1)},f?N.run(f.options,function(){t()},!0):t()))},L={},S=function(e){return e.n="number"==typeof e.n?Math.abs(0|e.n):e.n,e.x=c*e.x,e.y=l*e.y,e.w=c*e.w,e.h=l*e.h,e.len=(""+e.n).length,e},L.circle=function(e){e=S(e);var t=!1;2===e.len?(e.x=e.x-.4*e.w,e.w=1.4*e.w,t=!0):e.len>=3&&(e.x=e.x-.65*e.w,e.w=1.65*e.w,t=!0),u.clearRect(0,0,c,l),u.drawImage(h,0,0,c,l),u.beginPath(),u.font=r.fontStyle+" "+Math.floor(e.h*(e.n>99?.85:1))+"px "+r.fontFamily,u.textAlign="center",t?(u.moveTo(e.x+e.w/2,e.y),u.lineTo(e.x+e.w-e.h/2,e.y),u.quadraticCurveTo(e.x+e.w,e.y,e.x+e.w,e.y+e.h/2),u.lineTo(e.x+e.w,e.y+e.h-e.h/2),u.quadraticCurveTo(e.x+e.w,e.y+e.h,e.x+e.w-e.h/2,e.y+e.h),u.lineTo(e.x+e.h/2,e.y+e.h),u.quadraticCurveTo(e.x,e.y+e.h,e.x,e.y+e.h-e.h/2),u.lineTo(e.x,e.y+e.h/2),u.quadraticCurveTo(e.x,e.y,e.x+e.h/2,e.y)):u.arc(e.x+e.w/2,e.y+e.h/2,e.h/2,0,2*Math.PI),u.fillStyle="rgba("+r.bgColor.r+","+r.bgColor.g+","+r.bgColor.b+","+e.o+")",u.fill(),u.closePath(),u.beginPath(),u.stroke(),u.fillStyle="rgba("+r.textColor.r+","+r.textColor.g+","+r.textColor.b+","+e.o+")","number"==typeof e.n&&e.n>999?u.fillText((e.n>9999?9:Math.floor(e.n/1e3))+"k+",Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.2*e.h)):u.fillText(e.n,Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.15*e.h)),u.closePath()},L.rectangle=function(e){e=S(e);var t=!1;2===e.len?(e.x=e.x-.4*e.w,e.w=1.4*e.w,t=!0):e.len>=3&&(e.x=e.x-.65*e.w,e.w=1.65*e.w,t=!0),u.clearRect(0,0,c,l),u.drawImage(h,0,0,c,l),u.beginPath(),u.font=r.fontStyle+" "+Math.floor(e.h*(e.n>99?.9:1))+"px "+r.fontFamily,u.textAlign="center",u.fillStyle="rgba("+r.bgColor.r+","+r.bgColor.g+","+r.bgColor.b+","+e.o+")",u.fillRect(e.x,e.y,e.w,e.h),u.fillStyle="rgba("+r.textColor.r+","+r.textColor.g+","+r.textColor.b+","+e.o+")","number"==typeof e.n&&e.n>999?u.fillText((e.n>9999?9:Math.floor(e.n/1e3))+"k+",Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.2*e.h)):u.fillText(e.n,Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.15*e.h)),u.closePath()},x=function(e,t){t=("string"==typeof t?{animation:t}:t)||{},g=function(){try{if("number"==typeof e?e>0:""!==e){var n={type:"badge",options:{n:e}};if("animation"in t&&N.types[""+t.animation]&&(n.options.animation=""+t.animation),"type"in t&&L[""+t.type]&&(n.options.type=""+t.type),["bgColor","textColor"].forEach(function(e){e in t&&(n.options[e]=i(t[e]))}),["fontStyle","fontFamily"].forEach(function(e){e in t&&(n.options[e]=t[e])}),y.push(n),y.length>100)throw"Too many badges requests in queue.";E.start()}else E.reset()}catch(e){throw"Error setting badge. Message: "+e.message}},p&&g()},D=function(e){g=function(){var t,i,n,a;try{t=e.width,i=e.height,n=document.createElement("img"),a=t/c<i/l?t/c:i/l,n.setAttribute("src",e.getAttribute("src")),n.height=i/a,n.width=t/a,u.clearRect(0,0,c,l),u.drawImage(n,0,0,c,l),k.setIcon(d)}catch(e){throw"Error setting image. Message: "+e.message}},p&&g()},I=function(e){g=function(){try{if("stop"===e)return _=!0,E.reset(),void(_=!1);e.addEventListener("play",function(){t(this)},!1)}catch(e){throw"Error setting video. Message: "+e.message}},p&&g()},T=function(e){if(window.URL&&window.URL.createObjectURL||(window.URL=window.URL||{},window.URL.createObjectURL=function(e){return e}),b.supported){var i=!1;navigator.getUserMedia=navigator.getUserMedia||navigator.oGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.webkitGetUserMedia,g=function(){try{if("stop"===e)return _=!0,E.reset(),void(_=!1);i=document.createElement("video"),i.width=c,i.height=l,navigator.getUserMedia({video:!0,audio:!1},function(e){i.src=URL.createObjectURL(e),i.play(),t(i)},function(){})}catch(e){throw"Error setting webcam. Message: "+e.message}},p&&g()}},k={},k.getIcon=function(){var e=!1,t=function(){var e,t,i=document.getElementsByTagName("head")[0].getElementsByTagName("link");for(e=i.length,t=e-1;t>=0;t--)if(/(^|\s)icon(\s|$)/i.test(i[t].getAttribute("rel")))return i[t];return!1};return r.element?e=r.element:r.elementId?(e=document.getElementById(r.elementId),e.setAttribute("href",e.getAttribute("src"))):(e=t(),e===!1&&(e=document.createElement("link"),e.setAttribute("rel","icon"),document.getElementsByTagName("head")[0].appendChild(e))),e.setAttribute("type","image/png"),e},k.setIcon=function(e){var t,i=e.toDataURL("image/png");r.dataUrl&&r.dataUrl(i),r.element?r.element.setAttribute("src",i):r.elementId?document.getElementById(r.elementId).setAttribute("src",i):b.ff||b.opera?(t=s,s=document.createElement("link"),b.opera&&s.setAttribute("rel","icon"),s.setAttribute("rel","icon"),s.setAttribute("type","image/png"),document.getElementsByTagName("head")[0].appendChild(s),s.setAttribute("href",i),t.parentNode&&t.parentNode.removeChild(t)):s.setAttribute("href",i)},N={},N.duration=40,N.types={},N.types.fade=[{x:.4,y:.4,w:.6,h:.6,o:0},{x:.4,y:.4,w:.6,h:.6,o:.1},{x:.4,y:.4,w:.6,h:.6,o:.2},{x:.4,y:.4,w:.6,h:.6,o:.3},{x:.4,y:.4,w:.6,h:.6,o:.4},{x:.4,y:.4,w:.6,h:.6,o:.5},{x:.4,y:.4,w:.6,h:.6,o:.6},{x:.4,y:.4,w:.6,h:.6,o:.7},{x:.4,y:.4,w:.6,h:.6,o:.8},{x:.4,y:.4,w:.6,h:.6,o:.9},{x:.4,y:.4,w:.6,h:.6,o:1}],N.types.none=[{x:.4,y:.4,w:.6,h:.6,o:1}],N.types.pop=[{x:1,y:1,w:0,h:0,o:1},{x:.9,y:.9,w:.1,h:.1,o:1},{x:.8,y:.8,w:.2,h:.2,o:1},{x:.7,y:.7,w:.3,h:.3,o:1},{x:.6,y:.6,w:.4,h:.4,o:1},{x:.5,y:.5,w:.5,h:.5,o:1},{x:.4,y:.4,w:.6,h:.6,o:1}],N.types.popFade=[{x:.75,y:.75,w:0,h:0,o:0},{x:.65,y:.65,w:.1,h:.1,o:.2},{x:.6,y:.6,w:.2,h:.2,o:.4},{x:.55,y:.55,w:.3,h:.3,o:.6},{x:.5,y:.5,w:.4,h:.4,o:.8},{x:.45,y:.45,w:.5,h:.5,o:.9},{x:.4,y:.4,w:.6,h:.6,o:1}],N.types.slide=[{x:.4,y:1,w:.6,h:.6,o:1},{x:.4,y:.9,w:.6,h:.6,o:1},{x:.4,y:.9,w:.6,h:.6,o:1},{x:.4,y:.8,w:.6,h:.6,o:1},{x:.4,y:.7,w:.6,h:.6,o:1},{x:.4,y:.6,w:.6,h:.6,o:1},{x:.4,y:.5,w:.6,h:.6,o:1},{x:.4,y:.4,w:.6,h:.6,o:1}],N.run=function(e,t,i,o){var s=N.types[a()?"none":r.animation];return o=i===!0?"undefined"!=typeof o?o:s.length-1:"undefined"!=typeof o?o:0,t=t?t:function(){},o<s.length&&o>=0?(L[r.type](n(e,s[o])),v=setTimeout(function(){i?o-=1:o+=1,N.run(e,t,i,o)},N.duration),k.setIcon(d),void 0):void t()},C(),{badge:x,video:I,image:D,webcam:T,reset:E.reset,browser:{supported:b.supported}}};"undefined"!=typeof define&&define.amd?define("favico",[],function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:this.Favico=e}(),function e(t,i,n){function a(o,s){var l,c,d;if(!i[o]){if(!t[o]){if(l="function"==typeof require&&require,!s&&l)return l(o,!0);if(r)return r(o,!0);throw c=new Error("Cannot find module '"+o+"'"),c.code="MODULE_NOT_FOUND",c}d=i[o]={exports:{}},t[o][0].call(d.exports,function(e){var i=t[o][1][e];return a(i?i:e)},d,d.exports,e,t,i,n)}return i[o].exports}var o,r="function"==typeof require&&require;for(o=0;o<n.length;o++)a(n[o]);return a}({1:[function(e,t,i){"use strict";var n=e("../main");"function"==typeof define&&define.amd?define("perfect-scrollbar",n):(window.PerfectScrollbar=n,"undefined"==typeof window.Ps&&(window.Ps=n))},{"../main":7}],2:[function(e,t,i){"use strict";function n(e,t){var i=e.className.split(" ");i.indexOf(t)<0&&i.push(t),e.className=i.join(" ")}function a(e,t){var i=e.className.split(" "),n=i.indexOf(t);n>=0&&i.splice(n,1),e.className=i.join(" ")}i.add=function(e,t){e.classList?e.classList.add(t):n(e,t)},i.remove=function(e,t){e.classList?e.classList.remove(t):a(e,t)},i.list=function(e){return e.classList?e.classList:e.className.split(" ")}},{}],3:[function(e,t,i){"use strict";function n(e,t){return window.getComputedStyle(e)[t]}function a(e,t,i){return"number"==typeof i&&(i=i.toString()+"px"),e.style[t]=i,e}function o(e,t){var i,n;for(i in t)n=t[i],"number"==typeof n&&(n=n.toString()+"px"),e.style[i]=n;return e}i.e=function(e,t){var i=document.createElement(e);return i.className=t,i},i.appendTo=function(e,t){return t.appendChild(e),e},i.css=function(e,t,i){return"object"==typeof t?o(e,t):"undefined"==typeof i?n(e,t):a(e,t,i)},i.matches=function(e,t){return"undefined"!=typeof e.matches?e.matches(t):"undefined"!=typeof e.matchesSelector?e.matchesSelector(t):"undefined"!=typeof e.webkitMatchesSelector?e.webkitMatchesSelector(t):"undefined"!=typeof e.mozMatchesSelector?e.mozMatchesSelector(t):"undefined"!=typeof e.msMatchesSelector?e.msMatchesSelector(t):void 0},i.remove=function(e){"undefined"!=typeof e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)}},{}],4:[function(e,t,i){"use strict";var n,a=function(e){this.element=e,this.events={}};a.prototype.bind=function(e,t){"undefined"==typeof this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this.element.addEventListener(e,t,!1)},a.prototype.unbind=function(e,t){var i="undefined"!=typeof t;this.events[e]=this.events[e].filter(function(n){return!(!i||n===t)||(this.element.removeEventListener(e,n,!1),!1)},this)},a.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)},n=function(){this.eventElements=[]},n.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return"undefined"==typeof t&&(t=new a(e),this.eventElements.push(t)),t},n.prototype.bind=function(e,t,i){this.eventElement(e).bind(t,i)},n.prototype.unbind=function(e,t,i){this.eventElement(e).unbind(t,i)},n.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},n.prototype.once=function(e,t,i){var n=this.eventElement(e),a=function(e){n.unbind(t,a),i(e)};n.bind(t,a)},t.exports=n},{}],5:[function(e,t,i){"use strict";t.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},{}],6:[function(e,t,i){"use strict";var n=e("./class"),a=e("./dom");i.toInt=function(e){return"string"==typeof e?parseInt(e,10):~~e},i.clone=function(e){var t,i;if(null===e)return null;if("object"==typeof e){t={};for(i in e)t[i]=this.clone(e[i]);return t}return e},i.extend=function(e,t){var i,n=this.clone(e);for(i in t)n[i]=this.clone(t[i]);return n},i.isEditable=function(e){return a.matches(e,"input,[contenteditable]")||a.matches(e,"select,[contenteditable]")||a.matches(e,"textarea,[contenteditable]")||a.matches(e,"button,[contenteditable]")},i.removePsClasses=function(e){var t,i,a=n.list(e);for(t=0;t<a.length;t++)i=a[t],0===i.indexOf("ps-")&&n.remove(e,i)},i.outerWidth=function(e){return this.toInt(a.css(e,"width"))+this.toInt(a.css(e,"paddingLeft"))+this.toInt(a.css(e,"paddingRight"))+this.toInt(a.css(e,"borderLeftWidth"))+this.toInt(a.css(e,"borderRightWidth"))},i.startScrolling=function(e,t){n.add(e,"ps-in-scrolling"),"undefined"!=typeof t?n.add(e,"ps-"+t):(n.add(e,"ps-x"),n.add(e,"ps-y"))},i.stopScrolling=function(e,t){n.remove(e,"ps-in-scrolling"),"undefined"!=typeof t?n.remove(e,"ps-"+t):(n.remove(e,"ps-x"),n.remove(e,"ps-y"))},i.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":2,"./dom":3}],7:[function(e,t,i){"use strict";var n=e("./plugin/destroy"),a=e("./plugin/initialize"),o=e("./plugin/update");t.exports={initialize:a,update:o,destroy:n}},{"./plugin/destroy":9,"./plugin/initialize":17,"./plugin/update":20}],8:[function(e,t,i){"use strict";t.exports={wheelSpeed:1,wheelPropagation:!1,swipePropagation:!0,minScrollbarLength:null,maxScrollbarLength:null,useBothWheelAxes:!1,useKeyboard:!0,suppressScrollX:!1,suppressScrollY:!1,scrollXMarginOffset:0,scrollYMarginOffset:0}},{}],9:[function(e,t,i){"use strict";var n=e("../lib/dom"),a=e("../lib/helper"),o=e("./instances");t.exports=function(e){var t=o.get(e);t.event.unbindAll(),n.remove(t.scrollbarX),n.remove(t.scrollbarY),n.remove(t.scrollbarXRail),n.remove(t.scrollbarYRail),a.removePsClasses(e),o.remove(e)}},{"../lib/dom":3,"../lib/helper":6,"./instances":18}],10:[function(e,t,i){"use strict";function n(e,t){function i(e){return e.getBoundingClientRect()}var n=window.Event.prototype.stopPropagation.bind;t.event.bind(t.scrollbarY,"click",n),t.event.bind(t.scrollbarYRail,"click",function(n){var o=a.toInt(t.scrollbarYHeight/2),s=n.pageY-i(t.scrollbarYRail).top-o,l=t.containerHeight-t.scrollbarYHeight,c=s/l;c<0?c=0:c>1&&(c=1),e.scrollTop=(t.contentHeight-t.containerHeight)*c,r(e)}),t.event.bind(t.scrollbarX,"click",n),t.event.bind(t.scrollbarXRail,"click",function(n){var o,s,l=a.toInt(t.scrollbarXWidth/2),c=n.pageX-i(t.scrollbarXRail).left-l;
console.log(n.pageX,t.scrollbarXRail.offsetLeft),o=t.containerWidth-t.scrollbarXWidth,s=c/o,s<0?s=0:s>1&&(s=1),e.scrollLeft=(t.contentWidth-t.containerWidth)*s,r(e)})}var a=e("../../lib/helper"),o=e("../instances"),r=e("../update-geometry");t.exports=function(e){var t=o.get(e);n(e,t)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19}],11:[function(e,t,i){"use strict";function n(e,t){function i(i){var a,o=n+i,s=t.containerWidth-t.scrollbarXWidth;o<0?t.scrollbarXLeft=0:o>s?t.scrollbarXLeft=s:t.scrollbarXLeft=o,a=r.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.scrollbarXWidth)),e.scrollLeft=a}var n=null,a=null,s=function(t){i(t.pageX-a),l(e),t.stopPropagation(),t.preventDefault()},c=function(){r.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",s)};t.event.bind(t.scrollbarX,"mousedown",function(i){a=i.pageX,n=r.toInt(o.css(t.scrollbarX,"left")),r.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",s),t.event.once(t.ownerDocument,"mouseup",c),i.stopPropagation(),i.preventDefault()})}function a(e,t){function i(i){var a,o=n+i,s=t.containerHeight-t.scrollbarYHeight;o<0?t.scrollbarYTop=0:o>s?t.scrollbarYTop=s:t.scrollbarYTop=o,a=r.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.scrollbarYHeight)),e.scrollTop=a}var n=null,a=null,s=function(t){i(t.pageY-a),l(e),t.stopPropagation(),t.preventDefault()},c=function(){r.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",s)};t.event.bind(t.scrollbarY,"mousedown",function(i){a=i.pageY,n=r.toInt(o.css(t.scrollbarY,"top")),r.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",s),t.event.once(t.ownerDocument,"mouseup",c),i.stopPropagation(),i.preventDefault()})}var o=e("../../lib/dom"),r=e("../../lib/helper"),s=e("../instances"),l=e("../update-geometry");t.exports=function(e){var t=s.get(e);n(e,t),a(e,t)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19}],12:[function(e,t,i){"use strict";function n(e,t){function i(i,n){var a,o=e.scrollTop;if(0===i){if(!t.scrollbarYActive)return!1;if(0===o&&n>0||o>=t.contentHeight-t.containerHeight&&n<0)return!t.settings.wheelPropagation}if(a=e.scrollLeft,0===n){if(!t.scrollbarXActive)return!1;if(0===a&&i<0||a>=t.contentWidth-t.containerWidth&&i>0)return!t.settings.wheelPropagation}return!0}var n,o=!1;t.event.bind(e,"mouseenter",function(){o=!0}),t.event.bind(e,"mouseleave",function(){o=!1}),n=!1,t.event.bind(t.ownerDocument,"keydown",function(s){var l,c,d;if((!s.isDefaultPrevented||!s.isDefaultPrevented())&&o){if(l=document.activeElement?document.activeElement:t.ownerDocument.activeElement){for(;l.shadowRoot;)l=l.shadowRoot.activeElement;if(a.isEditable(l))return}switch(c=0,d=0,s.which){case 37:c=-30;break;case 38:d=30;break;case 39:c=30;break;case 40:d=-30;break;case 33:d=90;break;case 32:case 34:d=-90;break;case 35:d=s.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:d=s.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}e.scrollTop=e.scrollTop-d,e.scrollLeft=e.scrollLeft+c,r(e),n=i(c,d),n&&s.preventDefault()}})}var a=e("../../lib/helper"),o=e("../instances"),r=e("../update-geometry");t.exports=function(e){var t=o.get(e);n(e,t)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19}],13:[function(e,t,i){"use strict";function n(e,t){function i(i,n){var a,o=e.scrollTop;if(0===i){if(!t.scrollbarYActive)return!1;if(0===o&&n>0||o>=t.contentHeight-t.containerHeight&&n<0)return!t.settings.wheelPropagation}if(a=e.scrollLeft,0===n){if(!t.scrollbarXActive)return!1;if(0===a&&i<0||a>=t.contentWidth-t.containerWidth&&i>0)return!t.settings.wheelPropagation}return!0}function n(e){var t=e.deltaX,i=-1*e.deltaY;return"undefined"!=typeof t&&"undefined"!=typeof i||(t=-1*e.wheelDeltaX/6,i=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,i*=10),t!==t&&i!==i&&(t=0,i=e.wheelDelta),[t,i]}function o(t,i){var n,a,o=e.querySelector("textarea:hover");if(o){if(n=o.scrollHeight-o.clientHeight,n>0&&!(0===o.scrollTop&&i>0||o.scrollTop===n&&i<0))return!0;if(a=o.scrollLeft-o.clientWidth,a>0&&!(0===o.scrollLeft&&t<0||o.scrollLeft===a&&t>0))return!0}return!1}function s(s){var c,d,u;!a.env.isWebKit&&e.querySelector("select:focus")||(c=n(s),d=c[0],u=c[1],o(d,u)||(l=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(u?e.scrollTop=e.scrollTop-u*t.settings.wheelSpeed:e.scrollTop=e.scrollTop+d*t.settings.wheelSpeed,l=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(d?e.scrollLeft=e.scrollLeft+d*t.settings.wheelSpeed:e.scrollLeft=e.scrollLeft-u*t.settings.wheelSpeed,l=!0):(e.scrollTop=e.scrollTop-u*t.settings.wheelSpeed,e.scrollLeft=e.scrollLeft+d*t.settings.wheelSpeed),r(e),l=l||i(d,u),l&&(s.stopPropagation(),s.preventDefault())))}var l=!1;"undefined"!=typeof window.onwheel?t.event.bind(e,"wheel",s):"undefined"!=typeof window.onmousewheel&&t.event.bind(e,"mousewheel",s)}var a=e("../../lib/helper"),o=e("../instances"),r=e("../update-geometry");t.exports=function(e){var t=o.get(e);n(e,t)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19}],14:[function(e,t,i){"use strict";function n(e,t){t.event.bind(e,"scroll",function(){o(e)})}var a=e("../instances"),o=e("../update-geometry");t.exports=function(e){var t=a.get(e);n(e,t)}},{"../instances":18,"../update-geometry":19}],15:[function(e,t,i){"use strict";function n(e,t){function i(){var e=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===e.toString().length?null:e.getRangeAt(0).commonAncestorContainer}function n(){l||(l=setInterval(function(){return o.get(e)?(e.scrollTop=e.scrollTop+c.top,e.scrollLeft=e.scrollLeft+c.left,void r(e)):void clearInterval(l)},50))}function s(){l&&(clearInterval(l),l=null),a.stopScrolling(e)}var l=null,c={top:0,left:0},d=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){e.contains(i())?d=!0:(d=!1,s())}),t.event.bind(window,"mouseup",function(){d&&(d=!1,s())}),t.event.bind(window,"mousemove",function(t){var i,o;d&&(i={x:t.pageX,y:t.pageY},o={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight},i.x<o.left+3?(c.left=-5,a.startScrolling(e,"x")):i.x>o.right-3?(c.left=5,a.startScrolling(e,"x")):c.left=0,i.y<o.top+3?(o.top+3-i.y<5?c.top=-5:c.top=-20,a.startScrolling(e,"y")):i.y>o.bottom-3?(i.y-o.bottom+3<5?c.top=5:c.top=20,a.startScrolling(e,"y")):c.top=0,0===c.top&&0===c.left?s():n())})}var a=e("../../lib/helper"),o=e("../instances"),r=e("../update-geometry");t.exports=function(e){var t=o.get(e);n(e,t)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19}],16:[function(e,t,i){"use strict";function n(e,t,i,n){function r(i,n){var a=e.scrollTop,o=e.scrollLeft,r=Math.abs(i),s=Math.abs(n);if(s>r){if(n<0&&a===t.contentHeight-t.containerHeight||n>0&&0===a)return!t.settings.swipePropagation}else if(r>s&&(i<0&&o===t.contentWidth-t.containerWidth||i>0&&0===o))return!t.settings.swipePropagation;return!0}function s(t,i){e.scrollTop=e.scrollTop-i,e.scrollLeft=e.scrollLeft-t,o(e)}function l(){v=!0}function c(){v=!1}function d(e){return e.targetTouches?e.targetTouches[0]:e}function u(e){return!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function h(e){if(u(e)){w=!0;var t=d(e);m.pageX=t.pageX,m.pageY=t.pageY,g=(new Date).getTime(),null!==b&&clearInterval(b),e.stopPropagation()}}function p(e){var t,i,n,a,o,l;!v&&w&&u(e)&&(t=d(e),i={pageX:t.pageX,pageY:t.pageY},n=i.pageX-m.pageX,a=i.pageY-m.pageY,s(n,a),m=i,o=(new Date).getTime(),l=o-g,l>0&&(_.x=n/l,_.y=a/l,g=o),r(n,a)&&(e.stopPropagation(),e.preventDefault()))}function f(){!v&&w&&(w=!1,clearInterval(b),b=setInterval(function(){return a.get(e)?Math.abs(_.x)<.01&&Math.abs(_.y)<.01?void clearInterval(b):(s(30*_.x,30*_.y),_.x*=.8,void(_.y*=.8)):void clearInterval(b)},10))}var m={},g=0,_={},b=null,v=!1,w=!1;i&&(t.event.bind(window,"touchstart",l),t.event.bind(window,"touchend",c),t.event.bind(e,"touchstart",h),t.event.bind(e,"touchmove",p),t.event.bind(e,"touchend",f)),n&&(window.PointerEvent?(t.event.bind(window,"pointerdown",l),t.event.bind(window,"pointerup",c),t.event.bind(e,"pointerdown",h),t.event.bind(e,"pointermove",p),t.event.bind(e,"pointerup",f)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",l),t.event.bind(window,"MSPointerUp",c),t.event.bind(e,"MSPointerDown",h),t.event.bind(e,"MSPointerMove",p),t.event.bind(e,"MSPointerUp",f)))}var a=e("../instances"),o=e("../update-geometry");t.exports=function(e,t,i){var o=a.get(e);n(e,o,t,i)}},{"../instances":18,"../update-geometry":19}],17:[function(e,t,i){"use strict";var n=e("../lib/class"),a=e("../lib/helper"),o=e("./instances"),r=e("./update-geometry"),s=e("./handler/click-rail"),l=e("./handler/drag-scrollbar"),c=e("./handler/keyboard"),d=e("./handler/mouse-wheel"),u=e("./handler/native-scroll"),h=e("./handler/selection"),p=e("./handler/touch");t.exports=function(e,t){t="object"==typeof t?t:{},n.add(e,"ps-container");var i=o.add(e);i.settings=a.extend(i.settings,t),s(e),l(e),d(e),u(e),h(e),(a.env.supportsTouch||a.env.supportsIePointer)&&p(e,a.env.supportsTouch,a.env.supportsIePointer),i.settings.useKeyboard&&c(e),r(e)}},{"../lib/class":2,"../lib/helper":6,"./handler/click-rail":10,"./handler/drag-scrollbar":11,"./handler/keyboard":12,"./handler/mouse-wheel":13,"./handler/native-scroll":14,"./handler/selection":15,"./handler/touch":16,"./instances":18,"./update-geometry":19}],18:[function(e,t,i){"use strict";function n(e){var t=this;t.settings=u.clone(l),t.containerWidth=null,t.containerHeight=null,t.contentWidth=null,t.contentHeight=null,t.isRtl="rtl"===s.css(e,"direction"),t.event=new c,t.ownerDocument=e.ownerDocument||document,t.scrollbarXRail=s.appendTo(s.e("div","ps-scrollbar-x-rail"),e),t.scrollbarX=s.appendTo(s.e("div","ps-scrollbar-x"),t.scrollbarXRail),t.scrollbarXActive=null,t.scrollbarXWidth=null,t.scrollbarXLeft=null,t.scrollbarXBottom=u.toInt(s.css(t.scrollbarXRail,"bottom")),t.isScrollbarXUsingBottom=t.scrollbarXBottom===t.scrollbarXBottom,t.scrollbarXTop=t.isScrollbarXUsingBottom?null:u.toInt(s.css(t.scrollbarXRail,"top")),t.railBorderXWidth=u.toInt(s.css(t.scrollbarXRail,"borderLeftWidth"))+u.toInt(s.css(t.scrollbarXRail,"borderRightWidth")),t.railXMarginWidth=u.toInt(s.css(t.scrollbarXRail,"marginLeft"))+u.toInt(s.css(t.scrollbarXRail,"marginRight")),t.railXWidth=null,t.scrollbarYRail=s.appendTo(s.e("div","ps-scrollbar-y-rail"),e),t.scrollbarY=s.appendTo(s.e("div","ps-scrollbar-y"),t.scrollbarYRail),t.scrollbarYActive=null,t.scrollbarYHeight=null,t.scrollbarYTop=null,t.scrollbarYRight=u.toInt(s.css(t.scrollbarYRail,"right")),t.isScrollbarYUsingRight=t.scrollbarYRight===t.scrollbarYRight,t.scrollbarYLeft=t.isScrollbarYUsingRight?null:u.toInt(s.css(t.scrollbarYRail,"left")),t.scrollbarYOuterWidth=t.isRtl?u.outerWidth(t.scrollbarY):null,t.railBorderYWidth=u.toInt(s.css(t.scrollbarYRail,"borderTopWidth"))+u.toInt(s.css(t.scrollbarYRail,"borderBottomWidth")),t.railYMarginHeight=u.toInt(s.css(t.scrollbarYRail,"marginTop"))+u.toInt(s.css(t.scrollbarYRail,"marginBottom")),t.railYHeight=null}function a(e){return"undefined"==typeof e.dataset?e.getAttribute("data-ps-id"):e.dataset.psId}function o(e,t){"undefined"==typeof e.dataset?e.setAttribute("data-ps-id",t):e.dataset.psId=t}function r(e){"undefined"==typeof e.dataset?e.removeAttribute("data-ps-id"):delete e.dataset.psId}var s=e("../lib/dom"),l=e("./default-setting"),c=e("../lib/event-manager"),d=e("../lib/guid"),u=e("../lib/helper"),h={};i.add=function(e){var t=d();return o(e,t),h[t]=new n(e),h[t]},i.remove=function(e){delete h[a(e)],r(e)},i.get=function(e){return h[a(e)]}},{"../lib/dom":3,"../lib/event-manager":4,"../lib/guid":5,"../lib/helper":6,"./default-setting":8}],19:[function(e,t,i){"use strict";function n(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function a(e,t){var i,n={width:t.railXWidth};t.isRtl?n.left=e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-e.scrollTop:n.top=t.scrollbarXTop+e.scrollTop,r.css(t.scrollbarXRail,n),i={top:e.scrollTop,height:t.railYHeight},t.isScrollbarYUsingRight?t.isRtl?i.right=t.contentWidth-e.scrollLeft-t.scrollbarYRight-t.scrollbarYOuterWidth:i.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?i.left=e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:i.left=t.scrollbarYLeft+e.scrollLeft,r.css(t.scrollbarYRail,i),r.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),r.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}var o=e("../lib/class"),r=e("../lib/dom"),s=e("../lib/helper"),l=e("./instances");t.exports=function(e){var t=l.get(e);t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight,e.contains(t.scrollbarXRail)||r.appendTo(t.scrollbarXRail,e),e.contains(t.scrollbarYRail)||r.appendTo(t.scrollbarYRail,e),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.scrollbarXWidth=n(t,s.toInt(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=s.toInt(e.scrollLeft*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):(t.scrollbarXActive=!1,t.scrollbarXWidth=0,t.scrollbarXLeft=0,e.scrollLeft=0),!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.scrollbarYHeight=n(t,s.toInt(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=s.toInt(e.scrollTop*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):(t.scrollbarYActive=!1,t.scrollbarYHeight=0,t.scrollbarYTop=0,e.scrollTop=0),t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),a(e,t),o[t.scrollbarXActive?"add":"remove"](e,"ps-active-x"),o[t.scrollbarYActive?"add":"remove"](e,"ps-active-y")}},{"../lib/class":2,"../lib/dom":3,"../lib/helper":6,"./instances":18}],20:[function(e,t,i){"use strict";var n=e("../lib/dom"),a=e("./instances"),o=e("./update-geometry");t.exports=function(e){var t=a.get(e);n.css(t.scrollbarXRail,"display","none"),n.css(t.scrollbarYRail,"display","none"),o(e),n.css(t.scrollbarXRail,"display","block"),n.css(t.scrollbarYRail,"display","block")}},{"../lib/dom":3,"./instances":18,"./update-geometry":19}]},{},[1]),define("WoltLabSuite/Core/Date/Util",["Language"],function(e){"use strict";var t={formatDate:function(t){return this.format(t,e.get("wcf.date.dateFormat"))},formatTime:function(t){return this.format(t,e.get("wcf.date.timeFormat"))},formatDateTime:function(t){return this.format(t,e.get("wcf.date.dateTimeFormat").replace(/%date%/,e.get("wcf.date.dateFormat")).replace(/%time%/,e.get("wcf.date.timeFormat")))},format:function(t,i){var n,a,o,r,s="";for("c"===i&&(i="Y-m-dTH:i:sP"),a=0,o=i.length;a<o;a++){switch(i[a]){case"s":n=("0"+t.getSeconds().toString()).slice(-2);break;case"i":n=t.getMinutes(),n<10&&(n="0"+n);break;case"a":n=t.getHours()>11?"pm":"am";break;case"g":n=t.getHours(),0===n?n=12:n>12&&(n-=12);break;case"h":n=t.getHours(),0===n?n=12:n>12&&(n-=12),n=("0"+n.toString()).slice(-2);break;case"A":n=t.getHours()>11?"PM":"AM";break;case"G":n=t.getHours();break;case"H":n=t.getHours(),n=("0"+n.toString()).slice(-2);break;case"d":n=t.getDate(),n=("0"+n.toString()).slice(-2);break;case"j":n=t.getDate();break;case"l":n=e.get("__days")[t.getDay()];break;case"D":n=e.get("__daysShort")[t.getDay()];break;case"S":n="";break;case"m":n=t.getMonth()+1,n=("0"+n.toString()).slice(-2);break;case"n":n=t.getMonth()+1;break;case"F":n=e.get("__months")[t.getMonth()];break;case"M":n=e.get("__monthsShort")[t.getMonth()];break;case"y":n=t.getYear().toString().replace(/^\d{2}/,"");break;case"Y":n=t.getFullYear();break;case"P":r=t.getTimezoneOffset(),n=r>0?"-":"+",r=Math.abs(r),n+=("0"+(~~(r/60)).toString()).slice(-2),n+=":",n+=("0"+(r%60).toString()).slice(-2);break;case"r":n=t.toString();break;case"U":n=Math.round(t.getTime()/1e3);break;case"\\":n="",a+1<o&&(n=i[++a]);break;default:n=i[a]}s+=n}return s},gmdate:function(e){return e instanceof Date||(e=new Date),Math.round(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDay(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())/1e3)},getTimezoneDate:function(e,t){var i=new Date(e),n=6e4*i.getTimezoneOffset();return new Date(e+n+t)}};return t}),define("WoltLabSuite/Core/Timer/Repeating",[],function(){"use strict";function e(e,t){if("function"!=typeof e)throw new TypeError("Expected a valid callback as first argument.");if(t<0||t>864e5)throw new RangeError("Invalid delta "+t+". Delta must be in the interval [0, 86400000].");this._callback=e.bind(void 0,this),this._delta=t,this._timer=void 0,this.restart()}return e.prototype={restart:function(){this.stop(),this._timer=setInterval(this._callback,this._delta)},stop:function(){void 0!==this._timer&&(clearInterval(this._timer),this._timer=void 0)},setDelta:function(e){this._delta=e,this.restart()}},e}),define("WoltLabSuite/Core/Date/Time/Relative",["Dom/ChangeListener","Language","WoltLabSuite/Core/Date/Util","WoltLabSuite/Core/Timer/Repeating"],function(e,t,i,n){"use strict";var a=elByTag("time"),o=null;return{setup:function(){this._refresh(),new n(this._refresh.bind(this),6e4),e.add("WoltLabSuite/Core/Date/Time/Relative",this._refresh.bind(this))},_refresh:function(){var e,n,r,s,l,c,d,u,h,p,f,m,g,_,b=new Date,v=(b.getTime()-b.getMilliseconds())/1e3;for(null===o&&(o=v-TIME_NOW),e=0,n=a.length;e<n;e++)r=a[e],r.classList.contains("datetime")&&!elData(r,"is-future-date")&&(s=~~elData(r,"timestamp")+o,l=elData(r,"date"),c=elData(r,"time"),d=elData(r,"offset"),elAttr(r,"title")||elAttr(r,"title",t.get("wcf.date.dateTimeFormat").replace(/%date%/,l).replace(/%time%/,c)),s>=v||v<s+60?r.textContent=t.get("wcf.date.relative.now"):v<s+3540?(u=Math.max(Math.round((v-s)/60),1),r.textContent=t.get("wcf.date.relative.minutes",{minutes:u})):v<s+86400?(h=Math.round((v-s)/3600),r.textContent=t.get("wcf.date.relative.hours",{hours:h})):v<s+518400?(p=new Date(b.getFullYear(),b.getMonth(),b.getDate()),f=Math.ceil((p/1e3-s)/86400),m=i.getTimezoneDate(1e3*s,1e3*d),g=m.getDay(),_=t.get("__days")[g],r.textContent=t.get("wcf.date.relative.pastDays",{days:f,day:_,time:c})):r.textContent=t.get("wcf.date.shortDateTimeFormat").replace(/%date%/,l).replace(/%time%/,c))}}}),define("WoltLabSuite/Core/Event/Handler",["Core","Dictionary"],function(e,t){"use strict";var i=new t;return{add:function(n,a,o){var r,s,l;if("function"!=typeof o)throw new TypeError("[WoltLabSuite/Core/Event/Handler] Expected a valid callback for '"+a+"@"+n+"'.");return r=i.get(n),void 0===r&&(r=new t,i.set(n,r)),s=r.get(a),void 0===s&&(s=new t,r.set(a,s)),l=e.getUuid(),s.set(l,o),l},fire:function(e,t,n){var a,o;n=n||{},a=i.get(e),void 0!==a&&(o=a.get(t),void 0!==o&&o.forEach(function(e){e(n)}))},remove:function(e,t,n){var a,o=i.get(e);void 0!==o&&(a=o.get(t),void 0!==a&&a.delete(n))},removeAll:function(e,t){"string"!=typeof t&&(t=void 0);var n=i.get(e);void 0!==n&&("undefined"==typeof t?i.delete(e):n.delete(t))},removeAllBySuffix:function(e,t){var n,a=i.get(e);void 0!==a&&(t="_"+t,n=t.length*-1,a.forEach(function(i,a){a.substr(n)===t&&this.removeAll(e,a)}.bind(this)))}}}),define("WoltLabSuite/Core/List",[],function(){"use strict";function e(){this._set=t?new Set:[]}var t=objOwns(window,"Set")&&"function"==typeof window.Set;return e.prototype={add:function(e){t?this._set.add(e):this.has(e)||this._set.push(e)},clear:function(){t?this._set.clear():this._set=[]},delete:function(e){if(t)return this._set.delete(e);var i=this._set.indexOf(e);return i!==-1&&(this._set.splice(i,1),!0)},forEach:function(e){if(t)this._set.forEach(e);else for(var i=0,n=this._set.length;i<n;i++)e(this._set[i])},has:function(e){return t?this._set.has(e):this._set.indexOf(e)!==-1}},Object.defineProperty(e.prototype,"size",{enumerable:!1,configurable:!0,get:function(){return t?this._set.size:this._set.length}}),e}),define("WoltLabSuite/Core/Ui/Page/Menu/Abstract",["Core","Environment","EventHandler","Language","ObjectMap","Dom/Traverse","Dom/Util","Ui/Screen"],function(e,t,i,n,a,o,r,s){"use strict";function l(e,t,i){this.init(e,t,i)}var c=elById("pageContainer"),d="";return l.prototype={init:function(e,n,o){var s,l,c,d;"packageInstallationSetup"!==elData(document.body,"template")&&(this._activeList=[],this._depth=0,this._enabled=!0,this._eventIdentifier=e,this._items=new a,this._menu=elById(n),this._removeActiveList=!1,s=this.open.bind(this),this._button=elBySel(o),this._button.addEventListener(WCF_CLICK_EVENT,s),this._initItems(),this._initHeader(),i.add(this._eventIdentifier,"open",s),i.add(this._eventIdentifier,"close",this.close.bind(this)),i.add(this._eventIdentifier,"updateButtonState",this._updateButtonState.bind(this)),c=elByClass("menuOverlayItemList",this._menu),this._menu.addEventListener("animationend",function(){if(!this._menu.classList.contains("open"))for(var e=0,t=c.length;e<t;e++)l=c[e],l.classList.remove("active"),l.classList.remove("hidden")}.bind(this)),this._menu.children[0].addEventListener("transitionend",function(){if(this._menu.classList.add("allowScroll"),this._removeActiveList){this._removeActiveList=!1;var e=this._activeList.pop();e&&e.classList.remove("activeList")}}.bind(this)),d=elCreate("div"),d.className="menuOverlayMobileBackdrop",d.addEventListener(WCF_CLICK_EVENT,this.close.bind(this)),r.insertAfter(d,this._menu),this._updateButtonState(),"android"===t.platform()&&this._initializeAndroid())},open:function(e){return!!this._enabled&&(e instanceof Event&&e.preventDefault(),this._menu.classList.add("open"),this._menu.classList.add("allowScroll"),this._menu.children[0].classList.add("activeList"),s.scrollDisable(),c.classList.add("menuOverlay-"+this._menu.id),document.documentElement.classList.add("pageOverlayActive"),!0)},close:function(e){return e instanceof Event&&e.preventDefault(),!!this._menu.classList.contains("open")&&(this._menu.classList.remove("open"),s.scrollEnable(),c.classList.remove("menuOverlay-"+this._menu.id),document.documentElement.classList.remove("pageOverlayActive"),!0)},enable:function(){this._enabled=!0},disable:function(){this._enabled=!1,this.close(!0)},_initializeAndroid:function(){var t,i,n,a=20,o=5,r=20;switch(this._menu.id){case"pageUserMenuMobile":t="right";break;case"pageMainMenuMobile":t="left";break;default:return}i=this._menu.nextElementSibling,n=null,document.addEventListener("touchstart",function(i){var o,r,s,l,u=i.touches,h=this._menu.classList.contains("open");if("left"===t?(o=!h&&u[0].clientX<a,r=h&&Math.abs(this._menu.offsetWidth-u[0].clientX)<a):"right"===t&&(o=h&&Math.abs(document.body.clientWidth-this._menu.offsetWidth-u[0].clientX)<a,r=!h&&document.body.clientWidth-u[0].clientX<a),u.length>1)return void(d&&e.triggerEvent(document,"touchend"));if(!d&&(o||r)){if(document.documentElement.classList.contains("pageOverlayActive")){for(s=!1,l=0;l<c.classList.length;l++)c.classList[l]==="menuOverlay-"+this._menu.id&&(s=!0);if(!s)return}document.documentElement.classList.contains("redactorActive")||(n={x:u[0].clientX,y:u[0].clientY},o&&(d="left"),r&&(d="right"))}}.bind(this)),document.addEventListener("touchend",function(e){if(d&&null!==n){if(!this._menu.classList.contains("open"))return n=null,void(d="");var a;a=e?e.changedTouches[0].clientX:n.x,this._menu.classList.add("androidMenuTouchEnd"),this._menu.style.removeProperty("transform"),i.style.removeProperty(t),this._menu.addEventListener("transitionend",function(){this._menu.classList.remove("androidMenuTouchEnd")}.bind(this),{once:!0}),"left"===t?("left"===d&&a<n.x+100&&this.close(),"right"===d&&a<n.x-100&&this.close()):"right"===t&&("left"===d&&a>n.x+100&&this.close(),"right"===d&&a>n.x-100&&this.close()),n=null,d=""}}.bind(this)),document.addEventListener("touchmove",function(e){var a,s,l,c,u;d&&null!==n&&(a=e.touches,s=!1,l=!1,"left"===d&&(s=a[0].clientX>n.x+o),"right"===d&&(s=a[0].clientX<n.x-o),l=Math.abs(a[0].clientY-n.y)>r,c=this._menu.classList.contains("open"),c||!s||l||(this.open(),c=!0),c&&(u=a[0].clientX,"right"===t&&(u=document.body.clientWidth-u),u>this._menu.offsetWidth&&(u=this._menu.offsetWidth),u<0&&(u=0),this._menu.style.setProperty("transform","translateX("+("left"===t?1:-1)*(u-this._menu.offsetWidth)+"px)"),i.style.setProperty(t,Math.min(this._menu.offsetWidth,u)+"px")))}.bind(this))},_initItems:function(){elBySelAll(".menuOverlayItemLink",this._menu,this._initItem.bind(this))},_initItem:function(e){var t,n,a,r,s,l,c,d,u,h,p,f,m=e.parentNode,g=elData(m,"more");if(g)return void e.addEventListener(WCF_CLICK_EVENT,function(t){t.preventDefault(),t.stopPropagation(),i.fire(this._eventIdentifier,"more",{handler:this,identifier:g,item:e,parent:m})}.bind(this));if(t=e.nextElementSibling,null!==t)if("OL"!==t.nodeName&&t.classList.contains("menuOverlayItemLinkIcon"))for(n=elCreate("span"),n.className="menuOverlayItemWrapper",m.insertBefore(n,e),n.appendChild(e);n.nextElementSibling;)n.appendChild(n.nextElementSibling);else a="#"!==elAttr(e,"href"),r=m.parentNode,s=elData(t,"title"),this._items.set(e,{itemList:t,parentItemList:r}),""===s&&(s=o.childByClass(e,"menuOverlayItemTitle").textContent,elData(t,"title",s)),l=this._showItemList.bind(this,e),a?(n=elCreate("span"),n.className="menuOverlayItemWrapper",m.insertBefore(n,e),n.appendChild(e),c=elCreate("a"),elAttr(c,"href","#"),c.className="menuOverlayItemLinkIcon"+(e.classList.contains("active")?" active":""),c.innerHTML='<span class="icon icon24 fa-angle-right"></span>',c.addEventListener(WCF_CLICK_EVENT,l),n.appendChild(c)):(e.classList.add("menuOverlayItemLinkMore"),e.addEventListener(WCF_CLICK_EVENT,l)),d=elCreate("li"),d.className="menuOverlayHeader",n=elCreate("span"),n.className="menuOverlayItemWrapper",u=elCreate("a"),elAttr(u,"href","#"),u.className="menuOverlayItemLink menuOverlayBackLink",u.textContent=elData(r,"title"),u.addEventListener(WCF_CLICK_EVENT,this._hideItemList.bind(this,e)),h=elCreate("a"),elAttr(h,"href","#"),h.className="menuOverlayItemLinkIcon",h.innerHTML='<span class="icon icon24 fa-times"></span>',h.addEventListener(WCF_CLICK_EVENT,this.close.bind(this)),n.appendChild(u),n.appendChild(h),d.appendChild(n),t.insertBefore(d,t.firstElementChild),d.nextElementSibling.classList.contains("menuOverlayTitle")||(p=elCreate("li"),p.className="menuOverlayTitle",f=elCreate("span"),f.textContent=s,p.appendChild(f),t.insertBefore(p,d.nextElementSibling))},_initHeader:function(){var e,t,i,n,a,r=elCreate("li");r.className="menuOverlayHeader",e=elCreate("span"),e.className="menuOverlayItemWrapper",r.appendChild(e),t=elCreate("span"),t.className="menuOverlayLogoWrapper",e.appendChild(t),i=elCreate("span"),i.className="menuOverlayLogo",i.style.setProperty("background-image",'url("'+elData(this._menu,"page-logo")+'")',""),t.appendChild(i),n=elCreate("a"),elAttr(n,"href","#"),n.className="menuOverlayItemLinkIcon",n.innerHTML='<span class="icon icon24 fa-times"></span>',n.addEventListener(WCF_CLICK_EVENT,this.close.bind(this)),e.appendChild(n),a=o.childByClass(this._menu,"menuOverlayItemList"),a.insertBefore(r,a.firstElementChild)},_hideItemList:function(e,t){t instanceof Event&&t.preventDefault(),this._menu.classList.remove("allowScroll"),this._removeActiveList=!0;var i=this._items.get(e);i.parentItemList.classList.remove("hidden"),this._updateDepth(!1)},_showItemList:function(e,t){var n,a,o;return t instanceof Event&&t.preventDefault(),n=this._items.get(e),a=elData(n.itemList,"load"),a&&!elDataBool(e,"loaded")?(o=t.currentTarget.firstElementChild,o.classList.contains("fa-angle-right")&&(o.classList.remove("fa-angle-right"),o.classList.add("fa-spinner")),void i.fire(this._eventIdentifier,"load_"+a)):(this._menu.classList.remove("allowScroll"),n.itemList.classList.add("activeList"),n.parentItemList.classList.add("hidden"),this._activeList.push(n.itemList),void this._updateDepth(!0))},_updateDepth:function(e){this._depth+=e?1:-1;var t=this._depth*-100;"rtl"===n.get("wcf.global.pageDirection")&&(t*=-1),this._menu.children[0].style.setProperty("transform","translateX("+t+"%)","")},_updateButtonState:function(){var e=!1;elBySelAll(".badgeUpdate",this._menu,function(t){~~t.textContent>0&&(e=!0)}),this._button.classList[e?"add":"remove"]("pageMenuMobileButtonHasContent")}},l}),define("WoltLabSuite/Core/Ui/Page/Menu/Main",["Core","Dom/Traverse","./Abstract"],function(e,t,i){"use strict";function n(){this.init()}var a=null,o=null,r=null,s=null;return e.inherit(n,i,{init:function(){n._super.prototype.init.call(this,"com.woltlab.wcf.MainMenuMobile","pageMainMenuMobile","#pageHeader .mainMenu"),a=elById("pageMainMenuMobilePageOptionsContainer"),null!==a&&(r=t.childByClass(a,"menuOverlayItemList"),s=elBySel(".jsPageNavigationIcons"),elRemove(t.childByClass(r,"jsMenuOverlayItemPlaceholder")),r.addEventListener("click",function(e){e.target!==r&&null!==t.parentByClass(e.target,"menuOverlayItem",r)&&(this.close(),e.stopPropagation())}.bind(this)))},open:function(e){if(!n._super.prototype.open.call(this,e))return!1;if(null===a)return!0;if(o=s.childElementCount>0){for(var t,i;s.childElementCount;)t=s.children[0],t.classList.add("menuOverlayItem"),i=t.children[0],i.classList.add("menuOverlayItemLink"),i.classList.add("box24"),i.children[1].classList.remove("invisible"),i.children[1].classList.add("menuOverlayItemTitle"),r.appendChild(t);elShow(a)}else elHide(a);return!0},close:function(e){if(!n._super.prototype.close.call(this,e))return!1;if(o){elHide(a);for(var i,l,c=t.childByClass(r,"menuOverlayTitle");i=c.nextElementSibling;)i.classList.remove("menuOverlayItem"),l=i.children[0],l.classList.remove("menuOverlayItemLink"),l.classList.remove("box24"),l.children[1].classList.add("invisible"),l.children[1].classList.remove("menuOverlayItemTitle"),s.appendChild(i)}return!0}}),n}),define("WoltLabSuite/Core/Ui/Page/Menu/User",["Core","EventHandler","./Abstract"],function(e,t,i){"use strict";function n(){this.init()}return e.inherit(n,i,{init:function(){n._super.prototype.init.call(this,"com.woltlab.wcf.UserMenuMobile","pageUserMenuMobile","#pageHeader .userPanel"),t.add("com.woltlab.wcf.userMenu","updateBadge",function(e){elBySelAll(".menuOverlayItemBadge",this._menu,function(t){if(elData(t,"badge-identifier")===e.identifier){var i=elBySel(".badge",t);e.count?(null===i&&(i=elCreate("span"),i.className="badge badgeUpdate",t.appendChild(i)),i.textContent=e.count):null!==i&&elRemove(i),this._updateButtonState()}}.bind(this))}.bind(this))},close:function(e){var t=WCF.Dropdown.Interactive.Handler.getOpenDropdown();t?(e.preventDefault(),e.stopPropagation(),t.close()):n._super.prototype.close.call(this,e)}}),n}),define("WoltLabSuite/Core/Ui/Mobile",["Core","Environment","EventHandler","Language","List","Dom/ChangeListener","Dom/Traverse","Ui/CloseOverlay","Ui/Screen","./Page/Menu/Main","./Page/Menu/User"],function(e,t,i,n,a,o,r,s,l,c,d){"use strict";var u=elByClass("buttonGroupNavigation"),h=!1,p=new a,f=null,m=elByClass("message"),g={},_=null,b=null,v=null;return{setup:function(i){g=e.extend({enableMobileMenu:!0},i),f=elById("main"),t.touch()&&document.documentElement.classList.add("touch"),"desktop"!==t.platform()&&document.documentElement.classList.add("mobile");var n=elBySel(".messageGroupList");n&&(v=elByClass("messageGroup",n)),l.on("screen-md-down",{match:this.enable.bind(this),unmatch:this.disable.bind(this),setup:this._init.bind(this)}),l.on("screen-sm-down",{match:this.enableShadow.bind(this),unmatch:this.disableShadow.bind(this),setup:this.enableShadow.bind(this)})},enable:function(){h=!0,g.enableMobileMenu&&(_.enable(),b.enable())},enableShadow:function(){v&&this.rebuildShadow(v,".messageGroupLink");
},disable:function(){h=!1,g.enableMobileMenu&&(_.disable(),b.disable())},disableShadow:function(){v&&this.removeShadow(v)},_init:function(){h=!0,this._initSearchBar(),this._initButtonGroupNavigation(),this._initMessages(),this._initMobileMenu(),s.add("WoltLabSuite/Core/Ui/Mobile",this._closeAllMenus.bind(this)),o.add("WoltLabSuite/Core/Ui/Mobile",function(){this._initButtonGroupNavigation(),this._initMessages()}.bind(this))},_initSearchBar:function(){var e=elById("pageHeaderSearch"),n=elById("pageHeaderSearchInput"),a=null;i.add("com.woltlab.wcf.MainMenuMobile","more",function(i){"com.woltlab.wcf.search"===i.identifier&&(i.handler.close(!0),"ios"===t.platform()&&(a=document.body.scrollTop,l.scrollDisable()),e.style.setProperty("top",elById("pageHeader").offsetHeight+"px",""),e.classList.add("open"),n.focus(),"ios"===t.platform()&&(document.body.scrollTop=0))}),f.addEventListener(WCF_CLICK_EVENT,function(){e&&e.classList.remove("open"),"ios"===t.platform()&&null!==a&&(l.scrollEnable(),document.body.scrollTop=a,a=null)})},_initButtonGroupNavigation:function(){var e,t,i,n,a,o;for(e=0,t=u.length;e<t;e++)i=u[e],i.classList.contains("jsMobileButtonGroupNavigation")||(i.classList.add("jsMobileButtonGroupNavigation"),n=elBySel(".buttonList",i),0!==n.childElementCount&&(i.parentNode.classList.add("hasMobileNavigation"),a=elCreate("a"),a.className="dropdownLabel",o=elCreate("span"),o.className="icon icon24 fa-ellipsis-v",a.appendChild(o),function(e,t,i){t.addEventListener(WCF_CLICK_EVENT,function(t){t.preventDefault(),t.stopPropagation(),e.classList.toggle("open")}),i.addEventListener(WCF_CLICK_EVENT,function(t){t.stopPropagation(),e.classList.remove("open")})}(i,a,n),i.insertBefore(a,i.firstChild)))},_initMessages:function(){Array.prototype.forEach.call(m,function(e){var t,i;p.has(e)||(t=elBySel(".jsMobileNavigation",e),t&&(t.addEventListener(WCF_CLICK_EVENT,function(e){e.stopPropagation(),window.setTimeout(function(){t.classList.remove("open")},10)}),i=elBySel(".messageQuickOptions",e),i&&t.childElementCount&&(i.classList.add("active"),i.addEventListener(WCF_CLICK_EVENT,function(e){h&&"LABEL"!==e.target.nodeName&&(e.preventDefault(),e.stopPropagation(),t.classList.toggle("open"))}))),p.add(e))})},_initMobileMenu:function(){g.enableMobileMenu&&(_=new c,b=new d),elBySelAll(".boxMenu:not(.forceOpen)",null,function(e){e.addEventListener(WCF_CLICK_EVENT,function(t){t.stopPropagation(),t.target===e&&(t.preventDefault(),e.classList.add("open"))})})},_closeAllMenus:function(){elBySelAll(".jsMobileButtonGroupNavigation.open, .jsMobileNavigation.open, .boxMenu.open",null,function(e){e.classList.remove("open")})},rebuildShadow:function(e,t){var i,n,a,o,s;for(o=0,s=e.length;o<s;o++)i=e[o],n=i.parentNode,a=r.childByClass(n,"mobileLinkShadow"),null===a&&elBySel(t,i).href&&(a=elCreate("a"),a.className="mobileLinkShadow",a.href=elBySel(t,i).href,n.appendChild(a),n.classList.add("mobileLinkShadowContainer"))},removeShadow:function(e){var t,i,n,a,o;for(a=0,o=e.length;a<o;a++)t=e[a],i=t.parentNode,i.classList.contains("mobileLinkShadowContainer")&&(n=r.childByClass(i,"mobileLinkShadow"),null!==n&&elRemove(n),i.classList.remove("mobileLinkShadowContainer"))}}}),define("WoltLabSuite/Core/Ui/TabMenu/Simple",["Dictionary","EventHandler","Dom/Traverse","Dom/Util"],function(e,t,i,n){"use strict";function a(t){this._container=t,this._containers=new e,this._isLegacy=null,this._store=null,this._tabs=new e}return a.prototype={validate:function(){var e,t,a,o,r,s,l,c,d;if(!this._container.classList.contains("tabMenuContainer"))return!1;if(e=i.childByTag(this._container,"NAV"),null===e)return!1;if(t=elByTag("li",e),0===t.length)return!1;for(o=i.childrenByTag(this._container,"DIV"),s=0,l=o.length;s<l;s++)a=o[s],r=elData(a,"name"),r||(r=n.identify(a)),elData(a,"name",r),this._containers.set(r,a);for(c=this._container.id,s=0,l=t.length;s<l;s++)if(d=t[s],r=this._getTabName(d)){if(this._tabs.has(r))throw new Error("Tab names must be unique, li[data-name='"+r+"'] (tab menu id: '"+c+"') exists more than once.");if(a=this._containers.get(r),void 0===a)throw new Error("Expected content element for li[data-name='"+r+"'] (tab menu id: '"+c+"').");if(a.parentNode!==this._container)throw new Error("Expected content element '"+r+"' (tab menu id: '"+c+"') to be a direct children.");if(1!==d.childElementCount||"A"!==d.children[0].nodeName)throw new Error("Expected exactly one <a> as children for li[data-name='"+r+"'] (tab menu id: '"+c+"').");this._tabs.set(r,d)}if(!this._tabs.size)throw new Error("Expected at least one tab (tab menu id: '"+c+"').");return this._isLegacy&&(elData(this._container,"is-legacy",!0),this._tabs.forEach(function(e,t){elAttr(e,"aria-controls",t)})),!0},init:function(e){var t,i,n,o,r,s;return e=e||null,this._tabs.forEach(function(t){e&&e.get(elData(t,"name"))===t||t.children[0].addEventListener(WCF_CLICK_EVENT,this._onClick.bind(this))}.bind(this)),t=null,e||(i=a.getIdentifierFromHash(),n=null,""!==i&&(n=this._tabs.get(i),n&&this._container.parentNode.classList.contains("tabMenuContainer")&&(t=this._container)),n||(o=elData(this._container,"preselect")||elData(this._container,"active"),"true"!==o&&o||(o=!0),o===!0?this._tabs.forEach(function(e){n||e.previousElementSibling||(n=e)}):"false"!==o&&(n=this._tabs.get(o))),n&&(this._containers.forEach(function(e){e.classList.add("hidden")}),this.select(null,n,!0)),r=elData(this._container,"store"),r&&(s=elCreate("input"),s.type="hidden",s.name=r,s.value=elData(this.getActiveTab(),"name"),this._container.appendChild(s),this._store=s)),t},select:function(e,i,n){var o,r,s,l,c,d,u;if(i=i||this._tabs.get(e),!i&&(~~e==e&&(e=~~e,o=0,this._tabs.forEach(function(t){o===e&&(i=t),o++})),!i))throw new Error("Expected a valid tab name, '"+e+"' given (tab menu id: '"+this._container.id+"').");if(e=e||elData(i,"name"),r=this.getActiveTab(),s=null,r){if(l=elData(r,"name"),l===e)return;n||t.fire("com.woltlab.wcf.simpleTabMenu_"+this._container.id,"beforeSelect",{tab:r,tabName:l}),r.classList.remove("active"),s=this._containers.get(elData(r,"name")),s.classList.remove("active"),s.classList.add("hidden"),this._isLegacy&&(r.classList.remove("ui-state-active"),s.classList.remove("ui-state-active"))}i.classList.add("active"),c=this._containers.get(e),c.classList.add("active"),c.classList.remove("hidden"),this._isLegacy&&(i.classList.add("ui-state-active"),c.classList.add("ui-state-active")),this._store&&(this._store.value=e),n||(t.fire("com.woltlab.wcf.simpleTabMenu_"+this._container.id,"select",{active:i,activeName:e,previous:r,previousName:r?elData(r,"name"):null}),d=this._isLegacy&&"function"==typeof window.jQuery?window.jQuery:null,d&&d(this._container).trigger("wcftabsbeforeactivate",{newTab:d(i),oldTab:d(r),newPanel:d(c),oldPanel:d(s)}),u=window.location.href.replace(/#[^#]+$/,""),u+=a.getIdentifierFromHash()===e?window.location.hash:"#"+e,window.history.replaceState(void 0,void 0,u)),require(["WoltLabSuite/Core/Ui/TabMenu"],function(e){e.scrollToTab(i)})},rebuild:function(){var t=new e;t.merge(this._tabs),this.validate(),this.init(t)},hasTab:function(e){return this._tabs.has(e)},_onClick:function(e){e.preventDefault(),this.select(null,e.currentTarget.parentNode)},_getTabName:function(e){var t=elData(e,"name");return t||1===e.childElementCount&&"A"===e.children[0].nodeName&&e.children[0].href.match(/#([^#]+)$/)&&(t=RegExp.$1,null===elById(t)?t=null:(this._isLegacy=!0,elData(e,"name",t))),t},getActiveTab:function(){return elBySel("#"+this._container.id+" > nav > ul > li.active")},getContainers:function(){return this._containers},getTabs:function(){return this._tabs}},a.getIdentifierFromHash=function(){return window.location.hash.match(/^#([^\/]+)+(?:\/.+)?/)?RegExp.$1:""},a}),define("WoltLabSuite/Core/Ui/TabMenu",["Dictionary","EventHandler","Dom/ChangeListener","Dom/Util","Ui/CloseOverlay","Ui/Screen","./TabMenu/Simple"],function(e,t,i,n,a,o,r){"use strict";var s=null,l=!1,c=new e;return{setup:function(){this._init(),this._selectErroneousTabs(),i.add("WoltLabSuite/Core/Ui/TabMenu",this._init.bind(this)),a.add("WoltLabSuite/Core/Ui/TabMenu",function(){s&&(s.classList.remove("active"),s=null)}),o.on("screen-sm-down",{enable:this._scrollEnable.bind(this,!1),disable:this._scrollDisable.bind(this),setup:this._scrollEnable.bind(this,!0)}),window.addEventListener("hashchange",function(){var e=r.getIdentifierFromHash(),t=e?elById(e):null;null!==t&&t.classList.contains("tabMenuContent")&&c.forEach(function(t){t.hasTab(e)&&t.select(e)})});var e=r.getIdentifierFromHash();e&&window.setTimeout(function(){var t,i,a,o,r=elById(e);r&&r.classList.contains("tabMenuContent")&&(t=window.scrollY||window.pageYOffset,t>0&&(i=r.parentNode,a=i.offsetTop-50,a<0&&(a=0),t>a&&(o=n.offset(i).top,o<=50?o=0:o-=50,window.scrollTo(0,o))))},100)},_init:function(){var e,t,i,a,o,l,d,u=elBySelAll(".tabMenuContainer:not(.staticTabMenuContainer)");for(l=0,d=u.length;l<d;l++)e=u[l],t=n.identify(e),c.has(t)||(o=new r(e),o.validate()&&(a=o.init(),c.set(t,o),a instanceof Element&&(o=this.getTabMenu(a.parentNode.id),o.select(a.id,null,!0)),i=elBySel("#"+t+" > nav > ul"),function(e){e.addEventListener(WCF_CLICK_EVENT,function(t){t.preventDefault(),t.stopPropagation(),t.target===e?(e.classList.add("active"),s=e):(e.classList.remove("active"),s=null)})}(i),elBySelAll(".tabMenu, .menu",e,function(e){var t=this._rebuildMenuOverflow.bind(this,e),i=null;elBySel("ul",e).addEventListener("scroll",function(){null!==i&&window.clearTimeout(i),i=window.setTimeout(t,10)})}.bind(this))))},_selectErroneousTabs:function(){c.forEach(function(e){var t=!1;e.getContainers().forEach(function(i){!t&&elByClass("formError",i).length&&(t=!0,e.select(i.id))})})},getTabMenu:function(e){return c.get(e)},_scrollEnable:function(e){l=!0,c.forEach(function(t){var i=t.getActiveTab();e?this._rebuildMenuOverflow(i.closest(".menu, .tabMenu")):this.scrollToTab(i)}.bind(this))},_scrollDisable:function(){l=!1},scrollToTab:function(e){var t,i,n,a,o,r,s,c,d;if(l&&(t=e.closest("ul"),i=t.clientWidth,n=t.scrollLeft,a=t.scrollWidth,i!==a&&(o=e.offsetLeft,r=!1,o<n&&(r=!0),s=!1,r||(c=i-(o-n),d=e.clientWidth,null!==e.nextElementSibling&&(s=!0,d+=20),c<d&&(r=!0)),r))){if(s?o-=15:o>0&&(o-=15),o=o<0?0:Math.min(o,a-i),n===o)return;t.classList.add("enableAnimation"),n<o?t.firstElementChild.style.setProperty("margin-left",n-o+"px",""):t.style.setProperty("padding-left",n-o+"px",""),setTimeout(function(){t.classList.remove("enableAnimation"),t.firstElementChild.style.removeProperty("margin-left"),t.style.removeProperty("padding-left"),t.scrollLeft=o},300)}},_rebuildMenuOverflow:function(e){var t,i,n,a,o,r,s,c;l&&(t=e.clientWidth,i=elBySel("ul",e),n=i.scrollLeft,a=i.scrollWidth,o=n>0,r=elBySel(".tabMenuOverlayLeft",e),o?(null===r&&(r=elCreate("span"),r.className="tabMenuOverlayLeft icon icon24 fa-angle-left",e.insertBefore(r,e.firstChild)),r.classList.add("active")):null!==r&&r.classList.remove("active"),s=t+n<a,c=elBySel(".tabMenuOverlayRight",e),s?(null===c&&(c=elCreate("span"),c.className="tabMenuOverlayRight icon icon24 fa-angle-right",e.appendChild(c)),c.classList.add("active")):null!==c&&c.classList.remove("active"))}}}),define("WoltLabSuite/Core/Ui/FlexibleMenu",["Core","Dictionary","Dom/ChangeListener","Dom/Traverse","Dom/Util","Ui/SimpleDropdown"],function(e,t,i,n,a,o){"use strict";var r=new t,s=new t,l=new t,c=new t,d={setup:function(){null!==elById("mainMenu")&&this.register("mainMenu");var e=elBySel(".navigationHeader");null!==e&&this.register(a.identify(e)),window.addEventListener("resize",this.rebuildAll.bind(this)),i.add("WoltLabSuite/Core/Ui/FlexibleMenu",this.registerTabMenus.bind(this))},register:function(e){var t,i=elById(e);if(null===i)throw"Expected a valid element id, '"+e+"' does not exist.";if(!r.has(e)){if(t=n.childByTag(i,"UL"),null===t)throw"Expected an <ul> element as child of container '"+e+"'.";r.set(e,i),c.set(e,t),this.rebuild(e)}},registerTabMenus:function(){var e,t,i,o,r=elBySelAll(".tabMenuContainer:not(.jsFlexibleMenuEnabled), .messageTabMenu:not(.jsFlexibleMenuEnabled)");for(e=0,t=r.length;e<t;e++)i=r[e],o=n.childByTag(i,"NAV"),null!==o&&(i.classList.add("jsFlexibleMenuEnabled"),this.register(a.identify(o)))},rebuildAll:function(){r.forEach(function(e,t){this.rebuild(t)}.bind(this))},rebuild:function(t){var i,d,u,h,p,f,m,g,_,b,v,w,y,C,E,L=r.get(t);if(void 0===L)throw"Expected a valid element id, '"+t+"' is unknown.";if(i=window.getComputedStyle(L),d=L.parentNode.clientWidth,d-=a.styleAsInt(i,"margin-left"),d-=a.styleAsInt(i,"margin-right"),u=c.get(t),h=n.childrenByTag(u,"LI"),p=s.get(t),f=0,void 0!==p){for(m=0,g=h.length;m<g;m++)_=h[m],_.classList.contains("dropdown")||elShow(_);null!==p.parentNode&&(f=a.outerWidth(p))}if(b=u.scrollWidth-f,v=[],b>d)for(m=h.length-1;m>=0&&(_=h[m],_.classList.contains("dropdown")||_.classList.contains("active")||_.classList.contains("ui-state-active")||(v.push(_),elHide(_),!(u.scrollWidth<d)));m--);v.length?(void 0===p?(p=elCreate("li"),p.className="dropdown jsFlexibleMenuDropdown",y=elCreate("a"),y.className="icon icon16 fa-list",p.appendChild(y),w=elCreate("ul"),w.classList.add("dropdownMenu"),p.appendChild(w),s.set(t,p),l.set(t,w),o.init(y)):w=l.get(t),null===p.parentNode&&u.appendChild(p),C=document.createDocumentFragment(),E=this,v.forEach(function(i){var n=elCreate("li");n.innerHTML=i.innerHTML,n.addEventListener(WCF_CLICK_EVENT,function(n){n.preventDefault(),e.triggerEvent(elBySel("a",i),WCF_CLICK_EVENT),setTimeout(function(){E.rebuild(t)},59)}.bind(this)),C.appendChild(n)}),w.innerHTML="",w.appendChild(C)):void 0!==p&&null!==p.parentNode&&elRemove(p)}};return d}),define("WoltLabSuite/Core/Ui/Tooltip",["Environment","Dom/ChangeListener","Ui/Alignment"],function(e,t,i){"use strict";var n=null,a=null,o=null,r=null;return{setup:function(){"desktop"===e.platform()&&(r=elCreate("div"),elAttr(r,"id","balloonTooltip"),r.classList.add("balloonTooltip"),r.addEventListener("transitionend",function(){r.classList.contains("active")||(r.style.removeProperty("top"),r.style.removeProperty("left"))}),o=elCreate("span"),elAttr(o,"id","balloonTooltipText"),r.appendChild(o),a=elCreate("span"),a.classList.add("elementPointer"),a.appendChild(elCreate("span")),r.appendChild(a),document.body.appendChild(r),n=elByClass("jsTooltip"),this.init(),t.add("WoltLabSuite/Core/Ui/Tooltip",this.init.bind(this)),window.addEventListener("scroll",this._mouseLeave.bind(this)))},init:function(){for(var e,t;n.length;)e=n[0],e.classList.remove("jsTooltip"),t=elAttr(e,"title").trim(),t.length&&(elData(e,"tooltip",t),e.removeAttribute("title"),e.addEventListener("mouseenter",this._mouseEnter.bind(this)),e.addEventListener("mouseleave",this._mouseLeave.bind(this)),e.addEventListener(WCF_CLICK_EVENT,this._mouseLeave.bind(this)))},_mouseEnter:function(e){var t=e.currentTarget,n=elAttr(t,"title");return n="string"==typeof n?n.trim():"",""!==n&&(elData(t,"tooltip",n),t.removeAttribute("title")),n=elData(t,"tooltip"),r.style.removeProperty("top"),r.style.removeProperty("left"),n.length?(r.classList.add("active"),o.textContent=n,void i.set(r,t,{horizontal:"center",verticalOffset:4,pointer:!0,pointerClassNames:["inverse"],vertical:"top"})):void r.classList.remove("active")},_mouseLeave:function(){r.classList.remove("active")}}}),define("WoltLabSuite/Core/Date/Picker",["DateUtil","Language","ObjectMap","Dom/ChangeListener","Ui/Alignment","WoltLabSuite/Core/Ui/CloseOverlay"],function(e,t,i,n,a,o){"use strict";var r=!1,s=0,l=new i,c=null,d=0,u=0,h=[],p=null,f=null,m=null,g=null,_=null,b=null,v=null,w=null,y=null,C=null,E={init:function(){var t,i,n,a,o,r,s,c,d,u,h,p,f,m,g,_,b,v,w,y,E,L,S,x,D,I;for(this._setup(),t=elBySelAll('input[type="date"]:not(.inputDatePicker), input[type="datetime"]:not(.inputDatePicker)'),i=new Date,n=0,a=t.length;n<a;n++){if(o=t[n],o.classList.add("inputDatePicker"),o.readOnly=!0,r="datetime"===elAttr(o,"type"),s=r&&elDataBool(o,"time-only"),c=elDataBool(o,"disable-clear"),d=r&&elDataBool(o,"ignore-timezone"),u=o.classList.contains("birthday"),elData(o,"is-date-time",r),elData(o,"is-time-only",s),h=null,p=elAttr(o,"value"),elAttr(o,"value")&&(s?(h=new Date,f=p.split(":"),h.setHours(f[0],f[1])):((d||u)&&(m=new Date(p).getTimezoneOffset(),g=m>0?"-":"+",m=Math.abs(m),_=Math.floor(m/60).toString(),b=(m%60).toString(),g+=2===_.length?_:"0"+_,g+=":",g+=2===b.length?b:"0"+b,u?p+="T00:00:00"+g:p=p.replace(/[+-][0-9]{2}:[0-9]{2}$/,g)),h=new Date(p)),elData(o,"value",h.getTime()),v=s?"formatTime":"formatDate"+(r?"Time":""),p=e[v](h)),w=0===p.length,u?(elData(o,"min-date","120"),elData(o,"max-date",(new Date).getFullYear()+"-12-31")):(o.min&&elData(o,"min-date",o.min),o.max&&elData(o,"max-date",o.max)),this._initDateRange(o,i,!0),this._initDateRange(o,i,!1),elData(o,"min-date")===elData(o,"max-date"))throw new Error("Minimum and maximum date cannot be the same (element id '"+o.id+"').");for(o.type="text",o.value=p,elData(o,"empty",w),elData(o,"placeholder")&&elAttr(o,"placeholder",elData(o,"placeholder")),y=elCreate("input"),y.id=o.id+"DatePicker",y.name=o.name,y.type="hidden",null!==h&&(s?y.value=e.format(h,"H:i"):d?y.value=e.format(h,"Y-m-dTH:i:s"):y.value=e.format(h,r?"c":"Y-m-d")),o.parentNode.insertBefore(y,o),o.removeAttribute("name"),o.addEventListener(WCF_CLICK_EVENT,C),E=elCreate("div"),E.className="inputAddon",L=elCreate("a"),L.className="inputSuffix button",L.addEventListener(WCF_CLICK_EVENT,C),E.appendChild(L),S=elCreate("span"),S.className="icon icon16 fa-calendar",L.appendChild(S),o.parentNode.insertBefore(E,o),E.insertBefore(o,L),c||(L=elCreate("a"),L.className="inputSuffix button",L.addEventListener(WCF_CLICK_EVENT,this.clear.bind(this,o)),w&&L.style.setProperty("visibility","hidden",""),E.appendChild(L),S=elCreate("span"),S.className="icon icon16 fa-times",L.appendChild(S)),x=!1,D=["tiny","short","medium","long"],I=0;I<4;I++)o.classList.contains(D[I])&&(x=!0);x||o.classList.add("short"),l.set(o,{clearButton:L,shadow:y,disableClear:c,isDateTime:r,isEmpty:w,isTimeOnly:s,ignoreTimezone:d,onClose:null})}},_initDateRange:function(e,t,i){var n,a="data-"+(i?"min":"max")+"-date",o=e.hasAttribute(a)?elAttr(e,a).trim():"";if(o.match(/^(\d{4})-(\d{2})-(\d{2})$/))o=new Date(o).getTime();else if("now"===o)o=t.getTime();else if(o.match(/^\d{1,3}$/))n=new Date(t.getTime()),n.setFullYear(n.getFullYear()+~~o*(i?-1:1)),o=n.getTime();else if(o.match(/^datePicker-(.+)$/)){if(o=RegExp.$1,null===elById(o))throw new Error("Reference date picker identified by '"+o+"' does not exists (element id: '"+e.id+"').")}else o=/^\d{4}\-\d{2}\-\d{2}T/.test(o)?new Date(o).getTime():new Date(i?1970:2038,0,1).getTime();elAttr(e,a,o)},_setup:function(){r||(r=!0,s=~~t.get("wcf.date.firstDayOfTheWeek"),C=this._open.bind(this),n.add("WoltLabSuite/Core/Date/Picker",this.init.bind(this)),o.add("WoltLabSuite/Core/Date/Picker",this._close.bind(this)))},_open:function(e){var t,i,n,o;e.preventDefault(),e.stopPropagation(),this._createPicker(),t="INPUT"===e.currentTarget.nodeName?e.currentTarget:e.currentTarget.previousElementSibling,t!==c&&(c=t,i=l.get(c),o=elData(c,"value"),o?(n=new Date(+o),"Invalid Date"===n.toString()&&(n=new Date)):n=new Date,u=elData(c,"min-date"),u.match(/^datePicker-(.+)$/)&&(u=elData(elById(RegExp.$1),"value")),u=new Date(+u),d=elData(c,"max-date"),d.match(/^datePicker-(.+)$/)&&(d=elData(elById(RegExp.$1),"value")),d=new Date(+d),i.isDateTime?(f.value=n.getHours(),m.value=n.getMinutes(),y.classList.add("datePickerTime")):y.classList.remove("datePickerTime"),y.classList[i.isTimeOnly?"add":"remove"]("datePickerTimeOnly"),this._renderPicker(n.getDate(),n.getMonth(),n.getFullYear()),a.set(y,c))},_close:function(){if(null!==y&&y.classList.contains("active")){y.classList.remove("active");var e=l.get(c);"function"==typeof e.onClose&&e.onClose(),c=null,u=0,d=0}},_renderPicker:function(e,t,i){var n,a,o;for(this._renderGrid(e,t,i),n="",a=u.getFullYear(),o=d.getFullYear();a<=o;a++)n+='<option value="'+a+'">'+a+"</option>";w.innerHTML=n,w.value=i,g.value=t,y.classList.add("active")},_renderGrid:function(e,t,i){var n,a,o,r,l,c,f,m,C,E,L=void 0!==e,S=void 0!==t;if(e=~~e||~~elData(p,"day"),t=~~t,i=~~i,S||i){for(o=0!==i,r=document.createDocumentFragment(),r.appendChild(p),S||(t=~~elData(p,"month")),i=i||~~elData(p,"year"),l=new Date(i+"-"+("0"+(t+1).toString()).slice(-2)+"-"+("0"+e.toString()).slice(-2)),l<u?(i=u.getFullYear(),t=u.getMonth(),e=u.getDate(),g.value=t,w.value=i,o=!0):l>d&&(i=d.getFullYear(),t=d.getMonth(),e=d.getDate(),g.value=t,w.value=i,o=!0),l=new Date(i+"-"+("0"+(t+1).toString()).slice(-2)+"-01");l.getDay()!==s;)l.setDate(l.getDate()-1);for(elShow(h[35].parentNode),f=new Date(u.getFullYear(),u.getMonth(),u.getDate()),a=0;a<42;a++){if(35===a&&l.getMonth()!==t){elHide(h[35].parentNode);break}n=h[a],n.textContent=l.getDate(),c=l.getMonth()===t,c&&(l<f?c=!1:l>d&&(c=!1)),n.classList[c?"remove":"add"]("otherMonth"),l.setDate(l.getDate()+1)}if(elData(p,"month",t),elData(p,"year",i),y.insertBefore(r,v),!L&&(l=new Date(i,t,e),l.getDate()!==e)){for(;l.getMonth()!==t;)l.setDate(l.getDate()-1);e=l.getDate()}if(o){for(a=0;a<12;a++)m=g.children[a],m.disabled=i===u.getFullYear()&&m.value<u.getMonth()||i===d.getFullYear()&&m.value>d.getMonth();C=new Date(i+"-"+("0"+(t+1).toString()).slice(-2)+"-01"),C.setMonth(C.getMonth()+1),_.classList[C<d?"add":"remove"]("active"),E=new Date(i+"-"+("0"+(t+1).toString()).slice(-2)+"-01"),E.setDate(E.getDate()-1),b.classList[E>u?"add":"remove"]("active")}}if(e){for(a=0;a<35;a++)n=h[a],n.classList[n.classList.contains("otherMonth")||~~n.textContent!==e?"remove":"add"]("active");elData(p,"day",e)}this._formatValue()},_formatValue:function(){var t,i,n,a=l.get(c);"true"!==elData(c,"empty")&&(a.isDateTime?(t=new Date(elData(p,"year"),elData(p,"month"),elData(p,"day"),f.value,m.value),a.isTimeOnly?(i=e.formatTime(t),n=e.format(t,"H:i")):a.ignoreTimezone?(i=e.formatDateTime(t),n=e.format(t,"Y-m-dTH:i:s")):(i=e.formatDateTime(t),n=e.format(t,"c"))):(t=new Date(elData(p,"year"),elData(p,"month"),elData(p,"day")),i=e.formatDate(t),n=e.format(t,"Y-m-d")),c.value=i,elData(c,"value",t.getTime()),a.disableClear||a.clearButton.style.removeProperty("visibility"),a.shadow.value=n)},_createPicker:function(){var i,n,a,o,r,l,c,d,u,C,E,L,S,x,D,I;if(null===y){for(y=elCreate("div"),y.className="datePicker",y.addEventListener(WCF_CLICK_EVENT,function(e){e.stopPropagation()}),i=elCreate("header"),y.appendChild(i),b=elCreate("a"),b.className="previous",b.innerHTML='<span class="icon icon16 fa-arrow-left"></span>',b.addEventListener(WCF_CLICK_EVENT,this.previousMonth.bind(this)),i.appendChild(b),n=elCreate("span"),i.appendChild(n),g=elCreate("select"),g.className="month",g.addEventListener("change",this._changeMonth.bind(this)),n.appendChild(g),o="",r=t.get("__monthsShort"),a=0;a<12;a++)o+='<option value="'+a+'">'+r[a]+"</option>";for(g.innerHTML=o,w=elCreate("select"),w.className="year",w.addEventListener("change",this._changeYear.bind(this)),n.appendChild(w),_=elCreate("a"),_.className="next",_.innerHTML='<span class="icon icon16 fa-arrow-right"></span>',_.addEventListener(WCF_CLICK_EVENT,this.nextMonth.bind(this)),i.appendChild(_),p=elCreate("ul"),y.appendChild(p),l=elCreate("li"),l.className="weekdays",p.appendChild(l),d=t.get("__daysShort"),a=0;a<7;a++)u=a+s,u>6&&(u-=7),c=elCreate("span"),c.textContent=d[u],l.appendChild(c);for(C=this._click.bind(this),a=0;a<6;a++)for(L=elCreate("li"),p.appendChild(L),S=0;S<7;S++)E=elCreate("a"),E.addEventListener(WCF_CLICK_EVENT,C),h.push(E),L.appendChild(E);for(v=elCreate("footer"),y.appendChild(v),f=elCreate("select"),f.className="hour",f.addEventListener("change",this._formatValue.bind(this)),x="",D=new Date(2e3,0,1),I=t.get("wcf.date.timeFormat").replace(/:/,"").replace(/[isu]/g,""),a=0;a<24;a++)D.setHours(a),x+='<option value="'+a+'">'+e.format(D,I)+"</option>";for(f.innerHTML=x,v.appendChild(f),v.appendChild(document.createTextNode(" : ")),m=elCreate("select"),m.className="minute",m.addEventListener("change",this._formatValue.bind(this)),x="",a=0;a<60;a++)x+='<option value="'+a+'">'+(a<10?"0"+a.toString():a)+"</option>";m.innerHTML=x,v.appendChild(m),document.body.appendChild(y)}},previousMonth:function(){"0"===g.value?(g.value=11,w.value=~~w.value-1):g.value=~~g.value-1,this._renderGrid(void 0,g.value,w.value)},nextMonth:function(){"11"===g.value?(g.value=0,w.value=~~w.value+1):g.value=~~g.value+1,this._renderGrid(void 0,g.value,w.value)},_changeMonth:function(e){this._renderGrid(void 0,e.currentTarget.value)},_changeYear:function(e){this._renderGrid(void 0,void 0,e.currentTarget.value)},_click:function(e){e.currentTarget.classList.contains("otherMonth")||(elData(c,"empty",!1),this._renderGrid(e.currentTarget.textContent),this._close())},getDate:function(e){return e=this._getElement(e),e.hasAttribute("data-value")?new Date(+elData(e,"value")):null},setDate:function(t,i){var n,a;t=this._getElement(t),n=l.get(t),elData(t,"value",i.getTime()),t.value=e["formatDate"+(n.isDateTime?"Time":"")](i),a="",a=n.ignoreTimezone?"Y-m-dTH:i:s":n.isDateTime?"c":"Y-m-d",n.shadow.value=e.format(i,a)},getValue:function(e){e=this._getElement(e);var t=l.get(e);return t?t.shadow.value:""},clear:function(e){e=this._getElement(e);var t=l.get(e);e.removeAttribute("data-value"),e.value="",t.disableClear||t.clearButton.style.setProperty("visibility","hidden",""),t.isEmpty=!0,t.shadow.value=""},destroy:function(e){var t,i;e=this._getElement(e),t=l.get(e),i=e.parentNode,i.parentNode.insertBefore(e,i),elRemove(i),elAttr(e,"type","date"+(t.isDateTime?"time":"")),e.name=t.shadow.name,e.value=t.shadow.value,e.removeAttribute("data-value"),e.removeEventListener(WCF_CLICK_EVENT,C),elRemove(t.shadow),e.classList.remove("inputDatePicker"),e.readOnly=!1,l.delete(e)},setCloseCallback:function(e,t){e=this._getElement(e),l.get(e).onClose=t},_getElement:function(e){if("string"==typeof e&&(e=elById(e)),!(e instanceof Element&&e.classList.contains("inputDatePicker")&&l.has(e)))throw new Error("Expected a valid date picker input element or id.");return e}};return window.__wcf_bc_datePicker=E,E}),define("WoltLabSuite/Core/Ui/Page/Action",["Dictionary","Dom/Util"],function(e,t){"use strict";var i=new e,n=null,a=!1;return{setup:function(){a=!0,n=elCreate("ul"),n.className="pageAction",document.body.appendChild(n)},add:function(e,o,r){var s,l;a===!1&&this.setup(),s=elCreate("li"),o.classList.add("button"),o.classList.add("buttonPrimary"),s.appendChild(o),elAttr(s,"aria-hidden","toTop"===e?"true":"false"),elData(s,"name",e),"toTop"===e?(s.className="toTop initiallyHidden",n.appendChild(s)):(l=null,r&&(l=i.get(r),void 0!==l&&(l=l.parentNode)),null===l&&n.childElementCount&&(l=n.children[0]),null===l?t.prepend(s,n):n.insertBefore(s,l)),i.set(e,o),this._renderContainer()},has:function(e){return i.has(e)},get:function(e){return i.get(e)},remove:function(e){var t,a=i.get(e);void 0!==a&&(t=a.parentNode,t.addEventListener("animationend",function(){try{n.removeChild(t),i.delete(e)}catch(e){}}),this.hide(e))},hide:function(e){var t=i.get(e);t&&(elAttr(t.parentNode,"aria-hidden","true"),this._renderContainer())},show:function(e){var t=i.get(e);t&&(t.parentNode.classList.contains("initiallyHidden")&&t.parentNode.classList.remove("initiallyHidden"),elAttr(t.parentNode,"aria-hidden","false"),this._renderContainer())},_renderContainer:function(){var e,t,i=!1;if(n.childElementCount)for(e=0,t=n.childElementCount;e<t;e++)if("false"===elAttr(n.children[e],"aria-hidden")){i=!0;break}n.classList[i?"add":"remove"]("active")}}}),define("WoltLabSuite/Core/Ui/Page/JumpToTop",["Environment","Language","./Action"],function(e,t,i){"use strict";function n(){this.init()}return n.prototype={init:function(){if("desktop"===e.platform()){this._callbackScrollEnd=this._afterScroll.bind(this),this._timeoutScroll=null;var n=elCreate("a");n.className="jsTooltip",n.href="#",elAttr(n,"title",t.get("wcf.global.scrollUp")),n.innerHTML='<span class="icon icon32 fa-angle-up"></span>',n.addEventListener(WCF_CLICK_EVENT,this._jump.bind(this)),i.add("toTop",n),window.addEventListener("scroll",this._scroll.bind(this)),this._afterScroll()}},_jump:function(e){e.preventDefault(),elById("top").scrollIntoView({behavior:"smooth"})},_scroll:function(){null!==this._timeoutScroll&&window.clearTimeout(this._timeoutScroll),this._timeoutScroll=window.setTimeout(this._callbackScrollEnd,100)},_afterScroll:function(){this._timeoutScroll=null,i[window.pageYOffset>=300?"show":"hide"]("toTop")}},n}),define("WoltLabSuite/Core/Bootstrap",["favico","enquire","perfect-scrollbar","WoltLabSuite/Core/Date/Time/Relative","Ui/SimpleDropdown","WoltLabSuite/Core/Ui/Mobile","WoltLabSuite/Core/Ui/TabMenu","WoltLabSuite/Core/Ui/FlexibleMenu","Ui/Dialog","WoltLabSuite/Core/Ui/Tooltip","WoltLabSuite/Core/Language","WoltLabSuite/Core/Environment","WoltLabSuite/Core/Date/Picker","EventHandler","Core","WoltLabSuite/Core/Ui/Page/JumpToTop"],function(e,t,i,n,a,o,r,s,l,c,d,u,h,p,f,m){"use strict";return window.Favico=e,window.enquire=t,null==window.WCF&&(window.WCF={}),null==window.WCF.Language&&(window.WCF.Language={}),window.WCF.Language.get=d.get,window.WCF.Language.add=d.add,window.WCF.Language.addObject=d.addObject,window.__wcf_bc_eventHandler=p,{setup:function(e){var t,i,s,d;for(e=f.extend({enableMobileMenu:!0},e),u.setup(),n.setup(),h.init(),a.setup(),o.setup({enableMobileMenu:e.enableMobileMenu}),r.setup(),l.setup(),c.setup(),new m,t=elBySelAll("form[method=get]"),i=0,s=t.length;i<s;i++)t[i].setAttribute("method","post");"microsoft"===u.browser()&&(window.onbeforeunload=function(){}),d=0,d=window.setInterval(function(){"function"==typeof window.jQuery&&(window.clearInterval(d),window.jQuery.holdReady(!1))},20)}}}),define("WoltLabSuite/Core/Controller/Style/Changer",["Ajax","Language","Ui/Dialog"],function(e,t,i){"use strict";return{setup:function(){var e=elBySel(".jsButtonStyleChanger");e&&e.addEventListener(WCF_CLICK_EVENT,this.showDialog.bind(this))},showDialog:function(e){e.preventDefault(),i.open(this)},_dialogSetup:function(){return{id:"styleChanger",options:{disableContentPadding:!0,title:t.get("wcf.style.changeStyle")},source:{data:{actionName:"getStyleChooser",className:"wcf\\data\\style\\StyleAction"},after:function(e){var t,i,n,a=elBySelAll(".styleList > li",e);for(t=0,i=a.length;t<i;t++)n=a[t],n.classList.add("pointer"),n.addEventListener(WCF_CLICK_EVENT,this._click.bind(this))}.bind(this)}}},_click:function(t){t.preventDefault(),e.apiOnce({data:{actionName:"changeStyle",className:"wcf\\data\\style\\StyleAction",objectIDs:[elData(t.currentTarget,"style-id")]},success:function(){window.location.reload()}})}}}),define("WoltLabSuite/Core/Controller/Popover",["Ajax","Dictionary","Environment","Dom/ChangeListener","Dom/Util","Ui/Alignment"],function(e,t,i,n,a,o){"use strict";var r=null,s=new t,l=new t,c=new t,d=null,u=!1,h=null,p=null,f=null,m=null,g=null,_=null,b=null,v=null,w=0,y=1,C=2,E=500,L=800;return{_setup:function(){if(null===f){f=elCreate("div"),f.className="popover forceHide",m=elCreate("div"),m.className="popoverContent",f.appendChild(m);var e=elCreate("span");e.className="elementPointer",e.appendChild(elCreate("span")),f.appendChild(e),document.body.appendChild(f),g=this._hide.bind(this),b=this._mouseEnter.bind(this),v=this._mouseLeave.bind(this),f.addEventListener("mouseenter",this._popoverMouseEnter.bind(this)),f.addEventListener("mouseleave",v),f.addEventListener("animationend",this._clearContent.bind(this)),window.addEventListener("beforeunload",function(){u=!0,null!==h&&window.clearTimeout(h),this._hide(!0)}.bind(this)),n.add("WoltLabSuite/Core/Controller/Popover",this._init.bind(this))}},init:function(e){"desktop"===i.platform()&&(e.attributeName=e.attributeName||"data-object-id",e.legacy=e.legacy===!0,this._setup(),c.has(e.identifier)||(c.set(e.identifier,{attributeName:e.attributeName,elements:e.legacy?e.className:elByClass(e.className),legacy:e.legacy,loadCallback:e.loadCallback}),this._init(e.identifier)))},_init:function(e){"string"==typeof e&&e.length?this._initElements(c.get(e),e):c.forEach(this._initElements.bind(this));
},_initElements:function(e,t){var i,n,o,r,c,d,u=e.legacy?elBySelAll(e.elements):e.elements;for(i=0,n=u.length;i<n;i++){if(o=u[i],r=a.identify(o),s.has(r))return;if(null!==o.closest(".popover"))return void s.set(r,{content:null,state:w});c=e.legacy?r:~~o.getAttribute(e.attributeName),0!==c&&(o.addEventListener("mouseenter",b),o.addEventListener("mouseleave",v),"A"===o.nodeName&&elAttr(o,"href")&&o.addEventListener(WCF_CLICK_EVENT,g),d=t+"-"+c,elData(o,"cache-id",d),l.set(r,{element:o,identifier:t,objectId:c}),s.has(d)||s.set(t+"-"+c,{content:null,state:w}))}},setContent:function(e,t,i){var n,o,c=e+"-"+t,d=s.get(c);if(void 0===d)throw new Error("Unable to find element for object id '"+t+"' (identifier: '"+e+"').");n=a.createFragmentFromHtml(i),n.childElementCount||(n=a.createFragmentFromHtml("<p>"+i+"</p>")),d.content=n,d.state=C,r&&(o=l.get(r).element,elData(o,"cache-id")===c&&this._show())},_mouseEnter:function(e){if(!u){null!==h&&(window.clearTimeout(h),h=null);var t=a.identify(e.currentTarget);r===t&&null!==p&&(window.clearTimeout(p),p=null),d=t,h=window.setTimeout(function(){h=null,d===t&&this._show()}.bind(this),L)}},_mouseLeave:function(){d=null,null===p&&(null===_&&(_=this._hide.bind(this)),null!==p&&window.clearTimeout(p),p=window.setTimeout(_,E))},_popoverMouseEnter:function(){null!==p&&(window.clearTimeout(p),p=null)},_show:function(){var e,t,i;null!==p&&(window.clearTimeout(p),p=null),e=!1,f.classList.contains("active")?r!==d&&(this._hide(),e=!0):m.childElementCount&&(e=!0),e&&(f.classList.add("forceHide"),f.offsetTop,this._clearContent(),f.classList.remove("forceHide")),r=d,t=l.get(r),i=s.get(elData(t.element,"cache-id")),i.state===C?(m.appendChild(i.content),this._rebuild(r)):i.state===w&&(i.state=y,c.get(t.identifier).loadCallback(t.objectId,this))},_hide:function(){null!==p&&(window.clearTimeout(p),p=null),f.classList.remove("active")},_clearContent:function(){if(r&&m.childElementCount&&!f.classList.contains("active"))for(var e=s.get(elData(l.get(r).element,"cache-id"));m.childNodes.length;)e.content.appendChild(m.childNodes[0])},_rebuild:function(){f.classList.contains("active")||(f.classList.remove("forceHide"),f.classList.add("active"),o.set(f,l.get(r).element,{pointer:!0,vertical:"top"}))},_ajaxSetup:function(){return{silent:!0}},ajaxApi:function(t,i,n){if("function"!=typeof i)throw new TypeError("Expected a valid callback for parameter 'success'.");e.api(this,t,i,n)}}}),define("WoltLabSuite/Core/Ui/User/Ignore",["List","Dom/ChangeListener"],function(e,t){"use strict";var i,n,a;return i=elByClass("ignoredUserMessage"),n=null,a=new e,{init:function(){n=this._removeClass.bind(this),this._rebuild(),t.add("WoltLabSuite/Core/Ui/User/Ignore",this._rebuild.bind(this))},_rebuild:function(){var e,t,o;for(t=0,o=i.length;t<o;t++)e=i[t],a.has(e)||(e.addEventListener(WCF_CLICK_EVENT,n),a.add(e))},_removeClass:function(e){e.preventDefault();var t=e.currentTarget;t.classList.remove("ignoredUserMessage"),t.removeEventListener(WCF_CLICK_EVENT,n),a.delete(t),window.getSelection().removeAllRanges()}}}),define("WoltLabSuite/Core/Ui/Page/Header/Menu",["Ui/Screen"],function(e){"use strict";var t,i,n,a,o=!1,r=0,s=[],l=[];return{init:function(){if(a=elBySel(".mainMenu .boxMenu"),n=a&&a.childElementCount?a.children[0]:null,null===n)throw new Error("Unable to find the menu.");e.on("screen-lg",{enable:this._enable.bind(this),disable:this._disable.bind(this),setup:this._setup.bind(this)})},_enable:function(){o=!0,this._rebuildVisibility(),window.setTimeout(this._rebuildVisibility.bind(this),1e3)},_disable:function(){o=!1},_showNext:function(e){if(e.preventDefault(),l.length){var n=l.slice(0,3).pop();this._setMarginLeft(a.clientWidth-(n.offsetLeft+n.clientWidth)),a.lastElementChild===n&&t.classList.remove("active"),i.classList.add("active")}},_showPrevious:function(e){if(e.preventDefault(),s.length){var n=s.slice(-3)[0];this._setMarginLeft(n.offsetLeft*-1),a.firstElementChild===n&&i.classList.remove("active"),t.classList.add("active")}},_setMarginLeft:function(e){r=Math.min(r+e,0),n.style.setProperty("margin-left",r+"px","")},_rebuildVisibility:function(){var e,n,c,d,u;if(o){if(s=[],l=[],e=a.clientWidth,a.scrollWidth>e||r<0)for(c=0,d=a.childElementCount;c<d;c++)n=a.children[c],u=n.offsetLeft,u<0?s.push(n):u+n.clientWidth>e&&l.push(n);i.classList[s.length?"add":"remove"]("active"),t.classList[l.length?"add":"remove"]("active")}},_setup:function(){t=elCreate("a"),t.className="mainMenuShowNext",t.href="#",t.innerHTML='<span class="icon icon32 fa-angle-right"></span>',t.addEventListener(WCF_CLICK_EVENT,this._showNext.bind(this)),a.parentNode.appendChild(t),i=elCreate("a"),i.className="mainMenuShowPrevious",i.href="#",i.innerHTML='<span class="icon icon32 fa-angle-left"></span>',i.addEventListener(WCF_CLICK_EVENT,this._showPrevious.bind(this)),a.parentNode.insertBefore(i,a.parentNode.firstChild);var e=this._rebuildVisibility.bind(this);n.addEventListener("transitionend",e),window.addEventListener("resize",function(){n.style.setProperty("margin-left","0px",""),r=0,e()}),this._enable()}}}),define("WoltLabSuite/Core/BootstrapFrontend",["Ajax","WoltLabSuite/Core/Bootstrap","WoltLabSuite/Core/Controller/Style/Changer","WoltLabSuite/Core/Controller/Popover","WoltLabSuite/Core/Ui/User/Ignore","WoltLabSuite/Core/Ui/Page/Header/Menu"],function(e,t,i,n,a,o){"use strict";var r=0;return{setup:function(e){e.backgroundQueue.url=WSC_API_URL+e.backgroundQueue.url.substr(WCF_PATH.length),t.setup(),o.init(),e.styleChanger&&i.setup(),e.enableUserPopover&&this._initUserPopover(),this._invokeBackgroundQueue(e.backgroundQueue.url,e.backgroundQueue.force),a.init()},_initUserPopover:function(){n.init({attributeName:"data-user-id",className:"userLink",identifier:"com.woltlab.wcf.user",loadCallback:function(e,t){var i=function(i){t.setContent("com.woltlab.wcf.user",e,i.returnValues.template)};t.ajaxApi({actionName:"getUserProfile",className:"wcf\\data\\user\\UserProfileAction",objectIDs:[e]},i,i)}})},_invokeBackgroundQueue:function(t,i){var n=this._invokeBackgroundQueue.bind(this,t,!0);(Math.random()<.1||i)&&e.apiOnce({url:t,ignoreError:!0,silent:!0,success:function(e){r++,e>0&&r<5&&setTimeout(n,1e3)}.bind(this)})}}}),define("WoltLabSuite/Core/ColorUtil",[],function(){"use strict";var e={hsvToRgb:function(e,t,i){var n,a,o,r={r:0,g:0,b:0},s=Math.floor(e/60),l=e/60-s;if(t/=100,i/=100,n=i*(1-t),a=i*(1-t*l),o=i*(1-t*(1-l)),0==t)r.r=r.g=r.b=i;else switch(s){case 1:r.r=a,r.g=i,r.b=n;break;case 2:r.r=n,r.g=i,r.b=o;break;case 3:r.r=n,r.g=a,r.b=i;break;case 4:r.r=o,r.g=n,r.b=i;break;case 5:r.r=i,r.g=n,r.b=a;break;case 0:case 6:r.r=i,r.g=o,r.b=n}return{r:Math.round(255*r.r),g:Math.round(255*r.g),b:Math.round(255*r.b)}},rgbToHsv:function(e,t,i){var n,a,o,r,s,l;if(e/=255,t/=255,i/=255,r=Math.max(Math.max(e,t),i),s=Math.min(Math.min(e,t),i),l=r-s,n=0,r!==s){switch(r){case e:n=60*((t-i)/l);break;case t:n=60*(2+(i-e)/l);break;case i:n=60*(4+(e-t)/l)}n<0&&(n+=360)}return a=0===r?0:l/r,o=r,{h:Math.round(n),s:Math.round(100*a),v:Math.round(100*o)}},hexToRgb:function(e){if(/^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(e)){var t=e.split("");return"#"===t[0]&&t.shift(),3===t.length?{r:parseInt(t[0]+""+t[0],16),g:parseInt(t[1]+""+t[1],16),b:parseInt(t[2]+""+t[2],16)}:{r:parseInt(t[0]+""+t[1],16),g:parseInt(t[2]+""+t[3],16),b:parseInt(t[4]+""+t[5],16)}}return Number.NaN},rgbToHex:function(e,t,i){var n="0123456789ABCDEF";return void 0===t&&e.toString().match(/^rgba?\((\d+), ?(\d+), ?(d\+)(?:, ?[0-9.]+)?\)$/)&&(e=RegExp.$1,t=RegExp.$2,i=RegExp.$3),n.charAt((e-e%16)/16)+""+n.charAt(e%16)+(n.charAt((t-t%16)/16)+""+n.charAt(t%16))+(n.charAt((i-i%16)/16)+""+n.charAt(i%16))}};return window.__wcf_bc_colorUtil=e,e}),define("WoltLabSuite/Core/Permission",["Dictionary"],function(e){"use strict";var t=new e;return{add:function(e,i){if("boolean"!=typeof i)throw new TypeError("Permission value has to be boolean.");t.set(e,i)},addObject:function(e){for(var t in e)objOwns(e,t)&&this.add(t,e[t])},get:function(e){return!!t.has(e)&&t.get(e)}}}),define("WoltLabSuite/Core/Upload",["AjaxRequest","Core","Dom/ChangeListener","Language","Dom/Util","Dom/Traverse"],function(e,t,i,n,a,o){"use strict";function r(e,i,n){if(n=n||{},void 0===n.className)throw new Error("Missing class name.");if(this._options=t.extend({action:"upload",multiple:!1,name:"__files[]",singleFileRequests:!1,url:"index.php?ajax-upload/&t="+SECURITY_TOKEN},n),this._options.url=t.convertLegacyUrl(this._options.url),0===this._options.url.indexOf("index.php")&&(this._options.url=WSC_API_URL+this._options.url),this._buttonContainer=elById(e),null===this._buttonContainer)throw new Error("Element id '"+e+"' is unknown.");if(this._target=elById(i),null===i)throw new Error("Element id '"+i+"' is unknown.");if(n.multiple&&"UL"!==this._target.nodeName&&"OL"!==this._target.nodeName)throw new Error("Target element has to be list when allowing upload of multiple files.");this._fileElements=[],this._internalFileId=0,this._createButton()}return r.prototype={_createButton:function(){this._fileUpload=elCreate("input"),elAttr(this._fileUpload,"type","file"),elAttr(this._fileUpload,"name",this._options.name),this._options.multiple&&elAttr(this._fileUpload,"multiple","true"),this._fileUpload.addEventListener("change",this._upload.bind(this)),this._button=elCreate("p"),this._button.className="button uploadButton";var e=elCreate("span");e.textContent=n.get("wcf.global.button.upload"),this._button.appendChild(e),a.prepend(this._fileUpload,this._button),this._insertButton(),i.trigger()},_createFileElement:function(e){var t,i,n=elCreate("progress");return elAttr(n,"max",100),"OL"===this._target.nodeName||"UL"===this._target.nodeName?(t=elCreate("li"),t.innerText=e.name,t.appendChild(n),this._target.appendChild(t),t):(i=elCreate("p"),i.appendChild(n),this._target.appendChild(i),i)},_createFileElements:function(e){var t,n,a,o,r;if(e.length){for(t=this._fileElements.length,this._fileElements[t]=[],n=0,a=e.length;n<a;n++)o=e[n],r=this._createFileElement(o),r.classList.contains("uploadFailed")||(elData(r,"filename",o.name),elData(r,"internal-file-id",this._internalFileId++),this._fileElements[t][n]=r);return i.trigger(),t}return null},_failure:function(e,t,i,n,a){return!0},_getParameters:function(){return{}},_insertButton:function(){a.prepend(this._button,this._buttonContainer)},_progress:function(e,t){var i,n,a=Math.round(t.loaded/t.total*100);for(i in this._fileElements[e])n=elByTag("PROGRESS",this._fileElements[e][i]),1===n.length&&elAttr(n[0],"value",a)},_removeButton:function(){elRemove(this._button),i.trigger()},_success:function(e,t,i,n,a){},_upload:function(e,t,i){var n,a,r,s,l,c=o.childrenByClass(this._target,"uploadFailed");for(n=0,a=c.length;n<a;n++)elRemove(c[n]);if(r=null,s=[],t)s.push(t);else if(i){switch(l="",i.type){case"image/jpeg":l=".jpg";break;case"image/gif":l=".gif";break;case"image/png":l=".png"}s.push({name:"pasted-from-clipboard"+l})}else s=this._fileUpload.files;if(s.length)if(this._options.singleFileRequests)for(r=[],n=0,a=s.length;n<a;n++)r.push(this._uploadFiles([s[n]],i));else r=this._uploadFiles(s,i);return this._removeButton(),this._createButton(),r},_uploadFiles:function(t,i){var n,a,o,r,s,l,c=this._createFileElements(t);if(!this._fileElements[c].length)return null;for(n=new FormData,a=0,o=t.length;a<o;a++)this._fileElements[c][a]&&(r=elData(this._fileElements[c][a],"internal-file-id"),i?n.append("__files["+r+"]",i,t[a].name):n.append("__files["+r+"]",t[a]));return n.append("actionName",this._options.action),n.append("className",this._options.className),n.append("interfaceName","wcf\\data\\IUploadAction"),s=function(e,t){t=t||"";for(var i in e)"object"==typeof e[i]?s(e[i],t+"["+i+"]"):n.append("parameters"+t+"["+i+"]",e[i])},s(this._getParameters()),l=new e({data:n,contentType:!1,failure:this._failure.bind(this,c),silent:!0,success:this._success.bind(this,c),uploadProgress:this._progress.bind(this,c),url:this._options.url,withCredentials:!0}),l.sendRequest(),c},uploadBlob:function(e){return this._upload(null,null,e)},uploadFile:function(e){return this._upload(null,e)}},r}),define("WoltLabSuite/Core/User",[],function(){"use strict";var e=!1;return{init:function(t,i){if(e)throw new Error("User has already been initialized.");Object.defineProperty(this,"userId",{value:t,writable:!1}),Object.defineProperty(this,"username",{value:i,writable:!1}),e=!0}}}),define("WoltLabSuite/Core/Ajax/Jsonp",["Core"],function(e){"use strict";return{send:function(t,i,n,a){var o,r,s;if(t="string"==typeof t?t.trim():"",0===t.length)throw new Error("Expected a non-empty string for parameter 'url'.");if("function"!=typeof i)throw new TypeError("Expected a valid callback function for parameter 'success'.");a=e.extend({parameterName:"callback",timeout:10},a||{}),o="wcf_jsonp_"+e.getUuid().replace(/-/g,"").substr(0,8),s=window.setTimeout(function(){"function"==typeof n&&n(),window[o]=void 0,elRemove(r)},1e3*(~~a.timeout||10)),window[o]=function(){window.clearTimeout(s),i.apply(null,arguments),window[o]=void 0,elRemove(r)},t+=t.indexOf("?")===-1?"?":"&",t+=a.parameterName+"="+o,r=elCreate("script"),r.async=!0,elAttr(r,"src",t),document.head.appendChild(r)}}}),define("WoltLabSuite/Core/Bbcode/Collapsible",[],function(){"use strict";var e=elByClass("jsCollapsibleBbcode");return{observe:function(){for(var t,i;e.length;)t=e[0],i=null,elBySelAll(".toggleButton:not(.jsToggleButtonEnabled)",t,function(e){e.closest(".jsCollapsibleBbcode")===t&&(i=e)}),i&&!function(e,t){var i=function(i){var n,a;e.classList.toggle("collapsed")?(t.textContent=elData(t,"title-expand"),i instanceof Event&&(n=e.getBoundingClientRect().top,n<0&&(a=window.pageYOffset+(n-100),a<0&&(a=0),window.scrollTo(window.pageXOffset,a)))):t.textContent=elData(t,"title-collapse")};t.classList.add("jsToggleButtonEnabled"),t.addEventListener(WCF_CLICK_EVENT,i),0!==e.scrollTop&&i()}(t,i),t.classList.remove("jsCollapsibleBbcode")}}}),define("WoltLabSuite/Core/Controller/Captcha",["Dictionary"],function(e){"use strict";var t=new e;return{add:function(e,i){if(t.has(e))throw new Error("Captcha with id '"+e+"' is already registered.");if("function"!=typeof i)throw new TypeError("Expected a valid callback for parameter 'callback'.");t.set(e,i)},delete:function(e){if(!t.has(e))throw new Error("Unknown captcha with id '"+e+"'.");t.delete(e)()},has:function(e){return t.has(e)},getData:function(e){if(!t.has(e))throw new Error("Unknown captcha with id '"+e+"'.");return t.get(e)()}}}),define("WoltLabSuite/Core/Controller/Clipboard",["Ajax","Core","Dictionary","EventHandler","Language","List","ObjectMap","Dom/ChangeListener","Dom/Traverse","Dom/Util","Ui/Confirmation","Ui/SimpleDropdown","WoltLabSuite/Core/Ui/Page/Action"],function(e,t,i,n,a,o,r,s,l,c,d,u,h){"use strict";var p,f,m,g,_,b,v,w,y,C,E;return p=new i,f=new i,m=new i,g=elByClass("jsClipboardContainer"),_=new r,b=new o,v={},w=null,y=null,C=null,E=!1,{setup:function(e){if(!e.pageClassName)throw new Error("Expected a non-empty string for parameter 'pageClassName'.");if(null===w)w=this._mark.bind(this),y=this._executeAction.bind(this),C=this._unmarkAll.bind(this),v=t.extend({hasMarkedItems:!1,pageClassNames:[e.pageClassName],pageObjectId:0},e),delete v.pageClassName;else{if(e.pageObjectId)throw new Error("Cannot load secondary clipboard with page object id set.");v.pageClassNames.push(e.pageClassName)}this._initContainers(),v.hasMarkedItems&&g.length&&this._loadMarkedItems(),s.add("WoltLabSuite/Core/Controller/Clipboard",this._initContainers.bind(this))},reload:function(){p.size&&this._loadMarkedItems()},_initContainers:function(){var e,t,i,n,a,r,s,l,d;for(e=0,t=g.length;e<t;e++)for(i=g[e],n=c.identify(i),a=p.get(n),void 0===a&&(r=elBySel(".jsClipboardMarkAll",i),null!==r&&(elData(r,"container-id",n),r.addEventListener(WCF_CLICK_EVENT,this._markAll.bind(this))),a={checkboxes:elByClass("jsClipboardItem",i),element:i,markAll:r,markedObjectIds:new o},p.set(n,a)),s=0,l=a.checkboxes.length;s<l;s++)d=a.checkboxes[s],b.has(d)||(elData(d,"container-id",n),function(e){var t=e.closest("a");null===t?e.addEventListener(WCF_CLICK_EVENT,w):e.addEventListener(WCF_CLICK_EVENT,function(t){t.preventDefault(),window.setTimeout(function(){e.checked=!e.checked,w(null,e)},10)})}(d),b.add(d))},_loadMarkedItems:function(){e.api(this,{actionName:"getMarkedItems",parameters:{pageClassNames:v.pageClassNames,pageObjectID:v.pageObjectId}})},_markAll:function(e){var t,i,n,a,o,r=e.currentTarget,s="INPUT"!==r.nodeName||r.checked,c=[],d=elData(r,"container-id"),u=p.get(d),h=elData(u.element,"type");for(t=0,i=u.checkboxes.length;t<i;t++)n=u.checkboxes[t],a=~~elData(n,"object-id"),s?n.checked||(n.checked=!0,u.markedObjectIds.add(a),c.push(a)):n.checked&&(n.checked=!1,u.markedObjectIds.delete(a),c.push(a)),o=l.parentByClass(r,"jsClipboardObject"),null!==o&&o.classList[s?"addClass":"removeClass"]("jsMarked");this._saveState(h,c,s)},_mark:function(e,t){var i,n,a,o,r,s,c,d,u;if(t=e instanceof Event?e.currentTarget:t,i=~~elData(t,"object-id"),n=t.checked,a=elData(t,"container-id"),o=p.get(a),r=elData(o.element,"type"),s=l.parentByClass(t,"jsClipboardObject"),o.markedObjectIds[n?"add":"delete"](i),s.classList[n?"add":"remove"]("jsMarked"),null!==o.markAll){for(c=!0,d=0,u=o.checkboxes.length;d<u;d++)if(!o.checkboxes[d].checked){c=!1;break}o.markAll.checked=c}this._saveState(r,[i],n)},_saveState:function(t,i,n){e.api(this,{actionName:n?"mark":"unmark",parameters:{pageClassNames:v.pageClassNames,pageObjectID:v.pageObjectId,objectIDs:i,objectType:t}})},_executeAction:function(e){var t,i,a,o,r=e.currentTarget,s=_.get(r);return s.url?void(window.location.href=s.url):(t=function(){var e=elData(r,"type");n.fire("com.woltlab.wcf.clipboard",e,{data:s,listItem:r,responseData:null})},i="string"==typeof s.internalData.confirmMessage?s.internalData.confirmMessage:"",a=!0,"object"==typeof s.parameters&&s.parameters.actionName&&s.parameters.className?("unmarkAll"===s.parameters.actionName||Array.isArray(s.parameters.objectIDs))&&(i.length?(o="string"==typeof s.internalData.template?s.internalData.template:"",d.show({confirm:function(){var e,t,i,n,a,l={};if(o.length)for(e=elBySelAll("input, select, textarea",d.getContentElement()),t=0,i=e.length;t<i;t++)switch(n=e[t],a=elAttr(n,"name"),n.nodeName){case"INPUT":("checkbox"!==n.type&&"radio"!==n.type||n.checked)&&(l[a]=elAttr(n,"value"));break;case"SELECT":l[a]=n.value;break;case"TEXTAREA":l[a]=n.value.trim()}this._executeProxyAction(r,s,l)}.bind(this),message:i,template:o})):this._executeProxyAction(r,s)):i.length&&(a=!1,d.show({confirm:t,message:i})),void(a&&t()))},_executeProxyAction:function(t,i,a){var o,r,s;if(a=a||{},o="unmarkAll"!==i.parameters.actionName?i.parameters.objectIDs:[],r={data:a},"object"==typeof i.internalData.parameters)for(s in i.internalData.parameters)i.internalData.parameters.hasOwnProperty(s)&&(r[s]=i.internalData.parameters[s]);e.api(this,{actionName:i.parameters.actionName,className:i.parameters.className,objectIDs:o,parameters:r},function(e){if("unmarkAll"!==i.actionName){var a=elData(t,"type");n.fire("com.woltlab.wcf.clipboard",a,{data:i,listItem:t,responseData:e})}this._loadMarkedItems()}.bind(this))},_unmarkAll:function(t){var i=elData(t.currentTarget,"type");e.api(this,{actionName:"unmarkAll",parameters:{objectType:i}})},_ajaxSetup:function(){return{data:{className:"wcf\\data\\clipboard\\item\\ClipboardItemAction"}}},_ajaxSuccess:function(e){var t,i,n,o,s,l,c,d,g,b,v,w,E;if("unmarkAll"===e.actionName)return void p.forEach(function(t){var i,n,a;if(elData(t.element,"type")===e.returnValues.objectType){for(i=elByClass("jsMarked",t.element);i.length;)i[0].classList.remove("jsMarked");for(null!==t.markAll&&(t.markAll.checked=!1),n=0,a=t.checkboxes.length;n<a;n++)t.checkboxes[n].checked=!1;h.remove("wcfClipboard-"+e.returnValues.objectType)}}.bind(this));if(_=new r,p.forEach(function(t){var i=elData(t.element,"type"),n=e.returnValues.markedItems&&e.returnValues.markedItems.hasOwnProperty(i)?e.returnValues.markedItems[i]:[];this._rebuildMarkings(t,n)}.bind(this)),t=[],e.returnValues&&e.returnValues.items)for(i in e.returnValues.items)e.returnValues.items.hasOwnProperty(i)&&t.push(i);if(f.forEach(function(e,i){t.indexOf(i)===-1&&(h.remove("wcfClipboard-"+i),m.get(i).innerHTML="")}),e.returnValues&&e.returnValues.items)for(i in e.returnValues.items)if(e.returnValues.items.hasOwnProperty(i)){c=e.returnValues.items[i],o=!1,l=f.get(i),s=m.get(i),void 0===l?(o=!0,l=elCreate("a"),l.className="dropdownToggle",l.textContent=c.label,f.set(i,l),s=elCreate("ol"),s.className="dropdownMenu",m.set(i,s)):(l.textContent=c.label,s.innerHTML="");for(v in c.items)c.items.hasOwnProperty(v)&&(b=c.items[v],g=elCreate("li"),w=elCreate("span"),w.textContent=b.label,g.appendChild(w),s.appendChild(g),elData(g,"type",i),g.addEventListener(WCF_CLICK_EVENT,y),_.set(g,b));d=elCreate("li"),d.classList.add("dropdownDivider"),s.appendChild(d),E=elCreate("li"),elData(E,"type",i),w=elCreate("span"),w.textContent=a.get("wcf.clipboard.item.unmarkAll"),E.appendChild(w),E.addEventListener(WCF_CLICK_EVENT,C),s.appendChild(E),t.indexOf(i)!==-1&&(n="wcfClipboard-"+i,h.has(n)?h.show(n):h.add(n,l)),o&&(l.parentNode.classList.add("dropdown"),l.parentNode.appendChild(s),u.init(l))}},_rebuildMarkings:function(e,t){var i,n,a,o,r,s,c=!0;for(i=0,n=e.checkboxes.length;i<n;i++)a=e.checkboxes[i],o=l.parentByClass(a,"jsClipboardObject"),r=t.indexOf(~~elData(a,"object-id"))!==-1,r||(c=!1),a.checked=r,o.classList[r?"add":"remove"]("jsMarked");if(null!==e.markAll){for(e.markAll.checked=c,s=e.markAll;s=s.parentNode;)if(s instanceof Element&&s.classList.contains("columnMark")){s=s.parentNode;break}s&&s.classList[c?"add":"remove"]("jsMarked")}},hideEditor:function(e){h.remove("wcfClipboard-"+e),E&&(E=!1,document.documentElement.classList.add("pageOverlayActive"))},showEditor:function(){this._loadMarkedItems(),document.documentElement.classList.contains("pageOverlayActive")&&(document.documentElement.classList.remove("pageOverlayActive"),E=!0)},unmark:function(e,t){this._saveState(e,t,!1)}}}),define("WoltLabSuite/Core/Event/Key",[],function(){"use strict";function e(e,t,i){if(!(e instanceof Event))throw new TypeError("Expected a valid event when testing for key '"+t+"'.");return e.key===t||e.which===i}return{ArrowDown:function(t){return e(t,"ArrowDown",40)},ArrowLeft:function(t){return e(t,"ArrowLeft",37)},ArrowRight:function(t){return e(t,"ArrowRight",39)},ArrowUp:function(t){return e(t,"ArrowUp",38)},Comma:function(t){return e(t,",",44)},Enter:function(t){return e(t,"Enter",13)},Escape:function(t){return e(t,"Escape",27)},Tab:function(t){return e(t,"Tab",9)}}}),define("WoltLabSuite/Core/Language/Chooser",["Dictionary","Language","Dom/Traverse","Dom/Util","ObjectMap","Ui/SimpleDropdown"],function(e,t,i,n,a,o){"use strict";var r=new e,s=!1,l=new a,c=null;return{init:function(e,t,i,n,a,o){var s,l;if(!r.has(t)){if(s=elById(e),null===s)throw new Error("Expected a valid container id, cannot find '"+t+"'.");l=elById(t),null===l&&(l=elCreate("input"),elAttr(l,"type","hidden"),elAttr(l,"id",t),elAttr(l,"name",t),elAttr(l,"value",i),s.appendChild(l)),this._initElement(t,l,i,n,a,o)}},_setup:function(){s||(s=!0,c=this._submit.bind(this))},_initElement:function(e,n,a,s,d,u){var h,p,f,m,g,_,b,v,w,y,C,E,L;"DD"===n.parentNode.nodeName?(h=elCreate("div"),h.className="dropdown",n.parentNode.insertBefore(h,n)):(h=n.parentNode,h.classList.add("dropdown")),elHide(n),p=elCreate("a"),p.className="dropdownToggle dropdownIndicator boxFlag box24 inputPrefix"+("DD"===n.parentNode.nodeName?" button":""),h.appendChild(p),f=elCreate("ul"),f.className="dropdownMenu",h.appendChild(f),m=function(t){var n=~~elData(t.currentTarget,"language-id"),a=i.childByClass(f,"active");null!==a&&a.classList.remove("active"),n&&t.currentTarget.classList.add("active"),this._select(e,n,t.currentTarget)}.bind(this);for(w in s)s.hasOwnProperty(w)&&(y=s[w],b=elCreate("li"),b.className="boxFlag",b.addEventListener(WCF_CLICK_EVENT,m),elData(b,"language-id",w),void 0!==y.languageCode&&elData(b,"language-code",y.languageCode),f.appendChild(b),g=elCreate("a"),g.className="box24",b.appendChild(g),_=elCreate("img"),elAttr(_,"src",y.iconPath),elAttr(_,"alt",""),_.className="iconFlag",g.appendChild(_),v=elCreate("span"),v.textContent=y.languageName,g.appendChild(v),w==a&&(p.innerHTML=b.firstChild.innerHTML));u?(b=elCreate("li"),b.className="dropdownDivider",f.appendChild(b),b=elCreate("li"),elData(b,"language-id",0),b.addEventListener(WCF_CLICK_EVENT,m),f.appendChild(b),g=elCreate("a"),g.textContent=t.get("wcf.global.language.noSelection"),b.appendChild(g),0===a&&(p.innerHTML=b.firstChild.innerHTML),b.addEventListener(WCF_CLICK_EVENT,m)):0===a&&(p.innerHTML=null,C=elCreate("div"),p.appendChild(C),v=elCreate("span"),v.className="icon icon24 fa-question",C.appendChild(v),v=elCreate("span"),v.textContent=t.get("wcf.global.language.noSelection"),C.appendChild(v)),o.init(p),r.set(e,{callback:d,dropdownMenu:f,dropdownToggle:p,element:n}),E=i.parentByTag(n,"FORM"),null!==E&&(E.addEventListener("submit",c),L=l.get(E),void 0===L&&(L=[],l.set(E,L)),L.push(e))},_select:function(e,t,i){var n,a,o,s,l=r.get(e);if(void 0===i){for(n=l.dropdownMenu.childNodes,a=0,o=n.length;a<o;a++)if(s=n[a],~~elData(s,"language-id")===t){i=s;break}if(void 0===i)throw new Error("Cannot select unknown language id '"+t+"'")}l.element.value=t,l.dropdownToggle.innerHTML=i.firstChild.innerHTML,r.set(e,l),"function"==typeof l.callback&&l.callback(i)},_submit:function(e){var t,i,n,a=l.get(e.currentTarget);for(i=0,n=a.length;i<n;i++)t=elCreate("input"),t.type="hidden",t.name=a[i],t.value=this.getLanguageId(a[i]),e.currentTarget.appendChild(t)},getChooser:function(e){var t=r.get(e);if(void 0===t)throw new Error("Expected a valid language chooser input element, '"+e+"' is not i18n input field.");return t},getLanguageId:function(e){return~~this.getChooser(e).element.value},removeChooser:function(e){r.has(e)&&r.delete(e)},setLanguageId:function(e,t){if(void 0===r.get(e))throw new Error("Expected a valid  input element, '"+e+"' is not i18n input field.");this._select(e,t)}}}),define("WoltLabSuite/Core/Language/Input",["Core","Dictionary","Language","ObjectMap","StringUtil","Dom/Traverse","Dom/Util","Ui/SimpleDropdown"],function(e,t,i,n,a,o,r,s){"use strict";var l=new t,c=!1,d=new n,u=new t,h=null,p=null;return{init:function(e,i,n,o){var r,s,l;if(!u.has(e)){if(r=elById(e),null===r)throw new Error("Expected a valid element id, cannot find '"+e+"'.");this._setup(),s=new t;for(l in i)i.hasOwnProperty(l)&&s.set(~~l,a.unescapeHTML(i[l]));u.set(e,s),this._initElement(e,r,s,n,o)}},registerCallback:function(e,t,i){if(!u.has(e))throw new Error("Unknown element id '"+e+"'.");l.get(e).callbacks.set(t,i)},_setup:function(){c||(c=!0,h=this._dropdownToggle.bind(this),p=this._submit.bind(this))},_initElement:function(e,n,a,c,u){var f,m,g,_,b,v,w,y,C,E,L,S=n.parentNode;S.classList.contains("inputAddon")||(S=elCreate("div"),S.className="inputAddon"+("TEXTAREA"===n.nodeName?" inputAddonTextarea":""),elData(S,"input-id",e),n.parentNode.insertBefore(S,n),S.appendChild(n)),S.classList.add("dropdown"),f=elCreate("span"),f.className="button dropdownToggle inputPrefix",m=elCreate("span"),m.textContent=i.get("wcf.global.button.disabledI18n"),f.appendChild(m),S.insertBefore(f,n),g=elCreate("ul"),g.className="dropdownMenu",r.insertAfter(g,f),_=function(t,i){var n=~~elData(t.currentTarget,"language-id"),a=o.childByClass(g,"active");null!==a&&a.classList.remove("active"),n&&t.currentTarget.classList.add("active"),this._select(e,n,i||!1)}.bind(this);for(v in c)c.hasOwnProperty(v)&&(b=elCreate("li"),elData(b,"language-id",v),m=elCreate("span"),m.textContent=c[v],b.appendChild(m),b.addEventListener(WCF_CLICK_EVENT,_),g.appendChild(b));if(u!==!0&&(b=elCreate("li"),b.className="dropdownDivider",g.appendChild(b),b=elCreate("li"),elData(b,"language-id",0),m=elCreate("span"),m.textContent=i.get("wcf.global.button.disabledI18n"),b.appendChild(m),b.addEventListener(WCF_CLICK_EVENT,_),g.appendChild(b)),w=null,u===!0||a.size)for(y=0,C=g.childElementCount;y<C;y++)if(~~elData(g.children[y],"language-id")===LANGUAGE_ID){w=g.children[y];break}s.init(f),s.registerCallback(S.id,h),l.set(e,{buttonLabel:f.children[0],callbacks:new t,element:n,languageId:0,isEnabled:!0,forceSelection:u}),E=o.parentByTag(n,"FORM"),null!==E&&(E.addEventListener("submit",p),L=d.get(E),void 0===L&&(L=[],d.set(E,L)),L.push(e)),null!==w&&_({currentTarget:w},!0)},_select:function(e,i,n){var a,o,r,c,d,h=l.get(e),p=s.getDropdownMenu(h.element.closest(".inputAddon").id),f="";for(o=0,r=p.childElementCount;o<r;o++)a=p.children[o],c=elData(a,"language-id"),c.length&&i===~~c&&(f=a.children[0].textContent);h.languageId!==i&&(d=u.get(e),h.languageId&&d.set(h.languageId,h.element.value),0===i?u.set(e,new t):(h.buttonLabel.classList.contains("active")||n===!0)&&(h.element.value=d.has(i)?d.get(i):""),h.buttonLabel.textContent=f,h.buttonLabel.classList[i?"add":"remove"]("active"),h.languageId=i),n||(h.element.blur(),h.element.focus()),h.callbacks.has("select")&&h.callbacks.get("select")(h.element)},_dropdownToggle:function(e,t){var i,n,a,o,r,c,d,h,p;if("open"===t)for(i=s.getDropdownMenu(e),n=elData(elById(e),"input-id"),a=l.get(n),o=u.get(n),d=0,h=i.childElementCount;d<h;d++)r=i.children[d],c=~~elData(r,"language-id"),c&&(p=!1,a.languageId&&(p=c===a.languageId?""===a.element.value.trim():!o.get(c)),r.classList[p?"add":"remove"]("missingValue"))},_submit:function(e){var t,i,n,a,o,r,s=d.get(e.currentTarget);for(o=0,r=s.length;o<r;o++)i=s[o],t=l.get(i),t.isEnabled&&(a=u.get(i),t.callbacks.has("submit")&&t.callbacks.get("submit")(t.element),t.languageId&&a.set(t.languageId,t.element.value),a.size&&(a.forEach(function(t,a){n=elCreate("input"),n.type="hidden",n.name=i+"_i18n["+a+"]",n.value=t,e.currentTarget.appendChild(n)}),t.element.removeAttribute("name")))},getValues:function(e){var t,i=l.get(e);if(void 0===i)throw new Error("Expected a valid i18n input element, '"+e+"' is not i18n input field.");return t=u.get(e),t.set(i.languageId,i.element.value),t},setValues:function(i,n){var a=l.get(i);if(void 0===a)throw new Error("Expected a valid i18n input element, '"+i+"' is not i18n input field.");e.isPlainObject(n)&&(n=t.fromObject(n)),a.element.value="",n.has(0)&&(a.element.value=n.get(0),n.delete(0)),u.set(i,n),a.languageId=0,this._select(i,LANGUAGE_ID,!0)},disable:function(e){var t,i=l.get(e);if(void 0===i)throw new Error("Expected a valid i18n input element, '"+e+"' is not i18n input field.");i.isEnabled&&(i.isEnabled=!1,elHide(i.buttonLabel.parentNode),t=i.buttonLabel.parentNode.parentNode,t.classList.remove("inputAddon"),t.classList.remove("dropdown"))},enable:function(e){var t,i=l.get(e);if(void 0===i)throw new Error("Expected a valid i18n input element, '"+e+"' is not i18n input field.");i.isEnabled||(i.isEnabled=!0,elShow(i.buttonLabel.parentNode),t=i.buttonLabel.parentNode.parentNode,t.classList.add("inputAddon"),t.classList.add("dropdown"))},isEnabled:function(e){var t=l.get(e);if(void 0===t)throw new Error("Expected a valid i18n input element, '"+e+"' is not i18n input field.");return t.isEnabled},validate:function(e,t){var i,n,a,o,r,c,d,h,p=l.get(e);if(void 0===p)throw new Error("Expected a valid i18n input element, '"+e+"' is not i18n input field.");if(!p.isEnabled)return!0;for(i=u.get(e),n=s.getDropdownMenu(p.element.parentNode.id),p.languageId&&i.set(p.languageId,p.element.value),r=!1,c=!1,d=0,h=n.childElementCount;d<h;d++)if(a=n.children[d],o=~~elData(a,"language-id"))if(i.has(o)&&0!==i.get(o).length){if(r)return!1;c=!0}else{if(c)return!1;r=!0}return!r||t}}}),define("WoltLabSuite/Core/Language/Text",["Core","./Input"],function(e,t){"use strict";return{init:function(e,i,n,a){var o=elById(e);if(!o||"TEXTAREA"!==o.nodeName||!o.classList.contains("wysiwygTextarea"))throw new Error('Expected <textarea class="wysiwygTextarea" /> for id \''+e+"'.");t.init(e,i,n,a),t.registerCallback(e,"select",this._callbackSelect.bind(this)),t.registerCallback(e,"submit",this._callbackSubmit.bind(this));
},_callbackSelect:function(e){void 0!==window.jQuery&&window.jQuery(e).redactor("code.set",e.value)},_callbackSubmit:function(e){void 0!==window.jQuery&&(e.value=window.jQuery(e).redactor("code.get"))}}}),define("WoltLabSuite/Core/Ui/Notification",["Language"],function(e){"use strict";var t=!1,i=null,n=null,a=null,o=null,r=null,s={show:function(s,l,c){t||(this._init(),i="function"==typeof l?l:null,n.className=c||"success",n.textContent=e.get(s||"wcf.global.success"),t=!0,a.classList.add("active"),o=setTimeout(r,2e3))},_init:function(){null===a&&(r=this._hide.bind(this),a=elCreate("div"),a.id="systemNotification",n=elCreate("p"),n.addEventListener(WCF_CLICK_EVENT,r),a.appendChild(n),document.body.appendChild(a))},_hide:function(){clearTimeout(o),a.classList.remove("active"),null!==i&&i(),t=!1}};return s}),define("WoltLabSuite/Core/Media/Editor",["Ajax","Core","Dictionary","Dom/ChangeListener","Dom/Traverse","Language","Ui/Dialog","Ui/Notification","WoltLabSuite/Core/Language/Chooser","WoltLabSuite/Core/Language/Input","EventKey"],function(e,t,i,n,a,o,r,s,l,c,d){"use strict";function u(e){if(this._callbackObject=e||{},this._callbackObject._editorClose&&"function"!=typeof this._callbackObject._editorClose)throw new TypeError("Callback object has no function '_editorClose'.");if(this._callbackObject._editorSuccess&&"function"!=typeof this._callbackObject._editorSuccess)throw new TypeError("Callback object has no function '_editorSuccess'.");this._media=null,this._availableLanguageCount=1,this._categoryIds=[],this._oldCategoryId=0,this._dialogs=new i}return u.prototype={_ajaxSetup:function(){return{data:{actionName:"update",className:"wcf\\data\\media\\MediaAction"}}},_ajaxSuccess:function(e){s.show(),this._callbackObject._editorSuccess&&(this._callbackObject._editorSuccess(this._media,this._oldCategoryId),this._oldCategoryId=0),r.close("mediaEditor_"+this._media.mediaID),this._media=null},_close:function(){this._media=null,this._callbackObject._editorClose&&this._callbackObject._editorClose()},_keyPress:function(e){d.Enter(e)&&(e.preventDefault(),this._saveData())},_saveData:function(){var t,i,n,s,d,u,h=r.getDialog("mediaEditor_"+this._media.mediaID).content,p=elBySel("select[name=categoryID]",h),f=elBySel("input[name=altText]",h),m=elBySel("textarea[name=caption]",h),g=elBySel("input[name=title]",h),_=!1,b=!!f&&a.childByClass(f.parentNode.parentNode,"innerError"),v=!!m&&a.childByClass(m.parentNode.parentNode,"innerError"),w=a.childByClass(g.parentNode.parentNode,"innerError");for(this._oldCategoryId=this._media.categoryID,this._categoryIds.length&&(this._media.categoryID=~~p.value,this._categoryIds.indexOf(this._media.categoryID)===-1&&(this._media.categoryID=0)),this._availableLanguageCount>1?(this._media.isMultilingual=~~elBySel("input[name=isMultilingual]",h).checked,this._media.languageID=this._media.isMultilingual?null:l.getLanguageId("languageID")):this._media.languageID=LANGUAGE_ID,this._media.altText={},this._media.caption={},this._media.title={},this._availableLanguageCount>1&&this._media.isMultilingual?(elById("altText_"+this._media.mediaID)&&!c.validate("altText_"+this._media.mediaID,!0)&&(_=!0,b||(t=elCreate("small"),t.className="innerError",t.textContent=o.get("wcf.global.form.error.multilingual"),f.parentNode.parentNode.appendChild(t))),elById("caption_"+this._media.mediaID)&&!c.validate("caption_"+this._media.mediaID,!0)&&(_=!0,v||(t=elCreate("small"),t.className="innerError",t.textContent=o.get("wcf.global.form.error.multilingual"),m.parentNode.parentNode.appendChild(t))),c.validate("title_"+this._media.mediaID,!0)||(_=!0,w||(t=elCreate("small"),t.className="innerError",t.textContent=o.get("wcf.global.form.error.multilingual"),g.parentNode.parentNode.appendChild(t))),this._media.altText=elById("altText_"+this._media.mediaID)?c.getValues("altText_"+this._media.mediaID).toObject():"",this._media.caption=elById("caption_"+this._media.mediaID)?c.getValues("caption_"+this._media.mediaID).toObject():"",this._media.title=c.getValues("title_"+this._media.mediaID).toObject()):(this._media.altText[this._media.languageID]=f?f.value:"",this._media.caption[this._media.languageID]=m?m.value:"",this._media.title[this._media.languageID]=g.value),i={allowAll:~~elById("mediaEditor_"+this._media.mediaID+"_aclAllowAll").checked,group:[],user:[]},n=elBySelAll('input[name="aclValues[group][]"]',h),s=0,d=n.length;s<d;s++)i.group.push(~~n[s].value);for(u=elBySelAll('input[name="aclValues[user][]"]',h),s=0,d=u.length;s<d;s++)i.user.push(~~u[s].value);_||(b&&elRemove(b),v&&elRemove(v),w&&elRemove(w),e.api(this,{actionName:"update",objectIDs:[this._media.mediaID],parameters:{aclValues:i,altText:this._media.altText,caption:this._media.caption,data:{categoryID:this._media.categoryID,isMultilingual:this._media.isMultilingual,languageID:this._media.languageID},title:this._media.title}}))},_updateLanguageFields:function(e,t){e&&(t=e.currentTarget);var i=elById("mediaEditor_"+this._media.mediaID+"_languageIDContainer").parentNode;t.checked?(c.enable("title_"+this._media.mediaID),elById("caption_"+this._media.mediaID)&&c.enable("caption_"+this._media.mediaID),elById("altText_"+this._media.mediaID)&&c.enable("altText_"+this._media.mediaID),elHide(i)):(c.disable("title_"+this._media.mediaID),elById("caption_"+this._media.mediaID)&&c.disable("caption_"+this._media.mediaID),elById("altText_"+this._media.mediaID)&&c.disable("altText_"+this._media.mediaID),elShow(i))},edit:function(e){if("object"!=typeof e&&(e={mediaID:~~e}),null!==this._media)throw new Error("Cannot edit media with id '"+e.mediaID+"' while editing media with id '"+this._media.mediaID+"'");this._media=e,this._dialogs.has("mediaEditor_"+e.mediaID)||this._dialogs.set("mediaEditor_"+e.mediaID,{_dialogSetup:function(){return{id:"mediaEditor_"+e.mediaID,options:{backdropCloseOnClick:!1,onClose:this._close.bind(this),title:o.get("wcf.media.edit")},source:{after:function(e,t){this._availableLanguageCount=~~t.returnValues.availableLanguageCount,this._categoryIds=t.returnValues.categoryIDs.map(function(e){return~~e});var a=!1;t.returnValues.mediaData&&(this._media=t.returnValues.mediaData,a=!0),setTimeout(function(){var t,a,o,r,s;this._availableLanguageCount>1&&l.setLanguageId("languageID",this._media.languageID||LANGUAGE_ID),this._categoryIds.length&&(elBySel("select[name=categoryID]",e).value=~~this._media.categoryID),t=elBySel("input[name=title]",e),a=elBySel("input[name=altText]",e),o=elBySel("textarea[name=caption]",e),this._availableLanguageCount>1&&this._media.isMultilingual?(elById("altText_"+this._media.mediaID)&&c.setValues("altText_"+this._media.mediaID,i.fromObject(this._media.altText||{})),elById("caption_"+this._media.mediaID)&&c.setValues("caption_"+this._media.mediaID,i.fromObject(this._media.caption||{})),c.setValues("title_"+this._media.mediaID,i.fromObject(this._media.title||{}))):(t.value=this._media.title?this._media.title[LANGUAGE_ID]:"",a&&(a.value=this._media.altText?this._media.altText[LANGUAGE_ID]:""),o&&(o.value=this._media.caption?this._media.caption[LANGUAGE_ID]:"")),this._availableLanguageCount>1&&(r=elBySel("input[name=isMultilingual]",e),r.addEventListener("change",this._updateLanguageFields.bind(this)),this._updateLanguageFields(null,r)),s=this._keyPress.bind(this),a&&a.addEventListener("keypress",s),t.addEventListener("keypress",s),elBySel("button[data-type=submit]",e).addEventListener(WCF_CLICK_EVENT,this._saveData.bind(this)),document.activeElement.blur(),elById("mediaEditor_"+this._media.mediaID).parentNode.scrollTop=0,n.trigger()}.bind(this),0)}.bind(this),data:{actionName:"getEditorDialog",className:"wcf\\data\\media\\MediaAction",objectIDs:[e.mediaID]}}}}.bind(this)}),r.open(this._dialogs.get("mediaEditor_"+e.mediaID))}},u}),define("WoltLabSuite/Core/Media/Upload",["Core","Dom/ChangeListener","Dom/Traverse","Dom/Util","EventHandler","Language","Permission","Upload"],function(e,t,i,n,a,o,r,s){"use strict";function l(t,i,n){n=n||{},this._mediaManager=null,n.mediaManager&&(this._mediaManager=n.mediaManager,delete n.mediaManager),this._categoryId=null,s.call(this,t,i,e.extend({className:"wcf\\data\\media\\MediaAction",multiple:!!this._mediaManager,singleFileRequests:!0},n))}return e.inherit(l,s,{_createFileElement:function(e){var i,a,o,r,s,l;return i="OL"===this._target.nodeName||"UL"===this._target.nodeName?elCreate("li"):elCreate("p"),a=elCreate("div"),a.className="mediaThumbnail",i.appendChild(a),o=elCreate("span"),o.className="icon icon144 fa-spinner",a.appendChild(o),r=elCreate("div"),r.className="mediaInformation",i.appendChild(r),s=elCreate("p"),s.className="mediaTitle",s.textContent=e.name,r.appendChild(s),l=elCreate("progress"),elAttr(l,"max",100),r.appendChild(l),n.prepend(i,this._target),t.trigger(),i},_getParameters:function(){var t,i;return this._mediaManager?(t={imagesOnly:this._mediaManager.getOption("imagesOnly")},i=this._mediaManager.getCategoryId(),i&&(t.categoryID=i),e.extend(l._super.prototype._getParameters.call(this),t)):l._super.prototype._getParameters.call(this)},_success:function(e,n){var r,s,l,c,d,u,h,p,f,m,g=this._fileElements[e];for(r=0,s=g.length;r<s;r++)l=g[r],c=elData(l,"internal-file-id"),d=n.returnValues.media[c],elRemove(i.childByTag(i.childByClass(l,"mediaInformation"),"PROGRESS")),d?(u=i.childByTag(i.childByClass(l,"mediaThumbnail"),"SPAN"),d.tinyThumbnailType?(h=u.parentNode,elRemove(u),p=elCreate("img"),elAttr(p,"src",d.tinyThumbnailLink),elAttr(p,"alt",""),p.style.setProperty("width","144px"),p.style.setProperty("height","144px"),h.appendChild(p)):(u.classList.remove("fa-spinner"),u.classList.add("fa-file-o")),l.className="jsClipboardObject mediaFile",elData(l,"object-id",d.mediaID),this._mediaManager&&(this._mediaManager.setupMediaElement(d,l),this._mediaManager.addMedia(d,l))):(f=n.returnValues.errors[c],f||(f={errorType:"uploadFailed",filename:elData(l,"filename")}),u=i.childByTag(i.childByClass(l,"mediaThumbnail"),"SPAN"),u.classList.remove("fa-spinner"),u.classList.add("fa-remove"),u.classList.add("pointer"),l.classList.add("uploadFailed"),l.addEventListener(WCF_CLICK_EVENT,function(){elRemove(this)}),m=i.childByClass(i.childByClass(l,"mediaInformation"),"mediaTitle"),m.innerText=o.get("wcf.media.upload.error."+f.errorType,{filename:f.filename})),t.trigger();a.fire("com.woltlab.wcf.media.upload","success",{files:g,media:n.returnValues.media,upload:this,uploadId:e})},_uploadFiles:function(e,t){return l._super.prototype._uploadFiles.call(this,e,t)}}),l}),define("WoltLabSuite/Core/Ui/Suggestion",["Ajax","Core","Ui/SimpleDropdown"],function(e,t,i){"use strict";function n(e,t){this.init(e,t)}return n.prototype={init:function(e,i){if(this._dropdownMenu=null,this._value="",this._element=elById(e),null===this._element)throw new Error("Expected a valid element id.");if(this._options=t.extend({ajax:{actionName:"getSearchResultList",className:"",interfaceName:"wcf\\data\\ISearchAction",parameters:{data:{}}},callbackSelect:null,excludedSearchValues:[],threshold:3},i),"function"!=typeof this._options.callbackSelect)throw new Error("Expected a valid callback for option 'callbackSelect'.");this._element.addEventListener(WCF_CLICK_EVENT,function(e){e.stopPropagation()}),this._element.addEventListener("keydown",this._keyDown.bind(this)),this._element.addEventListener("keyup",this._keyUp.bind(this))},addExcludedValue:function(e){this._options.excludedSearchValues.indexOf(e)===-1&&this._options.excludedSearchValues.push(e)},removeExcludedValue:function(e){var t=this._options.excludedSearchValues.indexOf(e);t!==-1&&this._options.excludedSearchValues.splice(t,1)},isActive:function(){return null!==this._dropdownMenu&&i.isOpen(this._element.id)},_keyDown:function(e){var t,n,a,o;if(!this.isActive())return!0;if(13!==e.keyCode&&27!==e.keyCode&&38!==e.keyCode&&40!==e.keyCode)return!0;for(n=0,a=this._dropdownMenu.childElementCount;n<a&&(t=this._dropdownMenu.children[n],!t.classList.contains("active"));)n++;if(13===e.keyCode)i.close(this._element.id),this._select(t);else if(27===e.keyCode){if(!i.isOpen(this._element.id))return!0;i.close(this._element.id)}else o=0,38===e.keyCode?o=(0===n?a:n)-1:40===e.keyCode&&(o=n+1,o===a&&(o=0)),o!==n&&(t.classList.remove("active"),this._dropdownMenu.children[o].classList.add("active"));return e.preventDefault(),!1},_select:function(e){var t=e instanceof Event;t&&(e=e.currentTarget.parentNode),this._options.callbackSelect(this._element.id,{objectId:elData(e.children[0],"object-id"),value:e.textContent}),t&&this._element.focus()},_keyUp:function(t){var n=t.currentTarget.value.trim();if(this._value!==n){if(n.length<this._options.threshold)return null!==this._dropdownMenu&&i.close(this._element.id),void(this._value=n);this._value=n,e.api(this,{parameters:{data:{excludedSearchValues:this._options.excludedSearchValues,searchString:n}}})}},_ajaxSetup:function(){return{data:this._options.ajax}},_ajaxSuccess:function(e){var t,n,a,o,r;if(null===this._dropdownMenu?(this._dropdownMenu=elCreate("div"),this._dropdownMenu.className="dropdownMenu",i.initFragment(this._element,this._dropdownMenu)):this._dropdownMenu.innerHTML="",e.returnValues.length){for(o=0,r=e.returnValues.length;o<r;o++)n=e.returnValues[o],t=elCreate("a"),t.textContent=n.label,elData(t,"object-id",n.objectID),t.addEventListener(WCF_CLICK_EVENT,this._select.bind(this)),a=elCreate("li"),0===o&&(a.className="active"),a.appendChild(t),this._dropdownMenu.appendChild(a);i.open(this._element.id)}else i.close(this._element.id)}},n}),define("WoltLabSuite/Core/Ui/ItemList",["Core","Dictionary","Language","Dom/Traverse","EventKey","WoltLabSuite/Core/Ui/Suggestion","Ui/SimpleDropdown"],function(e,t,i,n,a,o,r){"use strict";var s="",l=new t,c=!1,d=null,u=null,h=null,p=null,f=null;return{init:function(t,i,a){var s,c,d,u,h,p,f,m,g,_=elById(t);if(null===_)throw new Error("Expected a valid element id, '"+t+"' is invalid.");if(l.has(t)){s=l.get(t);for(c in s)s.hasOwnProperty(c)&&(d=s[c],d instanceof Element&&d.parentNode&&elRemove(d));r.destroy(t),l.delete(t)}if(a=e.extend({ajax:{actionName:"getSearchResultList",className:"",data:{}},excludedSearchValues:[],maxItems:-1,maxLength:-1,restricted:!1,isCSV:!1,callbackChange:null,callbackSubmit:null,submitFieldName:""},a),u=n.parentByTag(_,"FORM"),null!==u&&a.isCSV===!1){if(!a.submitFieldName.length&&"function"!=typeof a.callbackSubmit)throw new Error("Expected a valid function for option 'callbackSubmit', a non-empty value for option 'submitFieldName' or enabling the option 'submitFieldCSV'.");u.addEventListener("submit",function(){var e,i,n,o=this.getValues(t);if(a.submitFieldName.length)for(i=0,n=o.length;i<n;i++)e=elCreate("input"),e.type="hidden",e.name=a.submitFieldName.replace(/{$objectId}/,o[i].objectId),e.value=o[i].value,u.appendChild(e);else a.callbackSubmit(u,o)}.bind(this))}if(this._setup(),h=this._createUI(_,a),p=new o(t,{ajax:a.ajax,callbackSelect:this._addItem.bind(this),excludedSearchValues:a.excludedSearchValues}),l.set(t,{dropdownMenu:null,element:h.element,list:h.list,listItem:h.element.parentNode,options:a,shadow:h.shadow,suggestion:p}),i=h.values.length?h.values:i,Array.isArray(i))for(m=0,g=i.length;m<g;m++)f=i[m],"string"==typeof f&&(f={objectId:0,value:f}),this._addItem(t,f)},getValues:function(e){var t,i,a,o,r,s,c;if(!l.has(e))throw new Error("Element id '"+e+"' is unknown.");for(t=l.get(e),i=n.childrenByClass(t.list,"item"),a=[],s=0,c=i.length;s<c;s++)r=i[s],o={objectId:elData(r,"object-id"),value:n.childByTag(r,"SPAN").textContent},a.push(o);return a},setValues:function(e,t){var i,a,o,r;if(!l.has(e))throw new Error("Element id '"+e+"' is unknown.");for(i=l.get(e),r=n.childrenByClass(i.list,"item"),a=0,o=r.length;a<o;a++)this._removeItem(null,r[a],!0);for(a=0,o=t.length;a<o;a++)this._addItem(e,t[a])},_setup:function(){c||(c=!0,d=this._keyDown.bind(this),u=this._keyPress.bind(this),h=this._keyUp.bind(this),p=this._removeItem.bind(this),f=this._blur.bind(this))},_createUI:function(e,t){var i,n,a,o,r,s,l,c,p=elCreate("ol");if(p.className="inputItemList",elData(p,"element-id",e.id),p.addEventListener(WCF_CLICK_EVENT,function(t){t.target===p&&e.focus()}),i=elCreate("li"),i.className="input",p.appendChild(i),e.addEventListener("keydown",d),e.addEventListener("keypress",u),e.addEventListener("keyup",h),e.addEventListener("blur",f),e.parentNode.insertBefore(p,e),i.appendChild(e),t.maxLength!==-1&&elAttr(e,"maxLength",t.maxLength),n=null,a=[],t.isCSV){for(n=elCreate("input"),n.className="itemListInputShadow",n.type="hidden",n.name=e.name,e.removeAttribute("name"),p.parentNode.insertBefore(n,p),r=e.value.split(","),s=0,l=r.length;s<l;s++)o=r[s].trim(),o.length&&a.push(o);"TEXTAREA"===e.nodeName&&(c=elCreate("input"),c.type="text",e.parentNode.insertBefore(c,e),c.id=e.id,elRemove(e),e=c)}return{element:e,list:p,shadow:n,values:a}},_handleLimit:function(e){var t=l.get(e);t.options.maxItems!==-1&&(t.list.childElementCount-1<t.options.maxItems?t.element.disabled&&(t.element.disabled=!1,t.element.removeAttribute("placeholder")):t.element.disabled||(t.element.disabled=!0,elAttr(t.element,"placeholder",i.get("wcf.global.form.input.maxItems"))))},_keyDown:function(e){var t=e.currentTarget,i=t.parentNode.previousElementSibling;s=t.id,8===e.keyCode?0===t.value.length&&null!==i&&(i.classList.contains("active")?this._removeItem(null,i):i.classList.add("active")):27===e.keyCode&&null!==i&&i.classList.contains("active")&&i.classList.remove("active")},_keyPress:function(e){if(a.Enter(e)||a.Comma(e)){if(e.preventDefault(),l.get(e.currentTarget.id).options.restricted)return;var t=e.currentTarget.value.trim();t.length&&this._addItem(e.currentTarget.id,{objectId:0,value:t})}},_keyUp:function(e){var t,i=e.currentTarget;i.value.length>0&&(t=i.parentNode.previousElementSibling,null!==t&&t.classList.remove("active"))},_addItem:function(e,t){var i,n,a,o=l.get(e),r=elCreate("li");r.className="item",i=elCreate("span"),i.className="content",elData(i,"object-id",t.objectId),i.textContent=t.value,n=elCreate("a"),n.className="icon icon16 fa-times",n.addEventListener(WCF_CLICK_EVENT,p),r.appendChild(i),r.appendChild(n),o.list.insertBefore(r,o.listItem),o.suggestion.addExcludedValue(t.value),o.element.value="",this._handleLimit(e),a=this._syncShadow(o),"function"==typeof o.options.callbackChange&&(null===a&&(a=this.getValues(e)),o.options.callbackChange(e,a))},_removeItem:function(e,t,i){var n,a,o,r;t=null===e?t:e.currentTarget.parentNode,n=t.parentNode,a=elData(n,"element-id"),o=l.get(a),o.suggestion.removeExcludedValue(t.children[0].textContent),n.removeChild(t),i||o.element.focus(),this._handleLimit(a),r=this._syncShadow(o),"function"==typeof o.options.callbackChange&&(null===r&&(r=this.getValues(a)),o.options.callbackChange(a,r))},_syncShadow:function(e){var t,i,n,a;if(!e.options.isCSV)return null;for(t="",i=this.getValues(e.element.id),n=0,a=i.length;n<a;n++)t+=(t.length?",":"")+i[n].value;return e.shadow.value=t,i},_blur:function(e){var t,i=l.get(e.currentTarget.id);i.options.restricted||(t=e.currentTarget,window.setTimeout(function(){var e=t.value.trim();e.length&&(i.suggestion&&i.suggestion.isActive()||this._addItem(t.id,{objectId:0,value:e}))}.bind(this),100))}}}),define("WoltLabSuite/Core/Ui/Page/JumpTo",["Language","ObjectMap","Ui/Dialog"],function(e,t,i){"use strict";var n=null,a=null,o=null,r=new t,s=null,l={init:function(e,t){if(t=t||null,null===t){var i=elData(e,"link");t=i?function(e){window.location=i.replace(/pageNo=%d/,"pageNo="+e)}:function(){}}else if("function"!=typeof t)throw new TypeError("Expected a valid function for parameter 'callback'.");r.has(e)||elBySelAll(".jumpTo",e,function(i){i.addEventListener(WCF_CLICK_EVENT,this._click.bind(this,e)),r.set(e,{callback:t})}.bind(this))},_click:function(t,a){n=t,"object"==typeof a&&a.preventDefault(),i.open(this);var r=elData(t,"pages");s.value=r,s.setAttribute("max",r),s.select(),o.textContent=e.get("wcf.page.jumpTo.description").replace(/#pages#/,r)},_keyUp:function(e){if(13===e.which&&a.disabled===!1)return void this._submit();var t=~~s.value;t<1||t>~~elAttr(s,"max")?a.disabled=!0:a.disabled=!1},_submit:function(e){r.get(n).callback(~~s.value),i.close(this)},_dialogSetup:function(){var t='<dl><dt><label for="jsPaginationPageNo">'+e.get("wcf.page.jumpTo")+'</label></dt><dd><input type="number" id="jsPaginationPageNo" value="1" min="1" max="1" class="tiny"><small></small></dd></dl><div class="formSubmit"><button class="buttonPrimary">'+e.get("wcf.global.button.submit")+"</button></div>";return{id:"paginationOverlay",options:{onSetup:function(e){s=elByTag("input",e)[0],s.addEventListener("keyup",this._keyUp.bind(this)),o=elByTag("small",e)[0],a=elByTag("button",e)[0],a.addEventListener(WCF_CLICK_EVENT,this._submit.bind(this))}.bind(this),title:e.get("wcf.global.page.pagination")},source:t}}};return l}),define("WoltLabSuite/Core/Ui/Pagination",["Core","Language","ObjectMap","StringUtil","WoltLabSuite/Core/Ui/Page/JumpTo"],function(e,t,i,n,a){"use strict";function o(e,t){this.init(e,t)}return o.prototype={SHOW_LINKS:11,init:function(t,i){this._element=t,this._options=e.extend({activePage:1,maxPage:1,callbackShouldSwitch:null,callbackSwitch:null},i),"function"!=typeof this._options.callbackShouldSwitch&&(this._options.callbackShouldSwitch=null),"function"!=typeof this._options.callbackSwitch&&(this._options.callbackSwitch=null),this._element.classList.add("pagination"),this._rebuild(this._element)},_rebuild:function(){var e,i,n,o,r,s,l,c,d,u,h,p,f=!1;for(this._element.innerHTML="",e=elCreate("ul"),n=elCreate("li"),n.className="skip",e.appendChild(n),o="icon icon24 fa-chevron-left",this._options.activePage>1?(i=elCreate("a"),i.className=o+" jsTooltip",i.href="#",i.title=t.get("wcf.global.page.previous"),n.appendChild(i),i.addEventListener(WCF_CLICK_EVENT,this.switchPage.bind(this,this._options.activePage-1))):(n.innerHTML='<span class="'+o+'"></span>',n.classList.add("disabled")),e.appendChild(this._createLink(1)),r=this.SHOW_LINKS-4,s=this._options.activePage-2,s<0&&(s=0),l=this._options.maxPage-(this._options.activePage+1),l<0&&(l=0),this._options.activePage>1&&this._options.activePage<this._options.maxPage&&r--,c=r/2,d=this._options.activePage,u=this._options.activePage,d<1&&(d=1),u<1&&(u=1),u>this._options.maxPage-1&&(u=this._options.maxPage-1),s>=c?d-=c:(d-=s,u+=c-s),l>=c?u+=c:(u+=l,d-=c-l),u=Math.ceil(u),d=Math.ceil(d),d<1&&(d=1),u>this._options.maxPage&&(u=this._options.maxPage),h='<a class="jsTooltip" title="'+t.get("wcf.page.jumpTo")+'">&hellip;</a>',d>1&&(d-1<2?e.appendChild(this._createLink(2)):(n=elCreate("li"),n.className="jumpTo",n.innerHTML=h,e.appendChild(n),f=!0)),p=d+1;p<u;p++)e.appendChild(this._createLink(p));u<this._options.maxPage&&(this._options.maxPage-u<2?e.appendChild(this._createLink(this._options.maxPage-1)):(n=elCreate("li"),n.className="jumpTo",n.innerHTML=h,e.appendChild(n),f=!0)),e.appendChild(this._createLink(this._options.maxPage)),n=elCreate("li"),n.className="skip",e.appendChild(n),o="icon icon24 fa-chevron-right",this._options.activePage<this._options.maxPage?(i=elCreate("a"),i.className=o+" jsTooltip",i.href="#",i.title=t.get("wcf.global.page.next"),n.appendChild(i),i.addEventListener(WCF_CLICK_EVENT,this.switchPage.bind(this,this._options.activePage+1))):(n.innerHTML='<span class="'+o+'"></span>',n.classList.add("disabled")),f&&(elData(e,"pages",this._options.maxPage),a.init(e,this.switchPage.bind(this))),this._element.appendChild(e)},_createLink:function(e){var i,a=elCreate("li");return e!==this._options.activePage?(i=elCreate("a"),i.textContent=n.addThousandsSeparator(e),i.addEventListener(WCF_CLICK_EVENT,this.switchPage.bind(this,e)),a.appendChild(i)):(a.classList.add("active"),a.innerHTML="<span>"+n.addThousandsSeparator(e)+'</span><span class="invisible">'+t.get("wcf.page.pagePosition",{pageNo:e,pages:this._options.maxPage})+"</span>"),a},getActivePage:function(){return this._options.activePage},getElement:function(){return this._element},getMaxPage:function(){return this._options.maxPage},switchPage:function(e,t){if("object"==typeof t&&t.preventDefault(),e=~~e,e>0&&this._options.activePage!==e&&e<=this._options.maxPage){if(null!==this._options.callbackShouldSwitch&&this._options.callbackShouldSwitch(e)!==!0)return;this._options.activePage=e,this._rebuild(),null!==this._options.callbackSwitch&&this._options.callbackSwitch(e)}}},o}),define("WoltLabSuite/Core/Ui/Scroll",["Dom/Util"],function(e){"use strict";var t=null,i=null,n=null;return{element:function(n,a){var o,r;if(!(n instanceof Element))throw new TypeError("Expected a valid DOM element.");if(void 0!==a&&"function"!=typeof a)throw new TypeError("Expected a valid callback function.");if(!document.body.contains(n))throw new Error("Element must be part of the visible DOM.");if(null!==t)throw new Error("Cannot scroll to element, a concurrent request is running.");a&&(t=a,null===i&&(i=this._onScroll.bind(this)),window.addEventListener("scroll",i)),o=e.offset(n).top,o<=50?o=0:o-=50,r=window.pageYOffset,window.scrollTo({left:0,top:o,behavior:"smooth"}),window.setTimeout(function(){r===window.pageYOffset&&this._onScroll()}.bind(this),100)},_onScroll:function(){null!==n&&window.clearTimeout(n),n=window.setTimeout(function(){null!==t&&t(),window.removeEventListener("scroll",i),t=null,n=null},100)}}}),define("WoltLabSuite/Core/Media/List/Upload",["Core","Dom/ChangeListener","Dom/Traverse","Dom/Util","Language","Ui/Confirmation","Ui/Notification","../Upload"],function(e,t,i,n,a,o,r,s){"use strict";function l(e,t,i){i=i||{},i.multiple=!1,s.call(this,e,t,i)}return e.inherit(l,s,{_createButton:function(){this._fileUpload=elCreate("input"),elAttr(this._fileUpload,"type","file"),elAttr(this._fileUpload,"name",this._options.name),this._fileUpload.addEventListener("change",this._upload.bind(this)),this._button=elCreate("p"),this._button.className="button uploadButton",this._button.innerHTML='<span class="icon icon16 fa-upload"></span> <span>'+a.get("wcf.global.button.upload")+"</span>",n.prepend(this._fileUpload,this._button),this._insertButton(),t.trigger()},_success:function(e,t){var n,s,l,c,d=i.childByClass(this._button,"icon");d.classList.remove("fa-spinner"),d.classList.add("fa-upload"),n=this._fileElements[e][0],s=elData(n,"internal-file-id"),l=t.returnValues.media[s],l?r.show(a.get("wcf.media.upload.success"),function(){window.location.reload()}):(c=t.returnValues.errors[s],c||(c={errorType:"uploadFailed",filename:elData(n,"filename")}),o.show({confirm:function(){},message:a.get("wcf.media.upload.error."+c.errorType,{filename:c.filename})}))},_upload:function(e,t,n){var a=l._super.prototype._upload.call(this,e,t,n),o=i.childByClass(this._button,"icon");return window.setTimeout(function(){o.classList.remove("fa-upload"),o.classList.add("fa-spinner")},500),a}}),l}),define("WoltLabSuite/Core/Controller/Media/List",["EventHandler","WoltLabSuite/Core/Controller/Clipboard","WoltLabSuite/Core/Media/Editor","WoltLabSuite/Core/Media/List/Upload"],function(e,t,i,n){"use strict";var a;return{init:function(o){var r,s,l,c;for(o=o||{},new n("uploadButton","mediaFile"),t.setup({hasMarkedItems:o.hasMarkedItems||!1,pageClassName:"wcf\\acp\\page\\MediaListPage"}),e.add("com.woltlab.wcf.clipboard","com.woltlab.wcf.media",this._clipboardAction.bind(this)),r=new WCF.Action.Delete("wcf\\data\\media\\MediaAction",".jsMediaRow"),r.setCallback(t.reload.bind(t)),a=new i({_editorSuccess:function(e,t){e.categoryID!=t&&window.setTimeout(function(){window.location.reload()},500)}}),s=elByClass("jsMediaEditButton"),l=0,c=s.length;l<c;l++)s[l].addEventListener(WCF_CLICK_EVENT,this._edit.bind(this))},_clipboardAction:function(e){var t,i,n,a,o;if(null!==e.responseData&&"com.woltlab.wcf.media.delete"===e.data.actionName){for(t=e.responseData.objectIDs,i=elByClass("jsMediaRow"),n=0;n<i.length;n++)a=i[n],o=~~elData(elByClass("jsClipboardItem",a)[0],"object-id"),t.indexOf(o)!==-1&&(elRemove(a),n--);i.length||window.location.reload()}},_edit:function(e){a.edit(elData(e.currentTarget,"object-id"))}}}),define("WoltLabSuite/Core/Controller/Notice/Dismiss",["Ajax"],function(e){"use strict";var t={setup:function(){var e,t,i,n=elByClass("jsDismissNoticeButton");if(n.length)for(e=this._click.bind(this),t=0,i=n.length;t<i;t++)n[t].addEventListener(WCF_CLICK_EVENT,e)},_click:function(t){var i=t.currentTarget;e.apiOnce({data:{actionName:"dismiss",className:"wcf\\data\\notice\\NoticeAction",objectIDs:[elData(i,"object-id")]},success:function(){elRemove(i.parentNode)}})}};return t}),define("WoltLabSuite/Core/Media/Manager/Search",["Ajax","Core","Dom/Traverse","Dom/Util","EventKey","Language","Ui/SimpleDropdown"],function(e,t,i,n,a,o,r){"use strict";function s(e){this._mediaManager=e,this._searchMode=!1,this._searchContainer=elByClass("mediaManagerSearch",e.getDialog())[0],this._input=elByClass("mediaManagerSearchField",e.getDialog())[0],this._input.addEventListener("keypress",this._keyPress.bind(this)),this._cancelButton=elByClass("mediaManagerSearchCancelButton",e.getDialog())[0],this._cancelButton.addEventListener(WCF_CLICK_EVENT,this._cancelSearch.bind(this))}return s.prototype={_ajaxSetup:function(){return{data:{actionName:"getSearchResultList",className:"wcf\\data\\media\\MediaAction",interfaceName:"wcf\\data\\ISearchAction"}}},_ajaxSuccess:function(e){this._mediaManager.setMedia(e.returnValues.media||{},e.returnValues.template||"",{pageCount:e.returnValues.pageCount||0,pageNo:e.returnValues.pageNo||0}),elByClass("dialogContent",this._mediaManager.getDialog())[0].scrollTop=0},_cancelSearch:function(){this._searchMode&&(this._searchMode=!1,this.resetSearch(),this._mediaManager.resetMedia())},_hideStringThresholdError:function(){var e=i.childByClass(this._input.parentNode.parentNode,"innerInfo");e&&elHide(e)},_keyPress:function(e){a.Enter(e)&&(e.preventDefault(),this._input.value.length>=this._mediaManager.getOption("minSearchLength")?(this._hideStringThresholdError(),this.search()):this._showStringThresholdError())},_showStringThresholdError:function(){var e=i.childByClass(this._input.parentNode.parentNode,"innerInfo");e?elShow(e):(e=elCreate("p"),e.className="innerInfo",e.textContent=o.get("wcf.media.search.info.searchStringThreshold"),n.insertAfter(e,this._input.parentNode))},hideSearch:function(){elHide(this._searchContainer)},resetSearch:function(){this._input.value=""},showSearch:function(){elShow(this._searchContainer)},search:function(t){"number"!=typeof t&&(t=1);var i=this._input.value;i&&this._input.value.length<this._mediaManager.getOption("minSearchLength")?(this._showStringThresholdError(),i=""):this._hideStringThresholdError(),this._searchMode=!0,e.api(this,{parameters:{categoryID:this._mediaManager.getCategoryId(),imagesOnly:this._mediaManager.getOption("imagesOnly"),mode:this._mediaManager.getMode(),pageNo:t,searchString:i}})}},s}),define("WoltLabSuite/Core/Media/Manager/Base",["Core","Dictionary","Dom/ChangeListener","Dom/Traverse","Dom/Util","EventHandler","Language","List","Permission","Ui/Dialog","Ui/Notification","WoltLabSuite/Core/Controller/Clipboard","WoltLabSuite/Core/Media/Editor","WoltLabSuite/Core/Media/Upload","WoltLabSuite/Core/Media/Manager/Search","StringUtil","WoltLabSuite/Core/Ui/Pagination"],function(e,t,i,n,a,o,r,s,l,c,d,u,h,p,f,m,g){"use strict";function _(n){this._options=e.extend({dialogTitle:r.get("wcf.media.manager"),imagesOnly:!1,minSearchLength:3},n),this._id="mediaManager"+b++,this._listItems=new t,this._media=new t,this._mediaManagerMediaList=null,this._search=null,this._upload=null,this._forceClipboard=!1,this._hadInitiallyMarkedItems=!1,this._pagination=null,l.get("admin.content.cms.canManageMedia")&&(this._mediaEditor=new h(this)),i.add("WoltLabSuite/Core/Media/Manager",this._addButtonEventListeners.bind(this))}var b;return b=0,_.prototype={_addButtonEventListeners:function(){var e,t,i,a,o;if(this._mediaManagerMediaList)for(e=n.childrenByTag(this._mediaManagerMediaList,"LI"),t=0,i=e.length;t<i;t++)a=e[t],l.get("admin.content.cms.canManageMedia")&&(o=elByClass("jsMediaEditButton",a)[0],o&&(o.classList.remove("jsMediaEditButton"),o.addEventListener(WCF_CLICK_EVENT,this._editMedia.bind(this))));
},_categoryChange:function(){this._search.search()},_click:function(e){e.preventDefault(),c.open(this)},_clipboardAction:function(e){var t,i,n;if("com.woltlab.wcf.media.delete"===e.data.actionName&&null!==e.responseData){for(t=e.responseData.objectIDs,i=0,n=t.length;i<n;i++)this.removeMedia(~~t[i],!0);d.show()}},_dialogClose:function(){(l.get("admin.content.cms.canManageMedia")||this._forceClipboard)&&u.hideEditor("com.woltlab.wcf.media")},_dialogInit:function(e,t){var i,n=t.returnValues.media||{};for(i in n)objOwns(n,i)&&this._media.set(~~i,n[i]);this._initPagination(~~t.returnValues.pageCount),this._hadInitiallyMarkedItems=t.returnValues.hasMarkedItems},_dialogSetup:function(){return{id:this._id,options:{onClose:this._dialogClose.bind(this),onShow:this._dialogShow.bind(this),title:this._options.dialogTitle},source:{after:this._dialogInit.bind(this),data:{actionName:"getManagementDialog",className:"wcf\\data\\media\\MediaAction",parameters:{mode:this.getMode(),imagesOnly:this._options.imagesOnly}}}}},_dialogShow:function(){var e,t,i,r,s,d,h;if(!this._mediaManagerMediaList){for(e=this.getDialog(),this._mediaManagerMediaList=elByClass("mediaManagerMediaList",e)[0],this._mediaCategorySelect=elBySel(".mediaManagerCategoryList > select",e),this._mediaCategorySelect&&this._mediaCategorySelect.addEventListener("change",this._categoryChange.bind(this)),t=n.childrenByTag(this._mediaManagerMediaList,"LI"),i=0,r=t.length;i<r;i++)s=t[i],this._listItems.set(~~elData(s,"object-id"),s);l.get("admin.content.cms.canManageMedia")&&(d=elByClass("mediaManagerMediaUploadButton",c.getDialog(this).dialog)[0],this._upload=new p(a.identify(d),a.identify(this._mediaManagerMediaList),{mediaManager:this}),h=new WCF.Action.Delete("wcf\\data\\media\\MediaAction",".mediaFile"),h._didTriggerEffect=function(e){this.removeMedia(elData(e[0],"object-id"))}.bind(this)),l.get("admin.content.cms.canManageMedia")||this._forceClipboard?(o.add("com.woltlab.wcf.clipboard","com.woltlab.wcf.media",this._clipboardAction.bind(this)),u.setup({hasMarkedItems:!!this._hadInitiallyMarkedItems,pageClassName:"menuManagerDialog-"+this.getMode()})):this._removeClipboardCheckboxes(),this._search=new f(this),t.length||this._search.hideSearch()}(l.get("admin.content.cms.canManageMedia")||this._forceClipboard)&&u.showEditor("com.woltlab.wcf.media")},_editMedia:function(e){if(!l.get("admin.content.cms.canManageMedia"))throw new Error("You are not allowed to edit media files.");c.close(this),this._mediaEditor.edit(this._media.get(~~elData(e.currentTarget,"object-id")))},_editorClose:function(){c.open(this)},_editorSuccess:function(e,t){var i,n,a,o;this._mediaCategorySelect&&(i=~~this._mediaCategorySelect.value,i&&(n=~~e.categoryID,t==n||t!=i&&n!=i||this._search.search())),c.open(this),this._media.set(~~e.mediaID,e),a=this._listItems.get(~~e.mediaID),o=elByClass("mediaTitle",a)[0],e.isMultilingual?o.textContent=e.title[LANGUAGE_ID]||e.filename:o.textContent=e.title[e.languageID]||e.filename},_initPagination:function(e,t){if(void 0===t&&(t=1),e>1){var i=elCreate("div");i.className="paginationBottom jsPagination",a.replaceElement(elBySel(".jsPagination",c.getDialog(this).content),i),this._pagination=new g(i,{activePage:t,callbackSwitch:this._search.search.bind(this._search),maxPage:e})}else this._pagination&&elHide(this._pagination.getElement())},_removeClipboardCheckboxes:function(){for(var e=elByClass("mediaCheckbox",this._mediaManagerMediaList);e.length;)elRemove(e[0])},_setMedia:function(o){var s,c,d,h,p;for(e.isPlainObject(o)?this._media=t.fromObject(o):this._media=o,s=n.nextByClass(this._mediaManagerMediaList,"info"),this._media.size?s&&elHide(s):(null===s&&(s=elCreate("p"),s.className="info",s.textContent=r.get("wcf.media.search.noResults")),elShow(s),a.insertAfter(s,this._mediaManagerMediaList)),c=n.childrenByTag(this._mediaManagerMediaList,"LI"),d=0,h=c.length;d<h;d++)p=c[d],this._media.has(elData(p,"object-id"))?elShow(p):elHide(p);i.trigger(),l.get("admin.content.cms.canManageMedia")||this._forceClipboard?u.reload():this._removeClipboardCheckboxes()},addMedia:function(e,t){e.languageID||(e.isMultilingual=1),this._media.set(~~e.mediaID,e),this._listItems.set(~~e.mediaID,t),1===this._listItems.size&&this._search.showSearch()},getCategoryId:function(){return this._mediaCategorySelect?this._mediaCategorySelect.value:0},getDialog:function(){return c.getDialog(this).dialog},getMode:function(){return""},getOption:function(e){return this._options[e]?this._options[e]:null},removeMedia:function(e){if(this._listItems.has(e)){try{elRemove(this._listItems.get(e))}catch(e){}this._listItems.delete(e),this._media.delete(e)}},resetMedia:function(){this._search.search()},setMedia:function(e,t,i){var a,o,r,s,l,c,d,u=!1;for(a in e)objOwns(e,a)&&(u=!0);if(o=[],u)for(r=elCreate("ul"),r.innerHTML=t,s=n.childrenByTag(r,"LI"),l=0,c=s.length;l<c;l++)d=s[l],this._listItems.has(~~elData(d,"object-id"))||(this._listItems.set(elData(d,"object-id"),d),this._mediaManagerMediaList.appendChild(d));this._initPagination(i.pageCount,i.pageNo),this._setMedia(e)},setupMediaElement:function(t,i){var a,o,s,c,d,u,h=n.childByClass(i,"mediaInformation"),p=elCreate("nav");p.className="jsMobileNavigation buttonGroupNavigation",h.parentNode.appendChild(p),a=elCreate("ul"),a.className="buttonList iconList",p.appendChild(a),o=elCreate("li"),o.className="mediaCheckbox",a.appendChild(o),s=elCreate("a"),o.appendChild(s),c=elCreate("label"),s.appendChild(c),d=elCreate("input"),d.className="jsClipboardItem",elAttr(d,"type","checkbox"),elData(d,"object-id",t.mediaID),c.appendChild(d),l.get("admin.content.cms.canManageMedia")&&(o=elCreate("li"),o.className="jsMediaEditButton",elData(o,"object-id",t.mediaID),a.appendChild(o),o.innerHTML='<a><span class="icon icon16 fa-pencil jsTooltip" title="'+r.get("wcf.global.button.edit")+'"></span> <span class="invisible">'+r.get("wcf.global.button.edit")+"</span></a>",o=elCreate("li"),o.className="jsDeleteButton",elData(o,"object-id",t.mediaID),u=e.getUuid(),elData(o,"confirm-message-html",m.unescapeHTML(r.get("wcf.media.delete.confirmMessage",{title:u})).replace(u,m.escapeHTML(t.filename))),a.appendChild(o),o.innerHTML='<a><span class="icon icon16 fa-times jsTooltip" title="'+r.get("wcf.global.button.delete")+'"></span> <span class="invisible">'+r.get("wcf.global.button.delete")+"</span></a>")}},_}),define("WoltLabSuite/Core/Media/Manager/Editor",["Core","Dictionary","Dom/Traverse","EventHandler","Language","Permission","Ui/Dialog","WoltLabSuite/Core/Controller/Clipboard","WoltLabSuite/Core/Media/Manager/Base"],function(e,t,i,n,a,o,r,s,l){"use strict";function c(i){var a,o,r,s,c,d;for(i=e.extend({callbackInsert:null},i),l.call(this,i),this._forceClipboard=!0,this._activeButton=null,a=this._options.editor?this._options.editor.core.toolbar()[0]:void 0,this._buttons=elByClass(this._options.buttonClass||"jsMediaEditorButton",a),o=0,r=this._buttons.length;o<r;o++)this._buttons[o].addEventListener(WCF_CLICK_EVENT,this._click.bind(this));this._mediaToInsert=new t,this._mediaToInsertByClipboard=!1,this._uploadData=null,this._uploadId=null,this._options.editor&&!this._options.editor.opts.woltlab.attachments&&(s=elData(this._options.editor.$editor[0],"element-id"),c=n.add("com.woltlab.wcf.redactor2","dragAndDrop_"+s,this._editorUpload.bind(this)),d=n.add("com.woltlab.wcf.redactor2","pasteFromClipboard_"+s,this._editorUpload.bind(this)),n.add("com.woltlab.wcf.redactor2","destory_"+s,function(){n.remove("com.woltlab.wcf.redactor2","dragAndDrop_"+s,c),n.remove("com.woltlab.wcf.redactor2","dragAndDrop_"+s,d)}),n.add("com.woltlab.wcf.media.upload","success",this._mediaUploaded.bind(this)))}return e.inherit(c,l,{_addButtonEventListeners:function(){var e,t,n,a,o;if(c._super.prototype._addButtonEventListeners.call(this),this._mediaManagerMediaList)for(e=i.childrenByTag(this._mediaManagerMediaList,"LI"),t=0,n=e.length;t<n;t++)a=e[t],o=elByClass("jsMediaInsertButton",a)[0],o&&(o.classList.remove("jsMediaInsertButton"),o.addEventListener(WCF_CLICK_EVENT,this._openInsertDialog.bind(this)))},_buildInsertDialog:function(){var e,t,i,n="",o=this._getThumbnailSizes();for(e=0,t=o.length;e<t;e++)n+='<option value="'+o[e]+'">'+a.get("wcf.media.insert.imageSize."+o[e])+"</option>";n+='<option value="original">'+a.get("wcf.media.insert.imageSize.original")+"</option>",i='<div class="section"><dl class="thumbnailSizeSelection"><dt>'+a.get("wcf.media.insert.imageSize")+'</dt><dd><select name="thumbnailSize">'+n+'</select></dd></dl></div><div class="formSubmit"><button class="buttonPrimary">'+a.get("wcf.global.button.insert")+"</button></div>",r.open({_dialogSetup:function(){return{id:this._getInsertDialogId(),options:{onClose:this._editorClose.bind(this),onSetup:function(e){elByClass("buttonPrimary",e)[0].addEventListener(WCF_CLICK_EVENT,this._insertMedia.bind(this));var t=elBySel(".thumbnailSizeSelection",e);elShow(t)}.bind(this),title:a.get("wcf.media.insert")},source:i}}.bind(this)})},_click:function(e){this._activeButton=e.currentTarget,c._super.prototype._click.call(this,e)},_clipboardAction:function(e){c._super.prototype._clipboardAction.call(this,e),"com.woltlab.wcf.media.insert"===e.data.actionName&&this.insertMedia(e.data.parameters.objectIDs,!0)},_dialogShow:function(){c._super.prototype._dialogShow.call(this),this._uploadData&&(this._uploadData.file?this._upload.uploadFile(this._uploadData.file):this._uploadId=this._upload.uploadBlob(this._uploadData.blob),this._uploadData=null)},_editorUpload:function(e){this._uploadData=e,r.open(this)},_getInsertDialogId:function(){var e="mediaInsert";return this._mediaToInsert.forEach(function(t,i){e+="-"+i}),e},_getThumbnailSizes:function(){var e,t,i,n,a=[],o=["small","medium","large"];for(i=0,n=o.length;i<n;i++)e=o[i],t=!0,this._mediaToInsert.forEach(function(i){i[e+"ThumbnailType"]||(t=!1)}),t&&a.push(e);return a},_insertMedia:function(e,i,n){var a,o,l;void 0===n&&(n=!0),a="separate",e&&(r.close(this._getInsertDialogId()),o=e.currentTarget.closest(".dialogContent"),i=elBySel("select[name=thumbnailSize]",o).value),null!==this._options.callbackInsert?this._options.callbackInsert(this._mediaToInsert,a,i):"separate"===a?(this._options.editor.buffer.set(),this._mediaToInsert.forEach(this._insertMediaItem.bind(this,i))):this._insertMediaGallery(),this._mediaToInsertByClipboard&&(l=[],this._mediaToInsert.forEach(function(e){l.push(e.mediaID)}),s.unmark("com.woltlab.wcf.media",l)),this._mediaToInsert=new t,this._mediaToInsertByClipboard=!1,n&&r.close(this)},_insertMediaGallery:function(){var e=[];this._mediaToInsert.forEach(function(t){e.push(t.mediaID)}),this._options.editor.buffer.set(),this._options.editor.insert.text("[wsmg='"+e.join(",")+"'][/wsmg]")},_insertMediaItem:function(e,t){var i,n,a,o,r;if(t.isImage){for(i=["small","medium","large","original"],n="",o=0;o<4&&(a=i[o],0==t[a+"ThumbnailHeight"]||(n=a,e!=a));o++);e=n,e||(e="original"),r=t.link,"original"!==e&&(r=t[e+"ThumbnailLink"]),this._options.editor.insert.html('<img src="'+r+'" class="woltlabSuiteMedia" data-media-id="'+t.mediaID+'" data-media-size="'+e+'">')}else this._options.editor.insert.text("[wsm='"+t.mediaID+"'][/wsm]")},_mediaUploaded:function(e){null!==this._uploadId&&this._upload===e.upload&&(this._uploadId===e.uploadId||Array.isArray(this._uploadId)&&this._uploadId.indexOf(e.uploadId)!==-1)&&(this._mediaToInsert=t.fromObject(e.media),this._insertMedia(null,"medium",!1),this._uploadId=null)},_openInsertDialog:function(e){this.insertMedia([~~elData(e.currentTarget,"object-id")])},insertMedia:function(e,i){var n,a,o,s,l,c;for(this._mediaToInsert=new t,this._mediaToInsertByClipboard=i||!1,n=!0,o=0,s=e.length;o<s;o++)a=this._media.get(e[o]),this._mediaToInsert.set(a.mediaID,a),a.isImage||(n=!1);n?(l=this._getThumbnailSizes(),l.length?(r.close(this),c=this._getInsertDialogId(),r.getDialog(c)?r.openStatic(c):this._buildInsertDialog()):this._insertMedia(void 0,"original")):this._insertMedia()},getMode:function(){return"editor"},setupMediaElement:function(e,t){var i,n;c._super.prototype.setupMediaElement.call(this,e,t),i=elBySel("nav.buttonGroupNavigation > ul",t),n=elCreate("li"),i.appendChild(n),n.innerHTML='<a><span class="icon icon16 fa-plus jsTooltip jsMediaInsertButton" data-object-id="'+e.mediaID+'" title="'+a.get("wcf.media.button.insert")+'"></span> <span class="invisible">'+a.get("wcf.media.button.insert")+"</span></a>"}}),c}),define("WoltLabSuite/Core/Media/Manager/Select",["Core","Dom/Traverse","Dom/Util","Language","ObjectMap","Ui/Dialog","WoltLabSuite/Core/Media/Manager/Base"],function(e,t,i,n,a,o,r){"use strict";function s(e){var t,n,o,s,l,c,d;for(r.call(this,e),this._activeButton=null,this._buttons=elByClass(this._options.buttonClass||"jsMediaSelectButton"),this._storeElements=new a,t=0,n=this._buttons.length;t<n;t++)o=this._buttons[t],s=elData(o,"store"),s&&(l=elById(s),l&&"INPUT"===l.tagName&&(this._buttons[t].addEventListener(WCF_CLICK_EVENT,this._click.bind(this)),this._storeElements.set(o,l),c=elCreate("p"),c.className="button",i.insertAfter(c,o),d=elCreate("span"),d.className="icon icon16 fa-times",c.appendChild(d),l.value||elHide(c),c.addEventListener(WCF_CLICK_EVENT,this._removeMedia.bind(this))))}return e.inherit(s,r,{_addButtonEventListeners:function(){var e,i,n,a,o;if(s._super.prototype._addButtonEventListeners.call(this),this._mediaManagerMediaList)for(e=t.childrenByTag(this._mediaManagerMediaList,"LI"),i=0,n=e.length;i<n;i++)a=e[i],o=elByClass("jsMediaSelectButton",a)[0],o&&(o.classList.remove("jsMediaSelectButton"),o.addEventListener(WCF_CLICK_EVENT,this._chooseMedia.bind(this)))},_chooseMedia:function(e){var t,i,n;if(null===this._activeButton)throw new Error("Media cannot be chosen if no button is active.");t=this._media.get(~~elData(e.currentTarget,"object-id")),elById(elData(this._activeButton,"store")).value=t.mediaID,i=elData(this._activeButton,"display"),i&&(n=elById(i),n&&(t.isImage?n.innerHTML='<img src="'+(t.smallThumbnailLink?t.smallThumbnailLink:t.link)+'" alt="'+(t.altText&&t.altText[LANGUAGE_ID]?t.altText[LANGUAGE_ID]:"")+'" />':n.innerHTML='<div class="box48" style="margin-bottom: 10px;"><span class="icon icon48 fa-file-o"></span><div class="containerHeadline"><h3>'+t.filename+"</h3><p>"+t.formattedFilesize+"</p></div></div>")),elShow(this._activeButton.nextElementSibling),o.close(this)},_click:function(e){var i,n,a,o,r;if(e.preventDefault(),this._activeButton=e.currentTarget,s._super.prototype._click.call(this,e),this._mediaManagerMediaList)for(i=this._storeElements.get(this._activeButton),n=t.childrenByTag(this._mediaManagerMediaList,"LI"),o=0,r=n.length;o<r;o++)a=n[o],i.value&&i.value==elData(a,"object-id")?a.classList.add("jsSelected"):a.classList.remove("jsSelected")},getMode:function(){return"select"},setupMediaElement:function(e,t){var i,a;s._super.prototype.setupMediaElement.call(this,e,t),i=elBySel("nav.buttonGroupNavigation > ul",t),a=elCreate("li"),a.className="jsMediaSelectButton",elData(a,"object-id",e.mediaID),i.appendChild(a),a.innerHTML='<a><span class="icon icon16 fa-check jsTooltip" title="'+n.get("wcf.media.button.select")+'"></span> <span class="invisible">'+n.get("wcf.media.button.select")+"</span></a>"},_removeMedia:function(e){var t,i,n,a;e.preventDefault(),t=e.currentTarget,elHide(t),i=t.previousElementSibling,elById(elData(i,"store")).value=0,n=elData(i,"display"),n&&(a=elById(n),a&&(a.innerHTML=""))}}),s}),define("WoltLabSuite/Core/Ui/Search/Input",["Ajax","Core","EventKey","Dom/Util","Ui/SimpleDropdown"],function(e,t,i,n,a){"use strict";function o(e,t){this.init(e,t)}return o.prototype={init:function(e,i){if(this._element=e,!(this._element instanceof Element))throw new TypeError("Expected a valid DOM element.");if("INPUT"!==this._element.nodeName||"search"!==this._element.type&&"text"!==this._element.type)throw new Error('Expected an input[type="text"].');this._activeItem=null,this._dropdownContainerId="",this._lastValue="",this._list=null,this._request=null,this._timerDelay=null,this._options=t.extend({ajax:{actionName:"getSearchResultList",className:"",interfaceName:"wcf\\data\\ISearchAction"},callbackDropdownInit:null,callbackSelect:null,delay:500,excludedSearchValues:[],minLength:3,noResultPlaceholder:"",preventSubmit:!1},i),elAttr(this._element,"autocomplete","off"),this._element.addEventListener("keydown",this._keydown.bind(this)),this._element.addEventListener("keyup",this._keyup.bind(this))},addExcludedSearchValues:function(e){this._options.excludedSearchValues.indexOf(e)===-1&&this._options.excludedSearchValues.push(e)},removeExcludedSearchValues:function(e){var t=this._options.excludedSearchValues.indexOf(e);t!==-1&&this._options.excludedSearchValues.splice(t,1)},_keydown:function(e){(null!==this._activeItem&&a.isOpen(this._dropdownContainerId)||this._options.preventSubmit)&&i.Enter(e)&&e.preventDefault(),(i.ArrowUp(e)||i.ArrowDown(e)||i.Escape(e))&&e.preventDefault()},_keyup:function(e){if(null!==this._activeItem){if(!a.isOpen(this._dropdownContainerId))return;if(i.ArrowUp(e))return e.preventDefault(),this._keyboardPreviousItem();if(i.ArrowDown(e))return e.preventDefault(),this._keyboardNextItem();if(i.Enter(e))return e.preventDefault(),this._keyboardSelectItem()}if(i.Escape(e))return void a.close(this._dropdownContainerId);var t=this._element.value.trim();if(this._lastValue!==t)return this._lastValue=t,t.length<this._options.minLength?void(this._dropdownContainerId&&(a.close(this._dropdownContainerId),this._activeItem=null)):void(this._options.delay?(null!==this._timerDelay&&window.clearTimeout(this._timerDelay),this._timerDelay=window.setTimeout(function(){this._search(t)}.bind(this),this._options.delay)):this._search(t))},_search:function(t){this._request&&this._request.abortPrevious(),this._request=e.api(this,this._getParameters(t))},_getParameters:function(e){return{parameters:{data:{excludedSearchValues:this._options.excludedSearchValues,searchString:e}}}},_keyboardNextItem:function(){this._activeItem.classList.remove("active"),this._activeItem.nextElementSibling?this._activeItem=this._activeItem.nextElementSibling:this._activeItem=this._list.children[0],this._activeItem.classList.add("active")},_keyboardPreviousItem:function(){this._activeItem.classList.remove("active"),this._activeItem.previousElementSibling?this._activeItem=this._activeItem.previousElementSibling:this._activeItem=this._list.children[this._list.childElementCount-1],this._activeItem.classList.add("active")},_keyboardSelectItem:function(){this._selectItem(this._activeItem)},_clickSelectItem:function(e){this._selectItem(e.currentTarget)},_selectItem:function(e){this._options.callbackSelect&&this._options.callbackSelect(e)===!1?this._element.value="":this._element.value=elData(e,"label"),this._activeItem=null,a.close(this._dropdownContainerId)},_ajaxSuccess:function(e){var t,i,o,r=!1;if(null===this._list?(this._list=elCreate("ul"),this._list.className="dropdownMenu",r=!0,"function"==typeof this._options.callbackDropdownInit&&this._options.callbackDropdownInit(this._list)):this._list.innerHTML="","object"==typeof e.returnValues){t=this._clickSelectItem.bind(this);for(o in e.returnValues)e.returnValues.hasOwnProperty(o)&&(i=this._createListItem(e.returnValues[o]),i.addEventListener(WCF_CLICK_EVENT,t),this._list.appendChild(i))}r&&(n.insertAfter(this._list,this._element),a.initFragment(this._element.parentNode,this._list),this._dropdownContainerId=n.identify(this._element.parentNode)),this._dropdownContainerId&&(this._activeItem=null,this._list.childElementCount||this._handleEmptyResult()!==!1?(a.open(this._dropdownContainerId),this._list.childElementCount&&~~elData(this._list.children[0],"object-id")&&(this._activeItem=this._list.children[0],this._activeItem.classList.add("active"))):a.close(this._dropdownContainerId))},_handleEmptyResult:function(){var e,t;return!!this._options.noResultPlaceholder&&(e=elCreate("li"),e.className="dropdownText",t=elCreate("span"),t.textContent=this._options.noResultPlaceholder,e.appendChild(t),this._list.appendChild(e),!0)},_createListItem:function(e){var t,i=elCreate("li");return elData(i,"object-id",e.objectID),elData(i,"label",e.label),t=elCreate("span"),t.textContent=e.label,i.appendChild(t),i},_ajaxSetup:function(){return{data:this._options.ajax}}},o}),define("WoltLabSuite/Core/Ui/User/Search/Input",["Core","WoltLabSuite/Core/Ui/Search/Input"],function(e,t){"use strict";function i(e,t){this.init(e,t)}return e.inherit(i,t,{init:function(t,n){var a=e.isPlainObject(n)&&n.includeUserGroups===!0;n=e.extend({ajax:{className:"wcf\\data\\user\\UserAction",parameters:{data:{includeUserGroups:a?1:0}}}},n),i._super.prototype.init.call(this,t,n)},_createListItem:function(e){var t,n=i._super.prototype._createListItem.call(this,e);return elData(n,"type",e.type),t=elCreate("div"),t.className="box16",t.innerHTML="group"===e.type?'<span class="icon icon16 fa-users"></span>':e.icon,t.appendChild(n.children[0]),n.appendChild(t),n}}),i}),define("WoltLabSuite/Core/Ui/Acl/Simple",["Language","StringUtil","Dom/ChangeListener","WoltLabSuite/Core/Ui/User/Search/Input"],function(e,t,i,n){"use strict";function a(e){this.init(e)}return a.prototype={init:function(e){this._prefix=e||"",this._build()},_build:function(){var e,t=elById(this._prefix+"aclInputContainer");elById(this._prefix+"aclAllowAll").addEventListener("change",function(){elHide(t)}),elById(this._prefix+"aclAllowAll_no").addEventListener("change",function(){elShow(t)}),this._list=elById(this._prefix+"aclAccessList"),this._list.addEventListener(WCF_CLICK_EVENT,this._removeItem.bind(this)),e=[],elBySelAll(".aclLabel",this._list,function(t){e.push(t.textContent)}),this._searchInput=new n(elById(this._prefix+"aclSearchInput"),{callbackSelect:this._select.bind(this),includeUserGroups:!0,excludedSearchValues:e,preventSubmit:!0}),this._aclListContainer=elById(this._prefix+"aclListContainer"),i.trigger()},_select:function(n){var a,o,r=elData(n,"type"),s=elData(n,"label"),l='<span class="icon icon16 fa-'+("group"===r?"users":"user")+'"></span>';return l+='<span class="aclLabel">'+t.escapeHTML(s)+"</span>",l+='<span class="icon icon16 fa-times pointer jsTooltip" title="'+e.get("wcf.global.button.delete")+'"></span>',l+='<input type="hidden" name="aclValues['+r+'][]" value="'+elData(n,"object-id")+'">',a=elCreate("li"),a.innerHTML=l,o=elBySel(".fa-user",this._list),null===o?this._list.appendChild(a):this._list.insertBefore(a,o.parentNode),elShow(this._aclListContainer),this._searchInput.addExcludedSearchValues(s),i.trigger(),!1},_removeItem:function(e){if(e.target.classList.contains("fa-times")){var t=elBySel(".aclLabel",e.target.parentNode);this._searchInput.removeExcludedSearchValues(t.textContent),elRemove(e.target.parentNode),0===this._list.childElementCount&&elHide(this._aclListContainer)}}},a}),define("WoltLabSuite/Core/Ui/Article/MarkAllAsRead",["Ajax"],function(e){"use strict";return{init:function(){elBySelAll(".markAllAsReadButton",void 0,function(e){e.addEventListener(WCF_CLICK_EVENT,this._click.bind(this))}.bind(this))},_click:function(t){t.preventDefault(),e.api(this)},_ajaxSuccess:function(){var e=elBySel(".mainMenu .active .badge");e&&elRemove(e),elBySelAll(".articleList .newMessageBadge",void 0,elRemove)},_ajaxSetup:function(){return{data:{actionName:"markAllAsRead",className:"wcf\\data\\article\\ArticleAction"}}}}}),define("WoltLabSuite/Core/Ui/Color/Picker",["Core"],function(e){"use strict";function t(e,t){this.init(e,t)}var i=function(e,t){return"object"==typeof window.WCF&&"function"==typeof window.WCF.ColorPicker?(i=function(e,t){var i=new window.WCF.ColorPicker(e);return"function"==typeof t.callbackSubmit&&i.setCallbackSubmit(t.callbackSubmit),i})(e,t):(0===n.length&&(window.__wcf_bc_colorPickerInit=function(){n.forEach(function(e){i(e[0],e[1])}),window.__wcf_bc_colorPickerInit=void 0,n=[]}),void n.push([e,t]))},n=[];return t.prototype={init:function(t,n){if(!(t instanceof Element))throw new TypeError("Expected a valid DOM element, use `UiColorPicker.fromSelector()` if you want to use a CSS selector.");this._options=e.extend({callbackSubmit:null},n),i(t,n)}},t.fromSelector=function(e){elBySelAll(e,void 0,function(e){new t(e)})},t}),define("WoltLabSuite/Core/Ui/Comment/Add",["Ajax","Core","EventHandler","Language","Dom/ChangeListener","Dom/Util","Dom/Traverse","Ui/Dialog","Ui/Notification","WoltLabSuite/Core/Ui/Scroll","EventKey","User","WoltLabSuite/Core/Controller/Captcha"],function(e,t,i,n,a,o,r,s,l,c,d,u,h){"use strict";function p(e){this.init(e)}return p.prototype={init:function(e){this._container=e,this._content=elBySel(".commentListAddComment",this._container),this._textarea=elBySel(".wysiwygTextarea",this._container),this._editor=null,this._loadingOverlay=null,this._content.addEventListener(WCF_CLICK_EVENT,function(e){this._content.classList.contains("collapsed")&&(e.preventDefault(),this._content.classList.remove("collapsed"),c.element(this._container,function(){window.jQuery(this._textarea).redactor("WoltLabCaret.endOfEditor")}.bind(this)))}.bind(this));var t=elBySel('button[data-type="save"]',this._container);t.addEventListener(WCF_CLICK_EVENT,this._submit.bind(this))},_submitGuestDialog:function(e){var i,a,s,l;if("keypress"!==e.type||d.Enter(e)){if(i=elBySel("input[name=username]",e.currentTarget.closest(".dialogContent")),""===i.value)return a=r.nextByClass(i,"innerError"),void(a||(a=elCreate("small"),a.className="innerError",a.innerText=n.get("wcf.global.form.error.empty"),o.insertAfter(a,i),i.closest("dl").classList.add("formError")));s={parameters:{data:{username:i.value}}},l=elData(e.currentTarget,"captcha-id"),h.has(l)&&(s=t.extend(s,h.getData(l))),this._submit(void 0,s)}},_submit:function(n,a){var o,r;n&&n.preventDefault(),this._validate()&&(this._showLoadingOverlay(),o=this._container.closest(".commentList"),r={data:{message:this._getEditor().code.get(),objectID:elData(o,"object-id"),objectTypeID:elData(o,"object-type-id")}},i.fire("com.woltlab.wcf.redactor2","submit_text",r.data),u.userId||a||(r.requireGuestDialog=!0),e.api(this,t.extend({parameters:r},a)))},_validate:function(){for(var e,t=elByClass("innerError",this._container);t.length;)elRemove(t[0]);return this._getEditor().utils.isEmpty()?(this.throwError(this._textarea,n.get("wcf.global.form.error.empty")),!1):(e={api:this,editor:this._getEditor(),message:this._getEditor().code.get(),valid:!0},i.fire("com.woltlab.wcf.redactor2","validate_text",e),e.valid!==!1)},throwError:function(e,t){var i=elCreate("small");i.className="innerError",i.textContent="empty"===t?n.get("wcf.global.form.error.empty"):t,o.insertAfter(i,e)},_showLoadingOverlay:function(){null===this._loadingOverlay&&(this._loadingOverlay=elCreate("div"),this._loadingOverlay.className="commentLoadingOverlay",this._loadingOverlay.innerHTML='<span class="icon icon96 fa-spinner"></span>'),this._content.classList.add("loading"),this._content.appendChild(this._loadingOverlay)},_hideLoadingOverlay:function(){this._content.classList.remove("loading");var e=elBySel(".commentLoadingOverlay",this._content);null!==e&&e.parentNode.removeChild(e)},_reset:function(){this._getEditor().code.set("<p>​</p>"),i.fire("com.woltlab.wcf.redactor2","reset_text"),document.activeElement&&document.activeElement.blur(),this._content.classList.add("collapsed")},_handleError:function(e){this.throwError(this._textarea,e.returnValues.errorType)},_getEditor:function(){if(null===this._editor){if("function"!=typeof window.jQuery)throw new Error("Unable to access editor, jQuery has not been loaded yet.");this._editor=window.jQuery(this._textarea).data("redactor")}return this._editor},_insertMessage:function(e){o.insertHtml(e.returnValues.template,this._container,"after"),l.show(n.get("wcf.global.success.add")),a.trigger()},_ajaxSuccess:function(e){if(!u.userId&&!e.returnValues.guestDialogID)throw new Error("Missing 'guestDialogID' return value for guest.");if(!u.userId&&e.returnValues.guestDialog){s.openStatic(e.returnValues.guestDialogID,e.returnValues.guestDialog,{closable:!1,title:n.get("wcf.global.confirmation.title")});var t=s.getDialog(e.returnValues.guestDialogID);elBySel("input[type=submit]",t.content).addEventListener(WCF_CLICK_EVENT,this._submitGuestDialog.bind(this)),elBySel("input[type=text]",t.content).addEventListener("keypress",this._submitGuestDialog.bind(this))}else this._insertMessage(e),u.userId||s.close(e.returnValues.guestDialogID),this._reset(),this._hideLoadingOverlay(),window.setTimeout(function(){c.element(this._container.nextElementSibling)}.bind(this),100)},_ajaxFailure:function(e){return this._hideLoadingOverlay(),null===e||void 0===e.returnValues||void 0===e.returnValues.errorType||(this._handleError(e),!1)},_ajaxSetup:function(){return{data:{actionName:"addComment",className:"wcf\\data\\comment\\CommentAction"},silent:!0}}},p}),define("WoltLabSuite/Core/Ui/Dropdown/Reusable",["Dictionary","Ui/SimpleDropdown"],function(e,t){"use strict";function i(e){if(!n.has(e))throw new Error("Unknown dropdown identifier '"+e+"'");return n.get(e)}var n=new e,a=0;return{init:function(e,i){if(!n.has(e)){var o=elCreate("div");o.id="reusableDropdownGhost"+a++,t.initFragment(o,i),n.set(e,o.id)}},getDropdownMenu:function(e){return t.getDropdownMenu(i(e))},registerCallback:function(e,n){t.registerCallback(i(e),n)},toggleDropdown:function(e,n){t.toggleDropdown(i(e),n)}}}),define("WoltLabSuite/Core/Ui/Comment/Edit",["Ajax","Core","Dictionary","Environment","EventHandler","Language","List","Dom/ChangeListener","Dom/Traverse","Dom/Util","Ui/Notification","Ui/ReusableDropdown","WoltLabSuite/Core/Ui/Scroll"],function(e,t,i,n,a,o,r,s,l,c,d,u,h){"use strict";function p(e){this.init(e)}return p.prototype={init:function(e){this._activeElement=null,this._callbackClick=null,this._comments=new r,this._container=e,this._editorContainer=null,this.rebuild(),s.add("Ui/Comment/Edit_"+c.identify(this._container),this.rebuild.bind(this))},rebuild:function(){elBySelAll(".comment",this._container,function(e){if(!this._comments.has(e)){if(elDataBool(e,"can-edit")){var t=elBySel(".jsCommentEditButton",e);null!==t&&(null===this._callbackClick&&(this._callbackClick=this._click.bind(this)),t.addEventListener(WCF_CLICK_EVENT,this._callbackClick))}this._comments.add(e)}}.bind(this))},_click:function(t){t.preventDefault(),null===this._activeElement?(this._activeElement=t.currentTarget.closest(".comment"),this._prepare(),e.api(this,{actionName:"beginEdit",objectIDs:[this._getObjectId(this._activeElement)]})):d.show("wcf.message.error.editorAlreadyInUse",null,"warning")},_prepare:function(){this._editorContainer=elCreate("div"),this._editorContainer.className="commentEditorContainer",this._editorContainer.innerHTML='<span class="icon icon48 fa-spinner"></span>';var e=elBySel(".commentContentContainer",this._activeElement);e.insertBefore(this._editorContainer,e.firstChild)},_showEditor:function(e){var t,i,o,r,s,l=this._getEditorId(),d=elBySel(".icon",this._editorContainer);elRemove(d),t=elCreate("div"),t.className="editorContainer",c.setInnerHtml(t,e.returnValues.template),this._editorContainer.appendChild(t),i=elBySel(".formSubmit",t),o=elBySel('button[data-type="save"]',i),o.addEventListener(WCF_CLICK_EVENT,this._save.bind(this)),r=elBySel('button[data-type="cancel"]',i),r.addEventListener(WCF_CLICK_EVENT,this._restoreMessage.bind(this)),a.add("com.woltlab.wcf.redactor","submitEditor_"+l,function(e){e.cancel=!0,this._save()}.bind(this)),s=elById(l),"redactor"===n.editor()?window.setTimeout(function(){h.element(this._activeElement)}.bind(this),250):s.focus()},_restoreMessage:function(){this._destroyEditor(),elRemove(this._editorContainer),this._activeElement=null},_save:function(){var t={data:{message:""}},i=this._getEditorId();a.fire("com.woltlab.wcf.redactor2","getText_"+i,t.data),this._validate(t)&&(a.fire("com.woltlab.wcf.redactor2","submit_"+i,t),e.api(this,{actionName:"save",objectIDs:[this._getObjectId(this._activeElement)],parameters:t}),this._hideEditor())},_validate:function(e){for(var t,i=elByClass("innerError",this._activeElement);i.length;)elRemove(i[0]);
return t={api:this,parameters:e,valid:!0},a.fire("com.woltlab.wcf.redactor2","validate_"+this._getEditorId(),t),t.valid!==!1},throwError:function(e,t){var i=elCreate("small");i.className="innerError",i.textContent=t,c.insertAfter(i,e)},_showMessage:function(e){c.setInnerHtml(elBySel(".commentContent .userMessage",this._editorContainer.parentNode),e.returnValues.message),this._restoreMessage(),d.show()},_hideEditor:function(){elHide(elBySel(".editorContainer",this._editorContainer));var e=elCreate("span");e.className="icon icon48 fa-spinner",this._editorContainer.appendChild(e)},_restoreEditor:function(){var e,t=elBySel(".fa-spinner",this._editorContainer);elRemove(t),e=elBySel(".editorContainer",this._editorContainer),null!==e&&elShow(e)},_destroyEditor:function(){a.fire("com.woltlab.wcf.redactor2","autosaveDestroy_"+this._getEditorId()),a.fire("com.woltlab.wcf.redactor2","destroy_"+this._getEditorId())},_getEditorId:function(){return"commentEditor"+this._getObjectId(this._activeElement)},_getObjectId:function(e){return~~elData(e,"object-id")},_ajaxFailure:function(e){var t,i=elBySel(".redactor-layer",this._editorContainer);return null===i?(this._restoreMessage(),!0):(this._restoreEditor(),!e||void 0===e.returnValues||void 0===e.returnValues.errorType||(t=elBySel(".innerError",this._editorContainer),null===t&&(t=elCreate("small"),t.className="innerError",c.insertAfter(t,i)),t.textContent=e.returnValues.errorType,!1))},_ajaxSuccess:function(e){switch(e.actionName){case"beginEdit":this._showEditor(e);break;case"save":this._showMessage(e)}},_ajaxSetup:function(){var e=~~elData(this._container,"object-type-id");return{data:{className:"wcf\\data\\comment\\CommentAction",parameters:{data:{objectTypeID:e}}},silent:!0}}},p}),define("WoltLabSuite/Core/Ui/ItemList/Filter",["Core","EventKey","Language","List","StringUtil","Dom/Util"],function(e,t,i,n,a,o){"use strict";function r(e,t){this.init(e,t)}return r.prototype={init:function(n,a){var o,r,s,l,c;if(this._value="",this._options=e.extend({callbackPrepareItem:void 0},a),o=elById(n),null===o)throw new Error("Expected a valid element id, '"+n+"' does not match anything.");if(!o.classList.contains("scrollableCheckboxList")&&"function"!=typeof this._options.callbackPrepareItem)throw new Error("Filter only works with elements with the CSS class 'scrollableCheckboxList'.");r=elCreate("div"),r.className="itemListFilter",o.parentNode.insertBefore(r,o),r.appendChild(o),s=elCreate("div"),s.className="inputAddon",l=elCreate("input"),l.className="long",l.type="text",l.placeholder=i.get("wcf.global.filter.placeholder"),l.addEventListener("keydown",function(e){t.Enter(e)&&e.preventDefault()}),l.addEventListener("keyup",this._keyup.bind(this)),c=elCreate("a"),c.href="#",c.className="button inputSuffix jsTooltip",c.title=i.get("wcf.global.filter.button.clear"),c.innerHTML='<span class="icon icon16 fa-times"></span>',c.addEventListener("click",function(e){e.preventDefault(),this._input.value="",this._keyup()}.bind(this)),s.appendChild(l),s.appendChild(c),r.appendChild(s),this._container=r,this._element=o,this._input=l,this._items=null,this._fragment=null},_buildItems:function(){var e,t,i;for(this._items=new n,e="function"==typeof this._options.callbackPrepareItem?this._options.callbackPrepareItem:this._prepareItem.bind(this),t=0,i=this._element.childElementCount;t<i;t++)this._items.add(e(this._element.children[t]))},_prepareItem:function(e){for(var t,i=e.children[0],n=i.textContent.trim(),a=i.children[0];a.nextSibling;)i.removeChild(a.nextSibling);return i.appendChild(document.createTextNode(" ")),t=elCreate("span"),t.textContent=n,i.appendChild(t),{item:e,span:t,text:n}},_keyup:function(){var e,t,n,r=this._input.value.trim();this._value!==r&&(null===this._fragment&&(this._fragment=document.createDocumentFragment(),this._element.style.setProperty("height",this._element.offsetHeight+"px","")),this._fragment.appendChild(this._element),null===this._items&&this._buildItems(),e=new RegExp("("+a.escapeRegExp(r)+")","i"),t=""===r,this._items.forEach(function(i){""===r?(i.span.textContent=i.text,elShow(i.item)):e.test(i.text)?(i.span.innerHTML=i.text.replace(e,"<u>$1</u>"),elShow(i.item),t=!0):elHide(i.item)}),this._container.insertBefore(this._fragment.firstChild,this._container.firstChild),this._value=r,n=this._container.nextElementSibling,n&&!n.classList.contains("innerError")&&(n=null),t?n&&elRemove(n):n||(n=elCreate("small"),n.className="innerError",n.textContent=i.get("wcf.global.filter.error.noMatches"),o.insertAfter(n,this._container)))}},r}),define("WoltLabSuite/Core/Ui/ItemList/User",["WoltLabSuite/Core/Ui/ItemList"],function(e){"use strict";return{init:function(t,i){e.init(t,[],{ajax:{className:"wcf\\data\\user\\UserAction",parameters:{data:{includeUserGroups:~~i.includeUserGroups}}},callbackChange:"function"==typeof i.callbackChange?i.callbackChange:null,excludedSearchValues:Array.isArray(i.excludedSearchValues)?i.excludedSearchValues:[],isCSV:!0,maxItems:~~i.maxItems||-1,restricted:!0})},getValues:function(t){return e.getValues(t)}}}),define("WoltLabSuite/Core/Ui/User/List",["Ajax","Core","Dictionary","Dom/Util","Ui/Dialog","WoltLabSuite/Core/Ui/Pagination"],function(e,t,i,n,a,o){"use strict";function r(e){this.init(e)}return r.prototype={init:function(e){this._cache=new i,this._pageCount=0,this._pageNo=1,this._options=t.extend({className:"",dialogTitle:"",parameters:{}},e)},open:function(){this._pageNo=1,this._showPage()},_showPage:function(t){var i,n;if("number"==typeof t&&(this._pageNo=~~t),0!==this._pageCount&&(this._pageNo<1||this._pageNo>this._pageCount))throw new RangeError("pageNo must be between 1 and "+this._pageCount+" ("+this._pageNo+" given).");this._cache.has(this._pageNo)?(i=a.open(this,this._cache.get(this._pageNo)),this._pageCount>1&&(n=elBySel(".jsPagination",i.content),null!==n&&new o(n,{activePage:this._pageNo,maxPage:this._pageCount,callbackSwitch:this._showPage.bind(this)}))):(this._options.parameters.pageNo=this._pageNo,e.api(this,{parameters:this._options.parameters}))},_ajaxSuccess:function(e){void 0!==e.returnValues.pageCount&&(this._pageCount=~~e.returnValues.pageCount),this._cache.set(this._pageNo,e.returnValues.template),this._showPage()},_ajaxSetup:function(){return{data:{actionName:"getGroupedUserList",className:this._options.className,interfaceName:"wcf\\data\\IGroupedUserListAction"}}},_dialogSetup:function(){return{id:n.getUniqueId(),options:{title:this._options.dialogTitle},source:null}}},r}),define("WoltLabSuite/Core/Ui/Like/Handler",["Ajax","Core","Dictionary","Language","ObjectMap","StringUtil","Dom/ChangeListener","Dom/Util","Ui/Dialog","WoltLabSuite/Core/Ui/User/List","User"],function(e,t,i,n,a,o,r,s,l,c,d){"use strict";function u(e,t){this.init(e,t)}var h=!1;return u.prototype={init:function(e,i){if(""===i.containerSelector)throw new Error("[WoltLabSuite/Core/Ui/Like/Handler] Expected a non-empty string for option 'containerSelector'.");this._containers=new a,this._details=new a,this._objectType=e,this._options=t.extend({badgeClassNames:"",isSingleItem:!1,markListItemAsActive:!1,renderAsButton:!0,summaryPrepend:!0,summaryUseIcon:!0,canDislike:!1,canLike:!1,canLikeOwnContent:!1,canViewSummary:!1,badgeContainerSelector:".messageHeader .messageStatus",buttonAppendToSelector:".messageFooter .messageFooterButtons",buttonBeforeSelector:"",containerSelector:"",summarySelector:".messageFooterGroup"},i),this.initContainers(i,e),r.add("WoltLabSuite/Core/Ui/Like/Handler-"+e,this.initContainers.bind(this))},initContainers:function(){var e,t,i,n,a=elBySelAll(this._options.containerSelector),o=!1;for(i=0,n=a.length;i<n;i++)e=a[i],this._containers.has(e)||(t={badge:null,dislikeButton:null,likeButton:null,summary:null,dislikes:~~elData(e,"like-dislikes"),liked:~~elData(e,"like-liked"),likes:~~elData(e,"like-likes"),objectId:~~elData(e,"object-id"),users:JSON.parse(elData(e,"like-users"))},this._containers.set(e,t),this._buildWidget(e,t),o=!0);o&&r.trigger()},_buildWidget:function(e,t){var i,n,a,o,r,l,c,u,h;if(this._options.canViewSummary&&(o=this._options.isSingleItem?elBySel(this._options.summarySelector):elBySel(this._options.summarySelector,e),null!==o&&(i=elCreate("div"),i.className="likesSummary",this._options.summaryUseIcon&&(a=elCreate("span"),a.className="icon icon16 fa-thumbs-o-up",i.appendChild(a)),n=elCreate("span"),n.className="likesSummaryContent",n.addEventListener(WCF_CLICK_EVENT,this._showSummary.bind(this,e)),i.appendChild(n),this._options.summaryPrepend?s.prepend(i,o):o.appendChild(i),t.summary=n,this._updateSummary(e))),c=this._options.isSingleItem?elBySel(this._options.badgeContainerSelector):elBySel(this._options.badgeContainerSelector,e),null!==c&&(r=elCreate("a"),r.href="#",r.className="wcfLikeCounter jsTooltip"+(this._options.badgeClassNames?" "+this._options.badgeClassNames:""),r.addEventListener(WCF_CLICK_EVENT,this._showSummary.bind(this,e)),"OL"===c.nodeName||"UL"===c.nodeName?(l=elCreate("li"),l.appendChild(r),c.appendChild(l)):c.appendChild(r),t.badge=r,this._updateBadge(e)),this._options.canLike&&(d.userId!=elData(e,"user-id")||this._options.canLikeOwnContent)){if(u=this._options.buttonAppendToSelector?this._options.isSingleItem?elBySel(this._options.buttonAppendToSelector):elBySel(this._options.buttonAppendToSelector,e):null,h=this._options.buttonBeforeSelector?this._options.isSingleItem?elBySel(this._options.buttonBeforeSelector):elBySel(this._options.buttonBeforeSelector,e):null,null===h&&null===u)throw new Error("Unable to find insert location for like/dislike buttons.");t.likeButton=this._createButton(e,!0,h,u),this._options.canDislike&&(t.dislikeButton=this._createButton(e,!1,h,u)),this._updateActiveState(e)}},_createButton:function(e,t,i,a){var o,r=n.get("wcf.like.button."+(t?"like":"dislike")),s=elCreate("li");return s.className="wcf"+(t?"Like":"Dislike")+"Button",o=elCreate("a"),o.className="jsTooltip"+(this._options.renderAsButton?" button":""),o.href="#",o.title=r,o.innerHTML='<span class="icon icon16 fa-thumbs-o-'+(t?"up":"down")+'"></span> <span class="invisible">'+r+"</span>",o.addEventListener(WCF_CLICK_EVENT,this._like.bind(this,e)),elData(o,"type",t?"like":"dislike"),s.appendChild(o),i?i.parentNode.insertBefore(s,i):a.appendChild(s),o},_showSummary:function(e,t){t.preventDefault(),this._details.has(e)||this._details.set(e,new c({className:"wcf\\data\\like\\LikeAction",dialogTitle:n.get("wcf.like.details"),parameters:{data:{containerID:s.identify(e),objectID:this._containers.get(e).objectId,objectType:this._objectType}}})),this._details.get(e).open()},_updateBadge:function(e){var t,i,a=this._containers.get(e);0===a.likes&&0===a.dislikes?elHide(a.badge):(elShow(a.badge),a.badge.classList.remove("likeCounterLiked","likeCounterDisliked"),t=a.likes-a.dislikes,i='<span class="icon icon16 fa-thumbs-o-'+(t<0?"down":"up")+'"></span><span class="wcfLikeValue">',t>0?(i+="+"+o.addThousandsSeparator(t),a.badge.classList.add("likeCounterLiked")):t<0?(i+="−"+o.addThousandsSeparator(Math.abs(t)),a.badge.classList.add("likeCounterDisliked")):i+="±0",a.badge.innerHTML=i+"</span>",a.badge.setAttribute("data-tooltip",n.get("wcf.like.tooltip",{dislikes:a.dislikes,likes:a.likes})))},_updateSummary:function(e){var t,i,a,o,r,s=this._containers.get(e);if(s.likes){for(elShow(s.summary.parentNode),t=[],i=Object.keys(s.users),a=0,o=i.length;a<o;a++)t.push(s.users[i[a]]);r=s.likes-t.length,s.summary.innerHTML=n.get("wcf.like.summary",{users:t,others:r})}else elHide(s.summary.parentNode)},_updateActiveState:function(e){var t,i=this._containers.get(e),n=this._options.markListItemAsActive?i.likeButton.parentNode:i.likeButton;n.classList.remove("active"),1===i.liked&&n.classList.add("active"),this._options.canDislike&&(t=this._options.markListItemAsActive?i.dislikeButton.parentNode:i.dislikeButton,t.classList.remove("active"),i.liked===-1&&t.classList.add("active"))},_like:function(t,i){i.preventDefault(),h||(h=!0,e.api(this,{actionName:elData(i.currentTarget,"type"),parameters:{data:{containerID:s.identify(t),objectID:this._containers.get(t).objectId,objectType:this._objectType}}}))},_ajaxSuccess:function(e){var t,i,n,a,r=elById(e.returnValues.containerID),s=this._containers.get(r);if(void 0!==s){for(s.dislikes=~~e.returnValues.dislikes,s.likes=~~e.returnValues.likes,t=e.returnValues.users,s.users=[],i=Object.keys(t),n=0,a=i.length;n<a;n++)s.users.push(o.escapeHTML(t[i[n]].username));1==e.returnValues.isLiked?s.liked=1:1==e.returnValues.isDisliked?s.liked=-1:s.liked=0,this._updateBadge(r),this._options.canViewSummary&&this._updateSummary(r),this._updateActiveState(r),this._details.delete(r),h=!1}},_ajaxSetup:function(){return{data:{className:"wcf\\data\\like\\LikeAction"}}}},u}),define("WoltLabSuite/Core/Ui/Message/InlineEditor",["Ajax","Core","Dictionary","Environment","EventHandler","Language","ObjectMap","Dom/ChangeListener","Dom/Traverse","Dom/Util","Ui/Notification","Ui/ReusableDropdown","WoltLabSuite/Core/Ui/Scroll"],function(e,t,i,n,a,o,r,s,l,c,d,u,h){"use strict";function p(e){this.init(e)}return p.prototype={init:function(e){this._activeDropdownElement=null,this._activeElement=null,this._dropdownMenu=null,this._elements=new r,this._options=t.extend({canEditInline:!1,className:"",containerId:0,dropdownIdentifier:"",editorPrefix:"messageEditor",messageSelector:".jsMessage",quoteManager:null},e),this.rebuild(),s.add("Ui/Message/InlineEdit_"+this._options.className,this.rebuild.bind(this))},rebuild:function(){var e,t,i,n,a,o,r,s,l=elBySelAll(this._options.messageSelector);for(n=0,a=l.length;n<a;n++)i=l[n],this._elements.has(i)||(e=elBySel(".jsMessageEditButton",i),null!==e&&(t=elDataBool(i,"can-edit"),this._options.canEditInline||elDataBool(i,"can-edit-inline")?(e.addEventListener(WCF_CLICK_EVENT,this._clickDropdown.bind(this,i)),e.classList.add("jsDropdownEnabled"),t&&e.addEventListener("dblclick",this._click.bind(this,i))):t&&e.addEventListener(WCF_CLICK_EVENT,this._click.bind(this,i))),o=elBySel(".messageBody",i),r=elBySel(".messageFooter",i),s=elBySel(".messageHeader",i),this._elements.set(i,{button:e,messageBody:o,messageBodyEditor:null,messageFooter:r,messageFooterButtons:elBySel(".messageFooterButtons",r),messageHeader:s,messageText:elBySel(".messageText",o)}))},_click:function(t,i){null===t&&(t=this._activeDropdownElement),i&&i.preventDefault(),null===this._activeElement?(this._activeElement=t,this._prepare(),e.api(this,{actionName:"beginEdit",parameters:{containerID:this._options.containerId,objectID:this._getObjectId(t)}})):d.show("wcf.message.error.editorAlreadyInUse",null,"warning")},_clickDropdown:function(e,i){var n,o;i.preventDefault(),n=i.currentTarget,n.classList.contains("dropdownToggle")||(n.classList.add("dropdownToggle"),n.parentNode.classList.add("dropdown"),function(e,t){e.addEventListener(WCF_CLICK_EVENT,function(i){i.preventDefault(),i.stopPropagation(),this._activeDropdownElement=t,u.toggleDropdown(this._options.dropdownIdentifier,e)}.bind(this))}.bind(this)(n,e),null===this._dropdownMenu&&(this._dropdownMenu=elCreate("ul"),this._dropdownMenu.className="dropdownMenu",o=this._dropdownGetItems(),a.fire("com.woltlab.wcf.inlineEditor","dropdownInit_"+this._options.dropdownIdentifier,{items:o}),this._dropdownBuild(o),u.init(this._options.dropdownIdentifier,this._dropdownMenu),u.registerCallback(this._options.dropdownIdentifier,this._dropdownToggle.bind(this))),setTimeout(function(){t.triggerEvent(n,WCF_CLICK_EVENT)},10))},_dropdownBuild:function(e){var t,i,n,a,r,s=this._clickDropdownItem.bind(this);for(a=0,r=e.length;a<r;a++)t=e[a],n=elCreate("li"),elData(n,"item",t.item),"divider"===t.item?n.className="dropdownDivider":(i=elCreate("span"),i.textContent=o.get(t.label),n.appendChild(i),"editItem"===t.item?n.addEventListener(WCF_CLICK_EVENT,this._click.bind(this,null)):n.addEventListener(WCF_CLICK_EVENT,s)),this._dropdownMenu.appendChild(n)},_dropdownToggle:function(e,t){var i,n,o,r,s,l=this._elements.get(this._activeDropdownElement);if(l.button.parentNode.classList["open"===t?"add":"remove"]("dropdownOpen"),l.messageFooterButtons.classList["open"===t?"add":"remove"]("forceVisible"),"open"===t)for(i=this._dropdownOpen(),a.fire("com.woltlab.wcf.inlineEditor","dropdownOpen_"+this._options.dropdownIdentifier,{element:this._activeDropdownElement,visibility:i}),r=!1,s=0;s<this._dropdownMenu.childElementCount;s++)o=this._dropdownMenu.children[s],n=elData(o,"item"),"divider"===n?r?(elShow(o),r=!1):elHide(o):objOwns(i,n)&&i[n]===!1?(elHide(o),s>0&&s+1===this._dropdownMenu.childElementCount&&"divider"===elData(o.previousElementSibling,"item")&&elHide(o.previousElementSibling)):(elShow(o),r=!0)},_dropdownGetItems:function(){},_dropdownOpen:function(){},_dropdownSelect:function(e){},_clickDropdownItem:function(e){e.preventDefault(),this._dropdownSelect(elData(e.currentTarget,"item"))},_prepare:function(){var e,t=this._elements.get(this._activeElement),i=elCreate("div");i.className="messageBody editor",t.messageBodyEditor=i,e=elCreate("span"),e.className="icon icon48 fa-spinner",i.appendChild(e),c.insertAfter(i,t.messageBody),elHide(t.messageBody)},_showEditor:function(e){var t,i,o,r,s,d,u,p=this._getEditorId(),f=this._elements.get(this._activeElement);this._activeElement.classList.add("jsInvalidQuoteTarget"),t=l.childByClass(f.messageBodyEditor,"icon"),elRemove(t),i=f.messageBodyEditor,o=elCreate("div"),o.className="editorContainer",c.setInnerHtml(o,e.returnValues.template),i.appendChild(o),r=elBySel(".formSubmit",o),s=elBySel('button[data-type="save"]',r),s.addEventListener(WCF_CLICK_EVENT,this._save.bind(this)),d=elBySel('button[data-type="cancel"]',r),d.addEventListener(WCF_CLICK_EVENT,this._restoreMessage.bind(this)),a.add("com.woltlab.wcf.redactor","submitEditor_"+p,function(e){e.cancel=!0,this._save()}.bind(this)),elHide(f.messageHeader),elHide(f.messageFooter),u=elById(p),"redactor"===n.editor()?window.setTimeout(function(){this._options.quoteManager&&this._options.quoteManager.setAlternativeEditor(p),h.element(this._activeElement)}.bind(this),250):u.focus()},_restoreMessage:function(){var e=this._elements.get(this._activeElement);this._destroyEditor(),elRemove(e.messageBodyEditor),e.messageBodyEditor=null,elShow(e.messageBody),elShow(e.messageFooter),elShow(e.messageHeader),this._activeElement.classList.remove("jsInvalidQuoteTarget"),this._activeElement=null,this._options.quoteManager&&this._options.quoteManager.clearAlternativeEditor()},_save:function(){var t={containerID:this._options.containerId,data:{message:""},objectID:this._getObjectId(this._activeElement),removeQuoteIDs:this._options.quoteManager?this._options.quoteManager.getQuotesMarkedForRemoval():[]},i=this._getEditorId(),n=elById("settings_"+i);n&&elBySelAll("input, select, textarea",n,function(e){if("INPUT"!==e.nodeName||"checkbox"!==e.type&&"radio"!==e.type||e.checked){var i=e.name;if(t.hasOwnProperty(i))throw new Error("Variable overshadowing, key '"+i+"' is already present.");t[i]=e.value.trim()}}),a.fire("com.woltlab.wcf.redactor2","getText_"+i,t.data),this._validate(t)&&(a.fire("com.woltlab.wcf.redactor2","submit_"+i,t),e.api(this,{actionName:"save",parameters:t}),this._hideEditor())},_validate:function(e){for(var t,i=elByClass("innerError",this._activeElement);i.length;)elRemove(i[0]);return t={api:this,parameters:e,valid:!0},a.fire("com.woltlab.wcf.redactor2","validate_"+this._getEditorId(),t),t.valid!==!1},throwError:function(e,t){var i=elCreate("small");i.className="innerError",i.textContent=t,c.insertAfter(i,e)},_showMessage:function(e){var t,i,n,o,r,s,u=this._activeElement,h=this._getEditorId(),p=this._elements.get(u),f=elBySelAll(".attachmentThumbnailList, .attachmentFileList",p.messageFooter);if(c.setInnerHtml(l.childByClass(p.messageBody,"messageText"),e.returnValues.message),"string"==typeof e.returnValues.attachmentList){for(t=0,i=f.length;t<i;t++)elRemove(f[t]);for(n=elCreate("div"),c.setInnerHtml(n,e.returnValues.attachmentList);n.childNodes.length;)o=n.childNodes[n.childNodes.length-1],p.messageFooter.insertBefore(o,p.messageFooter.firstChild)}"string"==typeof e.returnValues.poll&&(r=elBySel(".pollContainer",p.messageBody),null!==r&&elRemove(r.parentNode),s=elCreate("div"),s.className="jsInlineEditorHideContent",c.setInnerHtml(s,e.returnValues.poll),c.prepend(s,p.messageBody)),this._restoreMessage(),this._updateHistory(this._getHash(this._getObjectId(u))),a.fire("com.woltlab.wcf.redactor","autosaveDestroy_"+h),d.show(),this._options.quoteManager&&(this._options.quoteManager.clearAlternativeEditor(),this._options.quoteManager.countQuotes())},_hideEditor:function(){var e,t=this._elements.get(this._activeElement);elHide(l.childByClass(t.messageBodyEditor,"editorContainer")),e=elCreate("span"),e.className="icon icon48 fa-spinner",t.messageBodyEditor.appendChild(e)},_restoreEditor:function(){var e,t=this._elements.get(this._activeElement),i=elBySel(".fa-spinner",t.messageBodyEditor);elRemove(i),e=l.childByClass(t.messageBodyEditor,"editorContainer"),null!==e&&elShow(e)},_destroyEditor:function(){a.fire("com.woltlab.wcf.redactor2","autosaveDestroy_"+this._getEditorId()),a.fire("com.woltlab.wcf.redactor2","destroy_"+this._getEditorId())},_getHash:function(e){return"#message"+e},_updateHistory:function(e){window.location.hash=e},_getEditorId:function(){return this._options.editorPrefix+this._getObjectId(this._activeElement)},_getObjectId:function(e){return~~elData(e,"object-id")},_ajaxFailure:function(e){var t,i=this._elements.get(this._activeElement),n=elBySel(".redactor-layer",i.messageBodyEditor);return null===n?(this._restoreMessage(),!0):(this._restoreEditor(),!e||void 0===e.returnValues||void 0===e.returnValues.errorType||(t=elBySel(".innerError",i.messageBodyEditor),null===t&&(t=elCreate("small"),t.className="innerError",c.insertAfter(t,n)),t.textContent=e.returnValues.errorType,!1))},_ajaxSuccess:function(e){switch(e.actionName){case"beginEdit":this._showEditor(e);break;case"save":this._showMessage(e)}},_ajaxSetup:function(){return{data:{className:this._options.className,interfaceName:"wcf\\data\\IMessageInlineEditorAction"},silent:!0}},legacyEdit:function(e){this._click(elById(e),null)}},p}),define("WoltLabSuite/Core/Ui/Message/Manager",["Ajax","Core","Dictionary","Language","Dom/ChangeListener","Dom/Util"],function(e,t,i,n,a,o){"use strict";function r(e){this.init(e)}return r.prototype={init:function(e){this._elements=null,this._options=t.extend({className:"",selector:""},e),this.rebuild(),a.add("Ui/Message/Manager"+this._options.className,this.rebuild.bind(this))},rebuild:function(){var e,t,n,a;for(this._elements=new i,t=elBySelAll(this._options.selector),n=0,a=t.length;n<a;n++)e=t[n],this._elements.set(elData(e,"object-id"),e)},getPermission:function(e,t){t="can-"+this._getAttributeName(t);var i=this._elements.get(e);if(void 0===i)throw new Error("Unknown object id '"+e+"' for selector '"+this._options.selector+"'");return elDataBool(i,t)},getPropertyValue:function(e,t,i){var n=this._elements.get(e);if(void 0===n)throw new Error("Unknown object id '"+e+"' for selector '"+this._options.selector+"'");return window[i?"elDataBool":"elData"](n,this._getAttributeName(t))},update:function(t,i,n){e.api(this,{actionName:i,parameters:n||{},objectIDs:[t]})},updateItems:function(e,t){var i,n,a,o;for(Array.isArray(e)||(e=[e]),n=0,a=e.length;n<a;n++)if(i=this._elements.get(e[n]),void 0!==i)for(o in t)t.hasOwnProperty(o)&&this._update(i,o,t[o])},updateAllItems:function(e){var t=[];this._elements.forEach(function(e,i){t.push(i)}.bind(this)),this.updateItems(t,e)},setNote:function(e,t,i){var n,a,o=this._elements.get(e);if(void 0===o)throw new Error("Unknown object id '"+e+"' for selector '"+this._options.selector+"'");n=elBySel(".messageFooterNotes",o),a=elBySel("."+t,n),i?(null===a&&(a=elCreate("p"),a.className="messageFooterNote "+t,n.appendChild(a)),a.innerHTML=i):null!==a&&elRemove(a)},_update:function(e,t,i){elData(e,this._getAttributeName(t),i);var n=1==i||i===!0||"true"===i;this._updateState(e,t,i,n)},_updateState:function(e,t,i,n){switch(t){case"isDeleted":e.classList[n?"add":"remove"]("messageDeleted"),this._toggleMessageStatus(e,"jsIconDeleted","wcf.message.status.deleted","red",n);break;case"isDisabled":e.classList[n?"add":"remove"]("messageDisabled"),this._toggleMessageStatus(e,"jsIconDisabled","wcf.message.status.disabled","green",n)}},_toggleMessageStatus:function(e,t,i,a,r){var s,l,c,d=elBySel(".messageStatus",e);if(null===d){if(s=elBySel(".messageHeaderMetaData",e),null===s)return;d=elCreate("ul"),d.className="messageStatus",o.insertAfter(d,s)}if(l=elBySel("."+t,d),r){if(null!==l)return;l=elCreate("span"),l.className="badge label "+a+" "+t,l.textContent=n.get(i),c=elCreate("li"),c.appendChild(l),d.appendChild(c)}else{if(null===l)return;elRemove(l.parentNode)}},_getAttributeName:function(e){var t,i,n,a,o;if(e.indexOf("-")!==-1)return e;for(t="",n=e.split(/([A-Z][a-z]+)/),a=0,o=n.length;a<o;a++)i=n[a],i.length&&(t.length&&(t+="-"),t+=i.toLowerCase());return t},_ajaxSuccess:function(){throw new Error("Method _ajaxSuccess() must be implemented by deriving functions.")},_ajaxSetup:function(){return{data:{className:this._options.className}}}},r}),define("WoltLabSuite/Core/Ui/Message/Reply",["Ajax","Core","EventHandler","Language","Dom/ChangeListener","Dom/Util","Dom/Traverse","Ui/Dialog","Ui/Notification","WoltLabSuite/Core/Ui/Scroll","EventKey","User","WoltLabSuite/Core/Controller/Captcha"],function(e,t,i,n,a,o,r,s,l,c,d,u,h){"use strict";function p(e){this.init(e)}return p.prototype={init:function(e){var i,n,a,o,r;for(this._options=t.extend({ajax:{className:""},quoteManager:null,successMessage:"wcf.global.success.add"},e),this._container=elById("messageQuickReply"),this._content=elBySel(".messageContent",this._container),this._textarea=elById("text"),this._editor=null,this._loadingOverlay=null,elBySel(".message",this._container).classList.add("jsInvalidQuoteTarget"),i=this._submit.bind(this),n=elBySel('button[data-type="save"]'),n.addEventListener(WCF_CLICK_EVENT,i),a=elBySelAll(".jsQuickReply"),o=0,r=a.length;o<r;o++)a[o].addEventListener(WCF_CLICK_EVENT,function(e){e.preventDefault(),this._getEditor().WoltLabReply.showEditor(),c.element(this._container,function(){this._getEditor().WoltLabCaret.endOfEditor()}.bind(this))}.bind(this))},_submitGuestDialog:function(e){var i,a,s,l,c;if("keypress"!==e.type||d.Enter(e)){if(i=elBySel("input[name=username]",e.currentTarget.closest(".dialogContent")),""===i.value)return a=r.nextByClass(i,"innerError"),void(a||(a=elCreate("small"),a.className="innerError",a.innerText=n.get("wcf.global.form.error.empty"),o.insertAfter(a,i),i.closest("dl").classList.add("formError")));s={parameters:{data:{username:i.value}}},l=elData(e.currentTarget,"captcha-id"),h.has(l)?(c=h.getData(l),c instanceof Promise?c.then(function(e){s=t.extend(s,e),this._submit(void 0,s)}.bind(this)):(s=t.extend(s,h.getData(l)),this._submit(void 0,s))):this._submit(void 0,s)}},_submit:function(n,a){var r,s;n&&n.preventDefault(),this._validate()&&(this._showLoadingOverlay(),r=o.getDataAttributes(this._container,"data-",!0,!0),r.data={message:this._getEditor().code.get()},r.removeQuoteIDs=this._options.quoteManager?this._options.quoteManager.getQuotesMarkedForRemoval():[],s=elById("settings_text"),s&&elBySelAll("input, select, textarea",s,function(e){if("INPUT"!==e.nodeName||"checkbox"!==e.type&&"radio"!==e.type||e.checked){var t=e.name;if(r.hasOwnProperty(t))throw new Error("Variable overshadowing, key '"+t+"' is already present.");r[t]=e.value.trim()}}),i.fire("com.woltlab.wcf.redactor2","submit_text",r.data),u.userId||a||(r.requireGuestDialog=!0),e.api(this,t.extend({parameters:r},a)))},_validate:function(){for(var e,t=elByClass("innerError",this._container);t.length;)elRemove(t[0]);return this._getEditor().utils.isEmpty()?(this.throwError(this._textarea,n.get("wcf.global.form.error.empty")),!1):(e={api:this,editor:this._getEditor(),message:this._getEditor().code.get(),valid:!0},i.fire("com.woltlab.wcf.redactor2","validate_text",e),e.valid!==!1)},throwError:function(e,t){var i=elCreate("small");i.className="innerError",i.textContent="empty"===t?n.get("wcf.global.form.error.empty"):t,o.insertAfter(i,e)},_showLoadingOverlay:function(){null===this._loadingOverlay&&(this._loadingOverlay=elCreate("div"),this._loadingOverlay.className="messageContentLoadingOverlay",this._loadingOverlay.innerHTML='<span class="icon icon96 fa-spinner"></span>'),this._content.classList.add("loading"),this._content.appendChild(this._loadingOverlay)},_hideLoadingOverlay:function(){this._content.classList.remove("loading");var e=elBySel(".messageContentLoadingOverlay",this._content);null!==e&&e.parentNode.removeChild(e)},_reset:function(){this._getEditor().code.set("<p>​</p>"),i.fire("com.woltlab.wcf.redactor2","reset_text")},_handleError:function(e){this.throwError(this._textarea,e.returnValues.errorType)},_getEditor:function(){if(null===this._editor){if("function"!=typeof window.jQuery)throw new Error("Unable to access editor, jQuery has not been loaded yet.");this._editor=window.jQuery(this._textarea).data("redactor")}return this._editor},_insertMessage:function(e){var t,i;this._getEditor().WoltLabAutosave.reset(),e.returnValues.url?window.location=e.returnValues.url:(e.returnValues.template&&("DESC"===elData(this._container,"sort-order")?(o.insertHtml(e.returnValues.template,this._container,"after"),t=o.identify(this._container.nextElementSibling)):(i=this._container,i.previousElementSibling&&i.previousElementSibling.classList.contains("messageListPagination")&&(i=i.previousElementSibling),o.insertHtml(e.returnValues.template,i,"before"),t=o.identify(i.previousElementSibling)),elData(this._container,"last-post-time",e.returnValues.lastPostTime),window.history.replaceState(void 0,"","#"+t),c.element(elById(t))),l.show(n.get(this._options.successMessage)),this._options.quoteManager&&this._options.quoteManager.countQuotes(),a.trigger())},_ajaxSuccess:function(e){if(!u.userId&&!e.returnValues.guestDialogID)throw new Error("Missing 'guestDialogID' return value for guest.");if(!u.userId&&e.returnValues.guestDialog){s.openStatic(e.returnValues.guestDialogID,e.returnValues.guestDialog,{closable:!1,title:n.get("wcf.global.confirmation.title")});var t=s.getDialog(e.returnValues.guestDialogID);elBySel("input[type=submit]",t.content).addEventListener(WCF_CLICK_EVENT,this._submitGuestDialog.bind(this)),elBySel("input[type=text]",t.content).addEventListener("keypress",this._submitGuestDialog.bind(this))}else this._insertMessage(e),u.userId||s.close(e.returnValues.guestDialogID),this._reset(),this._hideLoadingOverlay()},_ajaxFailure:function(e){return this._hideLoadingOverlay(),null===e||void 0===e.returnValues||void 0===e.returnValues.errorType||(this._handleError(e),!1)},_ajaxSetup:function(){return{data:{actionName:"quickReply",className:this._options.ajax.className,interfaceName:"wcf\\data\\IMessageQuickReplyAction"},silent:!0}}},p}),define("WoltLabSuite/Core/Ui/Message/Share",["EventHandler"],function(e){"use strict";return{_pageDescription:"",_pageUrl:"",init:function(){var t,i=elBySel('meta[property="og:title"]');null!==i&&(this._pageDescription=encodeURIComponent(i.content)),t=elBySel('meta[property="og:url"]'),null!==t&&(this._pageUrl=encodeURIComponent(t.content)),elBySelAll(".jsMessageShareButtons",null,function(t){var i,n;t.classList.remove("jsMessageShareButtons"),i={facebook:{link:elBySel(".jsShareFacebook",t),share:function(){this._share("facebook","https://www.facebook.com/sharer.php?u={pageURL}&t={text}",!0)}.bind(this)},google:{link:elBySel(".jsShareGoogle",t),share:function(){this._share("google","https://plus.google.com/share?url={pageURL}",!1)}.bind(this)},reddit:{link:elBySel(".jsShareReddit",t),share:function(){this._share("reddit","https://ssl.reddit.com/submit?url={pageURL}",!1)}.bind(this)},twitter:{link:elBySel(".jsShareTwitter",t),share:function(){this._share("twitter","https://twitter.com/share?url={pageURL}&text={text}",!1)}.bind(this)},linkedIn:{link:elBySel(".jsShareLinkedIn",t),share:function(){this._share("linkedIn","https://www.linkedin.com/cws/share?url={pageURL}",!1);
}.bind(this)},pinterest:{link:elBySel(".jsSharePinterest",t),share:function(){this._share("pinterest","https://www.pinterest.com/pin/create/link/?url={pageURL}&description={text}",!1)}.bind(this)},xing:{link:elBySel(".jsShareXing",t),share:function(){this._share("xing","https://www.xing.com/social_plugins/share?url={pageURL}",!1)}.bind(this)},whatsApp:{link:elBySel(".jsShareWhatsApp",t),share:function(){window.location.href="whatsapp://send?text="+this._pageDescription+"%20"+this._pageUrl}.bind(this)}},e.fire("com.woltlab.wcf.message.share","shareProvider",{container:t,providers:i,pageDescription:this._pageDescription,pageUrl:this._pageUrl});for(n in i)i.hasOwnProperty(n)&&null!==i[n].link&&i[n].link.addEventListener(WCF_CLICK_EVENT,i[n].share)}.bind(this))},_share:function(e,t,i){window.open(t.replace(/\{pageURL}/,this._pageUrl).replace(/\{text}/,this._pageDescription+(i?"%20"+this._pageUrl:"")),e,"height=600,width=600")}}}),define("WoltLabSuite/Core/Ui/Page/Search",["Ajax","EventKey","Language","StringUtil","Dom/Util","Ui/Dialog"],function(e,t,i,n,a,o){"use strict";var r,s,l,c;return c=null,{open:function(e){r=e,o.open(this)},_search:function(t){var n,o,r;return t.preventDefault(),n=c.parentNode,o=n.nextSibling,o&&"SMALL"===o.nodeName&&elRemove(o),r=c.value.trim(),r.length<3?(o=elCreate("small"),o.className="innerError",o.textContent=i.get("wcf.page.search.error.tooShort"),void a.insertAfter(o,n)):void e.api(this,{parameters:{searchString:r}})},_click:function(e){e.preventDefault(),r(elData(e.currentTarget,"page-id")),o.close(this)},_ajaxSuccess:function(e){var t,o,r,d,u="";for(o=0,r=e.returnValues.length;o<r;o++)t=e.returnValues[o],u+='<li><div class="containerHeadline pointer" data-page-id="'+t.pageID+'"><h3>'+n.escapeHTML(t.name)+"</h3><small>"+n.escapeHTML(t.displayLink)+"</small></div></li>";l.innerHTML=u,window[u?"elShow":"elHide"](s),u?elBySelAll(".containerHeadline",l,function(e){e.addEventListener(WCF_CLICK_EVENT,this._click.bind(this))}.bind(this)):(d=elCreate("small"),d.className="innerError",d.textContent=i.get("wcf.page.search.error.noResults"),a.insertAfter(d,c.parentNode))},_ajaxSetup:function(){return{data:{actionName:"search",className:"wcf\\data\\page\\PageAction"}}},_dialogSetup:function(){return{id:"wcfUiPageSearch",options:{onSetup:function(){var e=this._search.bind(this);c=elById("wcfUiPageSearchInput"),c.addEventListener("keydown",function(i){t.Enter(i)&&e(i)}),c.nextElementSibling.addEventListener(WCF_CLICK_EVENT,e),s=elById("wcfUiPageSearchResultContainer"),l=elById("wcfUiPageSearchResultList")}.bind(this),onShow:function(){c.focus()},title:i.get("wcf.page.search")},source:'<div class="section"><dl><dt><label for="wcfUiPageSearchInput">'+i.get("wcf.page.search.name")+'</label></dt><dd><div class="inputAddon"><input type="text" id="wcfUiPageSearchInput" class="long"><a href="#" class="inputSuffix"><span class="icon icon16 fa-search"></span></a></div></dd></dl></div><section id="wcfUiPageSearchResultContainer" class="section" style="display: none;"><header class="sectionHeader"><h2 class="sectionTitle">'+i.get("wcf.page.search.results")+'</h2></header><ol id="wcfUiPageSearchResultList" class="containerList"></ol></section>'}}}}),define("WoltLabSuite/Core/Ui/Redactor/Autosave",["Language","Dom/Traverse"],function(e,t){"use strict";function i(e){this.init(e)}var n,a;return n=15,a="wsc"+window.WCF_PATH.hashCode()+"-",i.prototype={init:function(e){this._container=null,this._editor=null,this._element=e,this._key=a+elData(this._element,"autosave"),this._lastMessage="",this._originalMessage="",this._overlay=null,this._restored=!1,this._timer=null,this._cleanup(),this._element.removeAttribute("data-autosave");var i=t.parentByTag(this._element,"FORM");null!==i&&i.addEventListener("submit",this.destroy.bind(this))},getInitialValue:function(){var e,t="";try{t=window.localStorage.getItem(this._key)}catch(e){window.console.warn("Unable to access local storage: "+e.message)}try{t=JSON.parse(t)}catch(e){t=""}return null!==t&&"object"==typeof t&&t.content&&(e=~~elData(this._element,"autosave-last-edit-time"),1e3*e<=t.timestamp)?(this._originalMessage=this._element.value,this._restored=!0,t.content):this._element.value},watch:function(e){if(this._editor=e,null!==this._timer)throw new Error("Autosave timer is already active.");this._timer=window.setInterval(this._saveToStorage.bind(this),1e3*n),this._saveToStorage()},destroy:function(){this.clear(),this._editor=null,window.clearInterval(this._timer),this._timer=null},clear:function(){this._lastMessage="";try{window.localStorage.removeItem(this._key)}catch(e){window.console.warn("Unable to remove from local storage: "+e.message)}},createOverlay:function(){var t,i,n,a;this._restored&&(t=elCreate("div"),t.className="redactorAutosaveRestored active",i=elCreate("span"),i.textContent=e.get("wcf.editor.autosave.restored"),t.appendChild(i),n=elCreate("a"),n.className="jsTooltip",n.href="#",n.title=e.get("wcf.editor.autosave.keep"),n.innerHTML='<span class="icon icon16 fa-check green"></span>',n.addEventListener(WCF_CLICK_EVENT,function(e){e.preventDefault(),this.hideOverlay()}.bind(this)),t.appendChild(n),n=elCreate("a"),n.className="jsTooltip",n.href="#",n.title=e.get("wcf.editor.autosave.discard"),n.innerHTML='<span class="icon icon16 fa-times red"></span>',n.addEventListener(WCF_CLICK_EVENT,function(e){e.preventDefault(),this.clear(),this._editor.code.start(this._originalMessage),this._editor.core.textarea().val(this._editor.clean.onSync(this._editor.$editor.html())),this.hideOverlay()}.bind(this)),t.appendChild(n),this._editor.core.box()[0].appendChild(t),a=function(){this._editor.core.editor()[0].removeEventListener(WCF_CLICK_EVENT,a),this.hideOverlay()}.bind(this),this._editor.core.editor()[0].addEventListener(WCF_CLICK_EVENT,a),this._container=t)},hideOverlay:function(){null!==this._container&&(this._container.classList.remove("active"),window.setTimeout(function(){null!==this._container&&elRemove(this._container),this._container=null,this._originalMessage=""}.bind(this),1e3))},_saveToStorage:function(){var e=this._editor.code.get();if(this._editor.utils.isEmpty(e)&&(e=""),this._lastMessage!==e){if(""===e)return this.clear();try{window.localStorage.setItem(this._key,JSON.stringify({content:e,timestamp:Date.now()})),this._lastMessage=e}catch(e){window.console.warn("Unable to write to local storage: "+e.message)}}},_cleanup:function(){var e,t,i,n,o=Date.now()-6048e5,r=[];for(e=0,i=window.localStorage.length;e<i;e++)if(t=window.localStorage.key(e),0===t.indexOf(a)){try{n=window.localStorage.getItem(t)}catch(e){window.console.warn("Unable to access local storage: "+e.message)}try{n=JSON.parse(n)}catch(e){n={timestamp:0}}(!n||n.timestamp<o)&&r.push(t)}for(e=0,i=r.length;e<i;e++)try{window.localStorage.removeItem(r[e])}catch(e){window.console.warn("Unable to remove from local storage: "+e.message)}}},i}),define("WoltLabSuite/Core/Ui/Redactor/PseudoHeader",[],function(){"use strict";return{getHeight:function(e){var t,i=~~window.getComputedStyle(e).paddingTop.replace(/px$/,""),n=window.getComputedStyle(e,"::before");return i+=~~n.paddingTop.replace(/px$/,""),i+=~~n.paddingBottom.replace(/px$/,""),t=~~n.height.replace(/px$/,""),0===t&&(t=e.scrollHeight,e.classList.add("redactorCalcHeight"),t-=e.scrollHeight,e.classList.remove("redactorCalcHeight")),i+=t}}}),define("WoltLabSuite/Core/Ui/Redactor/Code",["EventHandler","EventKey","Language","StringUtil","Dom/Util","Ui/Dialog","./PseudoHeader"],function(e,t,i,n,a,o,r){"use strict";function s(e){this.init(e)}var l;return l=0,s.prototype={init:function(t){this._editor=t,this._elementId=this._editor.$element[0].id,this._pre=null,e.add("com.woltlab.wcf.redactor2","bbcode_code_"+this._elementId,this._bbcodeCode.bind(this)),e.add("com.woltlab.wcf.redactor2","observe_load_"+this._elementId,this._observeLoad.bind(this)),this._editor.opts.activeButtonsStates.pre="code",this._callbackEdit=this._edit.bind(this),this._observeLoad()},_bbcodeCode:function(e){e.cancel=!0,this._editor.button.toggle({},"pre","func","block.format");var t=this._editor.selection.block();t&&"PRE"===t.nodeName&&(1===t.childElementCount&&"BR"===t.children[0].nodeName&&t.removeChild(t.children[0]),this._setTitle(t),t.addEventListener(WCF_CLICK_EVENT,this._callbackEdit),this._editor.caret.end(t))},_observeLoad:function(){elBySelAll("pre",this._editor.$editor[0],function(e){e.addEventListener("mousedown",this._callbackEdit),this._setTitle(e)}.bind(this))},_edit:function(e){var t,i=e.currentTarget;0===l&&(l=r.getHeight(i)),t=a.offset(i),e.pageY>t.top&&e.pageY<t.top+l&&(e.preventDefault(),this._editor.selection.save(),this._pre=i,o.open(this))},_save:function(e){e.preventDefault();var t="redactor-code-"+this._elementId;["file","highlighter","line"].forEach(function(e){elData(this._pre,e,elById(t+"-"+e).value)}.bind(this)),this._setTitle(this._pre),this._editor.caret.after(this._pre),o.close(this)},_setTitle:function(e){var t,n=elData(e,"file"),a=elData(e,"highlighter");a=this._editor.opts.woltlab.highlighters.hasOwnProperty(a)?this._editor.opts.woltlab.highlighters[a]:"",t=i.get("wcf.editor.code.title",{file:n,highlighter:a}),elData(e,"title")!==t&&elData(e,"title",t)},_delete:function(e){e.preventDefault();var t=this._pre.nextElementSibling||this._pre.previousElementSibling;null===t&&this._pre.parentNode!==this._editor.core.editor()[0]&&(t=this._pre.parentNode),null===t?(this._editor.code.set(""),this._editor.focus.end()):(elRemove(this._pre),this._editor.caret.end(t)),o.close(this)},_dialogSetup:function(){var e="redactor-code-"+this._elementId,t=e+"-button-delete",a=e+"-button-save",o=e+"-file",r=e+"-highlighter",s=e+"-line";return{id:e,options:{onClose:function(){this._editor.selection.restore()}.bind(this),onSetup:function(){var e,o,s;elById(a).addEventListener(WCF_CLICK_EVENT,this._save.bind(this)),elById(t).addEventListener(WCF_CLICK_EVENT,this._delete.bind(this)),e='<option value="">'+i.get("wcf.editor.code.highlighter.detect")+"</option>",o=[];for(s in this._editor.opts.woltlab.highlighters)this._editor.opts.woltlab.highlighters.hasOwnProperty(s)&&o.push([s,this._editor.opts.woltlab.highlighters[s]]);o.sort(function(e,t){return e[1]<t[1]?-1:e[1]>t[1]?1:0}),o.forEach(function(t){e+='<option value="'+t[0]+'">'+n.escapeHTML(t[1])+"</option>"}.bind(this)),elById(r).innerHTML=e}.bind(this),onShow:function(){elById(r).value=elData(this._pre,"highlighter");var e=elData(this._pre,"line");elById(s).value=""===e?1:~~e,elById(o).value=elData(this._pre,"file")}.bind(this),title:i.get("wcf.editor.code.edit")},source:'<div class="section"><dl><dt><label for="'+r+'">'+i.get("wcf.editor.code.highlighter")+'</label></dt><dd><select id="'+r+'"></select><small>'+i.get("wcf.editor.code.highlighter.description")+'</small></dd></dl><dl><dt><label for="'+s+'">'+i.get("wcf.editor.code.line")+'</label></dt><dd><input type="number" id="'+s+'" min="0" value="1" class="long"><small>'+i.get("wcf.editor.code.line.description")+'</small></dd></dl><dl><dt><label for="'+o+'">'+i.get("wcf.editor.code.file")+'</label></dt><dd><input type="text" id="'+o+'" class="long"><small>'+i.get("wcf.editor.code.file.description")+'</small></dd></dl></div><div class="formSubmit"><button id="'+a+'" class="buttonPrimary">'+i.get("wcf.global.button.save")+'</button><button id="'+t+'">'+i.get("wcf.global.button.delete")+"</button></div>"}}},s}),define("WoltLabSuite/Core/Ui/Redactor/DragAndDrop",["Dictionary","EventHandler","Language"],function(e,t,i){"use strict";var n,a,o,r,s;return n=!1,a=new e,o=!1,r=!1,s=null,{init:function(e){n||this._setup(),a.set(e.uuid,{editor:e,element:null})},_dragOver:function(e){var t,n,s;if(e.preventDefault(),e.dataTransfer&&e.dataTransfer.types){t=!1;for(n in e.dataTransfer)if(e.dataTransfer.hasOwnProperty(n)&&n.match(/^moz/)){t=!0;break}if(r=!1,t)"application/x-moz-file"===e.dataTransfer.types[0]&&(r=!0);else for(s=0;s<e.dataTransfer.types.length;s++)if("Files"===e.dataTransfer.types[s]){r=!0;break}r&&(o||(o=!0,a.forEach(function(e,t){var n,o=e.editor.$editor[0];return o.parentNode?(n=e.element,null===n&&(n=elCreate("div"),n.className="redactorDropArea",elData(n,"element-id",e.editor.$element[0].id),elData(n,"drop-here",i.get("wcf.attachment.dragAndDrop.dropHere")),elData(n,"drop-now",i.get("wcf.attachment.dragAndDrop.dropNow")),n.addEventListener("dragover",function(){n.classList.add("active")}),n.addEventListener("dragleave",function(){n.classList.remove("active")}),n.addEventListener("drop",this._drop.bind(this)),e.element=n),o.parentNode.insertBefore(n,o),void n.style.setProperty("top",o.offsetTop+"px","")):void a.delete(t)}.bind(this))))}},_drop:function(e){var i,n,a;if(r&&e.dataTransfer&&e.dataTransfer.files.length){for(e.preventDefault(),i=elData(e.currentTarget,"element-id"),n=0,a=e.dataTransfer.files.length;n<a;n++)t.fire("com.woltlab.wcf.redactor2","dragAndDrop_"+i,{file:e.dataTransfer.files[n]});this._dragLeave()}},_dragLeave:function(){o&&r&&(null!==s&&window.clearTimeout(s),s=window.setTimeout(function(){o||a.forEach(function(e){e.element&&e.element.parentNode&&(e.element.classList.remove("active"),elRemove(e.element))}),s=null},100),o=!1)},_setup:function(){window.addEventListener("dragend",function(e){e.preventDefault()}),window.addEventListener("dragover",this._dragOver.bind(this)),window.addEventListener("dragleave",this._dragLeave.bind(this)),window.addEventListener("drop",this._dragLeave.bind(this)),n=!0}}}),define("WoltLabSuite/Core/Ui/Redactor/Format",["Dom/Util"],function(e){"use strict";return{format:function(t,i,n){var a,o,r,s,l,c,d,u,h,p,f,m,g,_,b,v,w=window.getSelection();if(w.rangeCount){for(a=w.getRangeAt(0),o=null,r=null,s=null,a.collapsed?(s=elCreate("strike"),s.textContent="​",a.insertNode(s),a=document.createRange(),a.selectNodeContents(s),w.removeAllRanges(),w.addRange(a)):(o=elCreate("mark"),r=elCreate("mark"),l=a.cloneRange(),l.collapse(!0),l.insertNode(o),l=a.cloneRange(),l.collapse(!1),l.insertNode(r),a=document.createRange(),a.setStartAfter(o),a.setEndBefore(r),w.removeAllRanges(),w.addRange(a),this.removeFormat(t,i),a=document.createRange(),a.setStartAfter(o),a.setEndBefore(r),w.removeAllRanges(),w.addRange(a)),c=["strike","strikethrough"],null===s&&(c=this._getSelectionMarker(t,w),document.execCommand(c[1])),d=elBySelAll(c[0],t),h=[],f=0,m=d.length;f<m;f++)p=d[f],u=elCreate("span"),elAttr(u,"style",i+": "+n),e.replaceElement(p,u),h.push(u);g=h.length,g&&(_=h[0],b=h[g-1],null===s&&_.parentNode===b.parentNode&&(v=_.parentNode,"SPAN"===v.nodeName&&""!==v.style.getPropertyValue(i)&&this._isBoundaryElement(_,v,"previous")&&this._isBoundaryElement(b,v,"next")&&e.unwrapChildNodes(v)),a=document.createRange(),a.setStart(_,0),a.setEnd(b,b.childNodes.length),w.removeAllRanges(),w.addRange(a)),null!==o&&(elRemove(o),elRemove(r))}},removeFormat:function(t,i){for(var n,a,o,r=elByTag("strike",t);r.length;)e.unwrapChildNodes(r[0]);for(n=this._getSelectionMarker(t,window.getSelection()),document.execCommand(n[1]),"strike"!==n[0]&&(r=elByTag(n[0],t));r.length;)o=r[0],a=this._getLastMatchingParent(o,t,i),null!==a&&this._handleParentNodes(o,a,i),elBySelAll("span",o,function(t){t.style.getPropertyValue(i)&&e.unwrapChildNodes(t)}),e.unwrapChildNodes(o);elBySelAll("span",t,function(e){e.parentNode&&!e.textContent.length&&""!==e.style.getPropertyValue(i)&&(1===e.childElementCount&&"MARK"===e.children[0].nodeName&&e.parentNode.insertBefore(e.children[0],e),0===e.childElementCount&&elRemove(e))})},_handleParentNodes:function(t,i,n){var a,o;e.isAtNodeStart(t,i)||(a=document.createRange(),a.setStartBefore(i),a.setEndBefore(t),o=a.extractContents(),i.parentNode.insertBefore(o,i)),e.isAtNodeEnd(t,i)||(a=document.createRange(),a.setStartAfter(t),a.setEndAfter(i),o=a.extractContents(),i.parentNode.insertBefore(o,i.nextSibling)),elBySelAll("span",i,function(t){t.style.getPropertyValue(n)&&e.unwrapChildNodes(t)}),e.unwrapChildNodes(i)},_getLastMatchingParent:function(e,t,i){for(var n=e.parentNode,a=null;n!==t;)"SPAN"===n.nodeName&&""!==n.style.getPropertyValue(i)&&(a=n),n=n.parentNode;return a},_isBoundaryElement:function(e,t,i){for(var n=e;n=n[i+"Sibling"];)if(n.nodeType!==Node.TEXT_NODE||""!==n.textContent.replace(/\u200B/,""))return!1;return!0},_getSelectionMarker:function(e,t){var i,n,a,o,r=t.anchorNode,s=["DEL","SUB","SUP"];for(n=0,a=s.length;n<a;n++){for(i=s[n],o=!1;r&&r!==e;){if(r.nodeName===i){o=!0;break}r=r.parentNode}if(!o)break;i=void 0}return"DEL"===i||void 0===i?["strike","strikethrough"]:[i.toLowerCase(),i.toLowerCase()+"script"]}}}),define("WoltLabSuite/Core/Ui/Redactor/Link",["Language","Ui/Dialog"],function(e,t){"use strict";var i,n;return i=!1,n=null,{showDialog:function(a){t.open(this),t.setTitle(this,e.get("wcf.editor.link."+(a.insert?"add":"edit")));var o=elById("redactor-modal-button-action");o.textContent=e.get("wcf.global.button."+(a.insert?"insert":"save")),n=a.submitCallback,i||(i=!0,o.addEventListener(WCF_CLICK_EVENT,this._submit.bind(this)))},_submit:function(){var i,a;n()?t.close(this):(i=elById("redactor-link-url"),a=i.nextElementSibling&&"SMALL"===i.nextElementSibling.nodeName?i.nextElementSibling:null,null===a&&(a=elCreate("small"),a.className="innerError",i.parentNode.appendChild(a)),a.textContent=e.get(""===i.value.trim()?"wcf.global.form.error.empty":"wcf.editor.link.error.invalid"))},_dialogSetup:function(){return{id:"redactorDialogLink",options:{onClose:function(){var e=elById("redactor-link-url"),t=e.nextElementSibling&&"SMALL"===e.nextElementSibling.nodeName?e.nextElementSibling:null;null!==t&&elRemove(t)}},source:'<dl><dt><label for="redactor-link-url">'+e.get("wcf.editor.link.url")+'</label></dt><dd><input type="url" id="redactor-link-url" class="long"></dd></dl><dl><dt><label for="redactor-link-url-text">'+e.get("wcf.editor.link.text")+'</label></dt><dd><input type="text" id="redactor-link-url-text" class="long"></dd></dl><div class="formSubmit"><button id="redactor-modal-button-action" class="buttonPrimary"></button></div>'}}}}),define("WoltLabSuite/Core/Ui/Redactor/Mention",["Ajax","Environment","StringUtil","Ui/CloseOverlay"],function(e,t,i,n){"use strict";function a(e){this.init(e)}var o;return o=null,a.prototype={init:function(e){this._active=!1,this._dropdownActive=!1,this._dropdownMenu=null,this._itemIndex=0,this._lineHeight=null,this._mentionStart="",this._redactor=e,this._timer=null,e.WoltLabEvent.register("keydown",this._keyDown.bind(this)),e.WoltLabEvent.register("keyup",this._keyUp.bind(this)),n.add("UiRedactorMention-"+e.core.element()[0].id,this._hideDropdown.bind(this))},_keyDown:function(e){if(this._dropdownActive){var t=e.event;switch(t.which){case 13:this._setUsername(null,this._dropdownMenu.children[this._itemIndex].children[0]);break;case 38:this._selectItem(-1);break;case 40:this._selectItem(1);break;default:return void this._hideDropdown()}t.preventDefault(),e.cancel=!0}},_keyUp:function(t){var i,n,a=t.event;return 13===a.which?void(this._active=!1):void(this._dropdownActive&&(t.cancel=!0,38===a.which||40===a.which)||(i=this._getTextLineInFrontOfCaret(),i.length>0&&i.length<25?(n=i.match(/@([^,]{3,})$/),n?n.index&&!i[n.index-1].match(/\s/)||(this._mentionStart=n[1],null!==this._timer&&(window.clearTimeout(this._timer),this._timer=null),this._timer=window.setTimeout(function(){e.api(this,{parameters:{data:{searchString:this._mentionStart}}}),this._timer=null}.bind(this),500)):this._hideDropdown()):this._hideDropdown()))},_getTextLineInFrontOfCaret:function(){var e=this._selectMention(!1);return null!==e?e.range.cloneContents().textContent.replace(/\u200B/g,"").replace(/\u00A0/g," ").trim():""},_getDropdownMenuPosition:function(){var e,t,i=this._selectMention();return null===i?null:(this._redactor.selection.save(),i.selection.removeAllRanges(),i.selection.addRange(i.range),e=i.selection.getRangeAt(0).getBoundingClientRect(),t={top:Math.round(e.bottom)+(window.scrollY||window.pageYOffset),left:Math.round(e.left)+document.body.scrollLeft},null===this._lineHeight&&(this._lineHeight=Math.round(e.bottom-e.top)),this._redactor.selection.restore(),t)},_setUsername:function(e,t){var i,n,a;return e&&(e.preventDefault(),t=e.currentTarget),i=this._selectMention(),null===i?void this._hideDropdown():(this._redactor.buffer.set(),i.selection.removeAllRanges(),i.selection.addRange(i.range),n=getSelection().getRangeAt(0),n.deleteContents(),n.collapse(!0),a=document.createTextNode("@"+elData(t,"username")+" "),n.insertNode(a),n=document.createRange(),n.selectNode(a),n.collapse(!1),i.selection.removeAllRanges(),i.selection.addRange(n),void this._hideDropdown())},_selectMention:function(e){var t,i,n,a,o,r,s,l,c=window.getSelection();if(!c.rangeCount||!c.isCollapsed)return null;if(t=c.anchorNode,t.nodeType===Node.TEXT_NODE&&(t=t.parentNode),t.textContent.indexOf("@")===-1)return null;for(i=this._redactor.core.editor()[0];t&&t!==i;){if(["PRE","WOLTLAB-QUOTE"].indexOf(t.nodeName)!==-1)return null;t=t.parentNode}for(n=c.getRangeAt(0),a=n.startContainer,o=n.startOffset;a.nodeType===Node.ELEMENT_NODE;){if(0===o&&0===a.childNodes.length)return null;a=a.childNodes[o?o-1:0],o>0&&(o=a.nodeType===Node.TEXT_NODE?a.textContent.length:a.childNodes.length)}for(r=a,s=-1;null!==r;){if(r.nodeType!==Node.TEXT_NODE)return null;if(r.textContent.indexOf("@")!==-1){s=r.textContent.lastIndexOf("@");break}r=r.previousSibling}if(s===-1)return null;try{n=document.createRange(),n.setStart(r,s),n.setEnd(a,o)}catch(e){return window.console.debug(e),null}if(e===!1){for(l="",s&&(l=r.textContent.substr(0,s));(r=r.previousSibling)&&r.nodeType===Node.TEXT_NODE;)l=r.textContent+l;if(l.replace(/\u200B/g,"").match(/\S$/))return null}else if(n.cloneContents().textContent.replace(/\u200B/g,"").replace(/\u00A0/g,"").trim().replace(/^@/,"")!==this._mentionStart)return null;return{range:n,selection:c}},_updateDropdownPosition:function(){var e=this._getDropdownMenuPosition();return null===e?void this._hideDropdown():(e.top+=7,this._dropdownMenu.style.setProperty("left",e.left+"px",""),this._dropdownMenu.style.setProperty("top",e.top+"px",""),this._selectItem(0),void(e.top+this._dropdownMenu.offsetHeight+10>window.innerHeight+(window.scrollY||window.pageYOffset)&&this._dropdownMenu.style.setProperty("top",e.top-this._dropdownMenu.offsetHeight-2*this._lineHeight+7+"px","")))},_selectItem:function(e){var t=elBySel(".active",this._dropdownMenu);null!==t&&t.classList.remove("active"),this._itemIndex+=e,this._itemIndex<0?this._itemIndex=this._dropdownMenu.childElementCount-1:this._itemIndex>=this._dropdownMenu.childElementCount&&(this._itemIndex=0),this._dropdownMenu.children[this._itemIndex].classList.add("active")},_hideDropdown:function(){null!==this._dropdownMenu&&this._dropdownMenu.classList.remove("dropdownOpen"),this._dropdownActive=!1,this._itemIndex=0},_ajaxSetup:function(){return{data:{actionName:"getSearchResultList",className:"wcf\\data\\user\\UserAction",interfaceName:"wcf\\data\\ISearchAction",parameters:{data:{includeUserGroups:!1}}},silent:!0}},_ajaxSuccess:function(e){var t,n,a,r,s,l;if(!Array.isArray(e.returnValues)||!e.returnValues.length)return void this._hideDropdown();for(null===this._dropdownMenu&&(this._dropdownMenu=elCreate("ol"),this._dropdownMenu.className="dropdownMenu",null===o&&(o=elCreate("div"),o.className="dropdownMenuContainer",document.body.appendChild(o)),o.appendChild(this._dropdownMenu)),this._dropdownMenu.innerHTML="",t=this._setUsername.bind(this),s=0,l=e.returnValues.length;s<l;s++)r=e.returnValues[s],a=elCreate("li"),n=elCreate("a"),n.addEventListener("mousedown",t),n.className="box16",n.innerHTML="<span>"+r.icon+"</span> <span>"+i.escapeHTML(r.label)+"</span>",elData(n,"user-id",r.objectID),elData(n,"username",r.label),a.appendChild(n),this._dropdownMenu.appendChild(a);this._dropdownMenu.classList.add("dropdownOpen"),this._dropdownActive=!0,this._updateDropdownPosition()}},a}),define("WoltLabSuite/Core/Ui/Redactor/Metacode",["EventHandler","Dom/Util"],function(e,t){"use strict";return{convert:function(e){e.textContent=this.convertFromHtml(e.textContent)},convertFromHtml:function(i,n){var a,o,r,s,l,c,d,u=elCreate("div");for(u.innerHTML=n,s=elByTag("woltlab-metacode",u);s.length;)r=s[0],l=elData(r,"name"),a=this._parseAttributes(elData(r,"attributes")),o={attributes:a,cancel:!1,metacode:r},e.fire("com.woltlab.wcf.redactor2","metacode_"+l+"_"+i,o),o.cancel!==!0&&(d=this._getOpeningTag(l,a),c=this._getClosingTag(l),r.parentNode===u?(t.prepend(d,this._getFirstParagraph(r)),this._getLastParagraph(r).appendChild(c)):(t.prepend(d,r),r.appendChild(c)),t.unwrapChildNodes(r));return u.innerHTML},_getOpeningTag:function(e,t){var i,n,a="["+e;if(t.length)for(a+="=",i=0,n=t.length;i<n;i++)i>0&&(a+=","),a+="'"+t[i]+"'";return document.createTextNode(a+"]")},_getClosingTag:function(e){return document.createTextNode("[/"+e+"]")},_getFirstParagraph:function(e){var t,i;return 0===e.childElementCount?(i=elCreate("p"),e.appendChild(i)):(t=e.children[0],"P"===t.nodeName?i=t:(i=elCreate("p"),e.insertBefore(i,t))),i},_getLastParagraph:function(e){var t,i,n=e.childElementCount;return 0===n?(i=elCreate("p"),e.appendChild(i)):(t=e.children[n-1],"P"===t.nodeName?i=t:(i=elCreate("p"),e.appendChild(i))),i},_parseAttributes:function(e){var t,i,n,a;try{e=JSON.parse(atob(e))}catch(e){}if(!Array.isArray(e))return[];for(i=[],n=0,a=e.length;n<a;n++)t=e[n],"string"==typeof t&&(t=t.replace(/^'(.*)'$/,"$1")),i.push(t);return i}}}),define("WoltLabSuite/Core/Ui/Redactor/Page",["WoltLabSuite/Core/Ui/Page/Search"],function(e){"use strict";function t(e,t){this.init(e,t)}return t.prototype={init:function(e,t){this._editor=e,t.addEventListener(WCF_CLICK_EVENT,this._click.bind(this))},_click:function(t){t.preventDefault(),e.open(this._insert.bind(this))},_insert:function(e){this._editor.buffer.set(),this._editor.insert.text("[wsp='"+e+"'][/wsp]")}},t}),define("WoltLabSuite/Core/Ui/Redactor/Quote",["Core","EventHandler","EventKey","Language","StringUtil","Dom/Util","Ui/Dialog","./Metacode","./PseudoHeader"],function(e,t,i,n,a,o,r,s,l){"use strict";function c(e,t){this.init(e,t)}var d;return d=0,c.prototype={init:function(e,i){this._quote=null,this._quotes=elByTag("woltlab-quote",e.$editor[0]),this._editor=e,this._elementId=this._editor.$element[0].id,t.add("com.woltlab.wcf.redactor2","observe_load_"+this._elementId,this._observeLoad.bind(this)),this._editor.button.addCallback(i,this._click.bind(this)),this._callbackEdit=this._edit.bind(this),this._observeLoad(),t.add("com.woltlab.wcf.redactor2","insertQuote_"+this._elementId,this._insertQuote.bind(this))},_insertQuote:function(e){var i,n,o,r;if(!this._editor.WoltLabSource.isActive()){for(t.fire("com.woltlab.wcf.redactor2","showEditor"),i=this._editor.core.editor()[0],this._editor.selection.restore(),this._editor.buffer.set(),n=this._editor.selection.block(),n===!1&&(this._editor.focus.end(),n=this._editor.selection.block());n&&n.parentNode!==i;)n=n.parentNode;o=elCreate("woltlab-quote"),elData(o,"author",e.author),elData(o,"link",e.link),r=e.content,e.isText?(r=a.escapeHTML(r),r="<p>"+r+"</p>",r=r.replace(/\n\n/g,"</p><p>"),r=r.replace(/\n/g,"<br>")):r=s.convertFromHtml(this._editor.$element[0].id,r),o.innerHTML=r,n.parentNode.insertBefore(o,n.nextSibling),"P"!==n.nodeName||"<br>"!==n.innerHTML&&""!==n.innerHTML.replace(/\u200B/g,"")||n.parentNode.removeChild(n),this._editor.WoltLabCaret.paragraphAfterBlock(o),this._editor.buffer.set()}},_click:function(){this._editor.button.toggle({},"woltlab-quote","func","block.format");var e=this._editor.selection.block();e&&"WOLTLAB-QUOTE"===e.nodeName&&(this._setTitle(e),e.addEventListener(WCF_CLICK_EVENT,this._callbackEdit),this._editor.caret.end(e))},_observeLoad:function(){var e,t,i;for(t=0,i=this._quotes.length;t<i;t++)e=this._quotes[t],e.addEventListener("mousedown",this._callbackEdit),this._setTitle(e)},_edit:function(e){var t,i=e.currentTarget;0===d&&(d=l.getHeight(i)),t=o.offset(i),e.pageY>t.top&&e.pageY<t.top+d&&(e.preventDefault(),this._editor.selection.save(),this._quote=i,r.open(this))},_save:function(e){var t,i,a,o;return e.preventDefault(),t="redactor-quote-"+this._elementId,i=elById(t+"-url"),a=elBySel(".innerError",i.parentNode),null!==a&&elRemove(a),o=i.value.replace(/\u200B/g,"").trim(),o.length&&!/^https?:\/\/[^\/]+/.test(o)?(a=elCreate("small"),a.className="innerError",a.textContent=n.get("wcf.editor.quote.url.error.invalid"),void i.parentNode.insertBefore(a,i.nextElementSibling)):(elData(this._quote,"author",elById(t+"-author").value),elData(this._quote,"link",o),this._setTitle(this._quote),this._editor.caret.after(this._quote),void r.close(this))},_setTitle:function(e){var t=n.get("wcf.editor.quote.title",{author:elData(e,"author"),url:elData(e,"url")});elData(e,"title")!==t&&elData(e,"title",t)},_delete:function(e){e.preventDefault();var t=this._quote.nextElementSibling||this._quote.previousElementSibling;null===t&&this._quote.parentNode!==this._editor.core.editor()[0]&&(t=this._quote.parentNode),null===t?(this._editor.code.set(""),this._editor.focus.end()):(elRemove(this._quote),this._editor.caret.end(t)),r.close(this)},_dialogSetup:function(){var e="redactor-quote-"+this._elementId,t=e+"-author",i=e+"-button-delete",a=e+"-button-save",o=e+"-url";return{id:e,options:{onClose:function(){this._editor.selection.restore()}.bind(this),onSetup:function(){elById(a).addEventListener(WCF_CLICK_EVENT,this._save.bind(this)),elById(i).addEventListener(WCF_CLICK_EVENT,this._delete.bind(this))}.bind(this),onShow:function(){elById(t).value=elData(this._quote,"author"),elById(o).value=elData(this._quote,"link")}.bind(this),title:n.get("wcf.editor.quote.edit")},source:'<div class="section"><dl><dt><label for="'+t+'">'+n.get("wcf.editor.quote.author")+'</label></dt><dd><input type="text" id="'+t+'" class="long"></dd></dl><dl><dt><label for="'+o+'">'+n.get("wcf.editor.quote.url")+'</label></dt><dd><input type="text" id="'+o+'" class="long"><small>'+n.get("wcf.editor.quote.url.description")+'</small></dd></dl></div><div class="formSubmit"><button id="'+a+'" class="buttonPrimary">'+n.get("wcf.global.button.save")+'</button><button id="'+i+'">'+n.get("wcf.global.button.delete")+"</button></div>"}}},c}),define("WoltLabSuite/Core/Ui/Redactor/Spoiler",["EventHandler","EventKey","Language","StringUtil","Dom/Util","Ui/Dialog","./PseudoHeader"],function(e,t,i,n,a,o,r){"use strict";function s(e){this.init(e)}var l;return l=0,s.prototype={init:function(t){this._editor=t,this._elementId=this._editor.$element[0].id,this._spoiler=null,e.add("com.woltlab.wcf.redactor2","bbcode_spoiler_"+this._elementId,this._bbcodeSpoiler.bind(this)),e.add("com.woltlab.wcf.redactor2","observe_load_"+this._elementId,this._observeLoad.bind(this)),this._callbackEdit=this._edit.bind(this),this._observeLoad()},_bbcodeSpoiler:function(e){e.cancel=!0,this._editor.button.toggle({},"woltlab-spoiler","func","block.format");var t=this._editor.selection.block();t&&"WOLTLAB-SPOILER"===t.nodeName&&(this._setTitle(t),t.addEventListener(WCF_CLICK_EVENT,this._callbackEdit),this._editor.caret.end(t))},_observeLoad:function(){elBySelAll("woltlab-spoiler",this._editor.$editor[0],function(e){e.addEventListener("mousedown",this._callbackEdit),this._setTitle(e)}.bind(this))},_edit:function(e){var t,i=e.currentTarget;0===l&&(l=r.getHeight(i)),t=a.offset(i),e.pageY>t.top&&e.pageY<t.top+l&&(e.preventDefault(),this._editor.selection.save(),this._spoiler=i,o.open(this))},_save:function(e){e.preventDefault(),elData(this._spoiler,"label",elById("redactor-spoiler-"+this._elementId+"-label").value),this._setTitle(this._spoiler),this._editor.caret.after(this._spoiler),o.close(this)},_setTitle:function(e){var t=i.get("wcf.editor.spoiler.title",{label:elData(e,"label")});elData(e,"title")!==t&&elData(e,"title",t)},_delete:function(e){e.preventDefault();var t=this._spoiler.nextElementSibling||this._spoiler.previousElementSibling;null===t&&this._spoiler.parentNode!==this._editor.core.editor()[0]&&(t=this._spoiler.parentNode),null===t?(this._editor.code.set(""),this._editor.focus.end()):(elRemove(this._spoiler),this._editor.caret.end(t)),
o.close(this)},_dialogSetup:function(){var e="redactor-spoiler-"+this._elementId,t=e+"-button-delete",n=e+"-button-save",a=e+"-label";return{id:e,options:{onClose:function(){this._editor.selection.restore()}.bind(this),onSetup:function(){elById(n).addEventListener(WCF_CLICK_EVENT,this._save.bind(this)),elById(t).addEventListener(WCF_CLICK_EVENT,this._delete.bind(this))}.bind(this),onShow:function(){elById(a).value=elData(this._spoiler,"label")}.bind(this),title:i.get("wcf.editor.spoiler.edit")},source:'<div class="section"><dl><dt><label for="'+a+'">'+i.get("wcf.editor.spoiler.label")+'</label></dt><dd><input type="text" id="'+a+'" class="long"><small>'+i.get("wcf.editor.spoiler.label.description")+'</small></dd></dl></div><div class="formSubmit"><button id="'+n+'" class="buttonPrimary">'+i.get("wcf.global.button.save")+'</button><button id="'+t+'">'+i.get("wcf.global.button.delete")+"</button></div>"}}},s}),define("WoltLabSuite/Core/Ui/Search/Page",["Core","Dom/Traverse","Dom/Util","Ui/Screen","Ui/SimpleDropdown","./Input"],function(e,t,i,n,a,o){"use strict";return{init:function(r){var s,l,c,d=elById("pageHeaderSearchInput");new o(d,{ajax:{className:"wcf\\data\\search\\keyword\\SearchKeywordAction"},callbackDropdownInit:function(e){var t,a,o,r;e.classList.add("dropdownMenuPageSearch"),n.is("screen-lg")&&(elData(e,"dropdown-alignment-horizontal","right"),t=d.clientWidth,e.style.setProperty("min-width",t+"px",""),a=d.parentNode,o=i.offset(a).left+a.clientWidth-(i.offset(d).left+t),r=i.styleAsInt(window.getComputedStyle(a),"padding-bottom"),e.style.setProperty("transform","translateX(-"+Math.ceil(o)+"px) translateY(-"+r+"px)",""))},callbackSelect:function(){return setTimeout(function(){t.parentByTag(d,"FORM").submit()},1),!0}}),s=a.getDropdownMenu(i.identify(elBySel(".pageHeaderSearchType"))),l=this._click.bind(this),elBySelAll("a[data-object-type]",s,function(e){e.addEventListener(WCF_CLICK_EVENT,l)}),c=elBySel('a[data-object-type="'+r+'"]',s),e.triggerEvent(c,WCF_CLICK_EVENT)},_click:function(e){var t,i,n,a,o,r,s,l;e.preventDefault(),t=elById("pageHeader"),t.classList.add("searchBarForceOpen"),window.setTimeout(function(){t.classList.remove("searchBarForceOpen")},10),i=elData(e.currentTarget,"object-type"),n=elById("pageHeaderSearchParameters"),n.innerHTML="",a=elData(e.currentTarget,"extended-link"),a&&(elBySel(".pageHeaderSearchExtendedLink").href=a),o=elData(e.currentTarget,"parameters"),o=o?JSON.parse(o):{},i&&(o["types[]"]=i);for(r in o)o.hasOwnProperty(r)&&(s=elCreate("input"),s.type="hidden",s.name=r,s.value=o[r],n.appendChild(s));l=elBySel(".pageHeaderSearchType > .button",elById("pageHeaderSearchInputContainer")),l.textContent=e.currentTarget.textContent}}}),define("WoltLabSuite/Core/Ui/Sortable/List",["Core","Ui/Screen"],function(e,t){"use strict";function i(e){this.init(e)}return i.prototype={init:function(i){this._options=e.extend({containerId:"",className:"",offset:0,options:{},isSimpleSorting:!1,additionalParameters:{}},i),t.on("screen-sm-md",{match:this._enable.bind(this,!0),unmatch:this._disable.bind(this),setup:this._enable.bind(this,!0)}),t.on("screen-lg",{match:this._enable.bind(this,!1),unmatch:this._disable.bind(this),setup:this._enable.bind(this,!1)})},_enable:function(e){var t=this._options.options;e&&(t.handle=".sortableNodeHandle"),new window.WCF.Sortable.List(this._options.containerId,this._options.className,this._options.offset,t,this._options.isSimpleSorting,this._options.additionalParameters)},_disable:function(){window.jQuery("#"+this._options.containerId+" .sortableList")[this._options.isSimpleSorting?"sortable":"nestedSortable"]("destroy")}},i}),define("WoltLabSuite/Core/Ui/Style/FontAwesome",["Language","Ui/Dialog","WoltLabSuite/Core/Ui/ItemList/Filter"],function(e,t,i){"use strict";var n,a,o;return o=[],{setup:function(e){o=e},open:function(e){if(0===o.length)throw new Error("Missing icon data, please include the template before calling this method using `{include file='fontAwesomeJavaScript'}`.");n=e,t.open(this)},_click:function(e){var i,a;e.preventDefault(),i=e.target.closest("li"),a=elBySel("small",i).textContent.trim(),t.close(this),n(a)},_dialogSetup:function(){return{id:"fontAwesomeSelection",options:{onSetup:function(){var e,t,n,r;for(a=elById("fontAwesomeIcons"),t="",n=0,r=o.length;n<r;n++)e=o[n],t+='<li><span class="icon icon48 fa-'+e+'"></span><small>'+e+"</small></li>";a.innerHTML=t,a.addEventListener(WCF_CLICK_EVENT,this._click.bind(this)),new i("fontAwesomeIcons",{callbackPrepareItem:function(e){var t=elBySel("small",e),i=t.textContent.trim();return{item:e,span:t,text:i}}})}.bind(this),title:e.get("wcf.global.fontAwesome.selectIcon")},source:'<ul class="fontAwesomeIcons" id="fontAwesomeIcons"></ul>'}}}}),define("WoltLabSuite/Core/Ui/Toggle/Input",["Core"],function(e){"use strict";function t(e,t){this.init(e,t)}return t.prototype={init:function(t,i){if(this._element=elBySel(t),null===this._element)throw new Error("Unable to find element by selector '"+t+"'.");var n="INPUT"===this._element.nodeName?elAttr(this._element,"type"):"";if("checkbox"!==n&&"radio"!==n)throw new Error("Illegal element, expected input[type='checkbox'] or input[type='radio'].");this._options=e.extend({hide:[],show:[]},i),["hide","show"].forEach(function(e){var t,i,n;for(i=0,n=this._options[e].length;i<n;i++)if(t=this._options[e][i],"string"!=typeof t&&!(t instanceof Element))throw new TypeError("The array '"+e+"' may only contain string selectors or DOM elements.")}.bind(this)),this._element.addEventListener("change",this._change.bind(this)),this._handleElements(this._options.show,this._element.checked),this._handleElements(this._options.hide,!this._element.checked)},_change:function(e){var t=e.currentTarget.checked;this._handleElements(this._options.show,t),this._handleElements(this._options.hide,!t)},_handleElements:function(e,t){var i,n,a,o;for(a=0,o=e.length;a<o;a++){if(i=e[a],"string"==typeof i){if(n=elBySel(i),null===n)throw new Error("Unable to find element by selector '"+i+"'.");e[a]=i=n}window[t?"elShow":"elHide"](i)}}},t}),define("WoltLabSuite/Core/Ui/User/Editor",["Ajax","Language","StringUtil","Dom/Util","Ui/Dialog","Ui/Notification"],function(e,t,i,n,a,o){"use strict";var r,s;return r="",s=null,{init:function(){s=elBySel(".userProfileUser"),["ban","disableAvatar","disableSignature","enable"].forEach(function(e){var t=elBySel(".userProfileButtonMenu .jsButtonUser"+i.ucfirst(e));t&&(elData(t,"action",e),t.addEventListener(WCF_CLICK_EVENT,this._click.bind(this)))}.bind(this))},_click:function(t){var i,n;switch(t.preventDefault(),i=elData(t.currentTarget,"action"),n="",i){case"ban":elDataBool(s,"banned")&&(n="unban");break;case"disableAvatar":elDataBool(s,"disable-avatar")&&(n="enableAvatar");break;case"disableSignature":elDataBool(s,"disable-signature")&&(n="enableSignature");break;case"enable":n=elDataBool(s,"is-disabled")?"enable":"disable"}""===n?(r=i,a.open(this)):e.api(this,{actionName:n})},_submit:function(i){var n,a,o,s;i.preventDefault(),n=elById("wcfUiUserEditorExpiresLabel"),a=n.previousElementSibling,a.classList.contains("innerError")&&elRemove(a),o="",elById("wcfUiUserEditorNeverExpires").checked||(o=elById("wcfUiUserEditorExpiresDatePicker").value,""===o&&(a=elCreate("small"),a.className="innerError",a.textContent=t.get("wcf.global.form.error.empty"),n.parentNode.insertBefore(a,n))),s={},s[r+"Expires"]=o,s[r+"Reason"]=elById("wcfUiUserEditorReason").value.trim(),e.api(this,{actionName:r,parameters:s})},_ajaxSuccess:function(e){var i,n;switch(e.actionName){case"ban":case"unban":elData(s,"banned","ban"===e.actionName),elBySel(".userProfileButtonMenu .jsButtonUserBan").textContent=t.get("wcf.user."+("ban"===e.actionName?"unban":"ban")),i=elBySel(".contentTitle",s),n=elBySel(".jsUserBanned",i),"ban"===e.actionName?(n=elCreate("span"),n.className="icon icon24 fa-lock jsUserBanned jsTooltip",n.title=e.returnValues,i.appendChild(n)):n&&elRemove(n);break;case"disableAvatar":case"enableAvatar":elData(s,"disable-avatar","disableAvatar"===e.actionName),elBySel(".userProfileButtonMenu .jsButtonUserDisableAvatar").textContent=t.get("wcf.user."+("disableAvatar"===e.actionName?"enable":"disable")+"Avatar");break;case"disableSignature":case"enableSignature":elData(s,"disable-signature","disableSignature"===e.actionName),elBySel(".userProfileButtonMenu .jsButtonUserDisableSignature").textContent=t.get("wcf.user."+("disableSignature"===e.actionName?"enable":"disable")+"Signature");break;case"enable":case"disable":elData(s,"is-disabled","disable"===e.actionName),elBySel(".userProfileButtonMenu .jsButtonUserEnable").textContent=t.get("wcf.acp.user."+("enable"===e.actionName?"disable":"enable"))}"ban"!==e.actionName&&"disableAvatar"!==e.actionName&&"disableSignature"!==e.actionName||a.close(this),o.show()},_ajaxSetup:function(){return{data:{className:"wcf\\data\\user\\UserAction",objectIDs:[elData(s,"object-id")]}}},_dialogSetup:function(){return{id:"wcfUiUserEditor",options:{onSetup:function(e){elById("wcfUiUserEditorNeverExpires").addEventListener("change",function(){window[this.checked?"elHide":"elShow"](elById("wcfUiUserEditorExpiresSettings"))}),elBySel("button.buttonPrimary",e).addEventListener(WCF_CLICK_EVENT,this._submit.bind(this))}.bind(this),onShow:function(e){var i,n;a.setTitle("wcfUiUserEditor",t.get("wcf.user."+r+".confirmMessage")),i=elById("wcfUiUserEditorReason").nextElementSibling,n="wcf.user."+r+".reason.description",i.textContent=t.get(n),window[i.textContent===n?"elHide":"elShow"](i),i=elById("wcfUiUserEditorNeverExpires").nextElementSibling,i.textContent=t.get("wcf.user."+r+".neverExpires"),i=elBySel('label[for="wcfUiUserEditorExpires"]',e),i.textContent=t.get("wcf.user."+r+".expires"),i=elById("wcfUiUserEditorExpiresLabel"),i.textContent=t.get("wcf.user."+r+".expires.description")}},source:'<div class="section"><dl><dt><label for="wcfUiUserEditorReason">'+t.get("wcf.global.reason")+'</label></dt><dd><textarea id="wcfUiUserEditorReason" cols="40" rows="3"></textarea><small></small></dd></dl><dl><dt></dt><dd><label><input type="checkbox" id="wcfUiUserEditorNeverExpires" checked> <span></span></label></dd></dl><dl id="wcfUiUserEditorExpiresSettings" style="display: none"><dt><label for="wcfUiUserEditorExpires"></label></dt><dd><input type="date" name="wcfUiUserEditorExpires" id="wcfUiUserEditorExpires" class="medium" min="'+new Date(1e3*TIME_NOW).toISOString()+'" data-ignore-timezone="true"><small id="wcfUiUserEditorExpiresLabel"></small></dd></dl></div><div class="formSubmit"><button class="buttonPrimary">'+t.get("wcf.global.button.submit")+"</button></div>"}}}}),define("WoltLabSuite/Core/Controller/Condition/Page/Dependence",["Dom/ChangeListener","Dom/Traverse","EventHandler","ObjectMap"],function(e,t,i,n){"use strict";var a,o,r,s,l;return a=elBySelAll('input[name="pageIDs[]"]'),o=[],r=new n,s=new n,l=!1,{register:function(e,i){if(o.push(e),r.set(e,i),s.set(e,[]),!l){for(var n=0,c=a.length;n<c;n++)a[n].addEventListener("change",this._checkVisibility.bind(this));l=!0}t.parentByTag(e,"FORM").addEventListener("submit",function(){"none"===e.style.getPropertyValue("display")&&e.remove()}),this._checkVisibility()},_checkVisibility:function(){var e,t,n,s,l,c,d,u,h;for(c=0,d=o.length;c<d;c++){for(e=o[c],n=r.get(e),s=[],u=0,h=a.length;u<h;u++)t=a[u],t.checked&&s.push(~~t.value);l=s.filter(function(e){return n.indexOf(e)===-1}),!s.length||l.length?this._hideDependentElement(e):this._showDependentElement(e)}i.fire("com.woltlab.wcf.pageConditionDependence","checkVisivility")},_hideDependentElement:function(e){var t,i,n;for(elHide(e),t=s.get(e),i=0,n=t.length;i<n;i++)elHide(t[i]);s.set(e,[])},_showDependentElement:function(e){elShow(e);for(var t=e;(t=t.parentNode)&&t instanceof Element;)"none"===t.style.getPropertyValue("display")&&s.get(e).push(t),elShow(t)}}}),define("WoltLabSuite/Core/Controller/User/Notification/Settings",["Dictionary","Language","Dom/Traverse","Ui/SimpleDropdown"],function(e,t,i,n){"use strict";var a,o,r,s;return a=new e,o=null,r=null,s={setup:function(){var e,t,i,n,a;for(o=this._click.bind(this),r=this._selectType.bind(this),i=elBySelAll("#notificationSettings .flexibleButtonGroup"),n=0,a=i.length;n<a;n++)e=i[n],t=elBySel(".notificationSettingsEmail",e),null!==t&&this._initGroup(e,t)},_initGroup:function(e,t){var n,r,s,l=~~elData(e,"object-id"),c=elById("settings_"+l+"_disabled");c.addEventListener(WCF_CLICK_EVENT,function(){t.classList.remove("active")}),n=elById("settings_"+l+"_enabled"),n.addEventListener(WCF_CLICK_EVENT,function(){t.classList.add("active")}),r=i.childByTag(t,"INPUT"),s=i.childByTag(t,"A"),elData(s,"object-id",l),s.addEventListener(WCF_CLICK_EVENT,o),a.set(l,{button:s,dropdownMenu:null,mailSetting:t,mailValue:r})},_click:function(e){var t,o,r,s,l,c;if(e.preventDefault(),t=e.currentTarget,o=~~elData(t,"object-id"),r=a.get(o),null===r.dropdownMenu)r.dropdownMenu=this._createDropdown(o,r.mailValue.value),t.parentNode.classList.add("dropdown"),t.parentNode.appendChild(r.dropdownMenu),n.init(t,!0);else for(s=i.childrenByTag(r.dropdownMenu,"LI"),l=r.mailValue.value,c=0;c<4;c++)s[c].classList[elData(s[c],"value")===l?"add":"remove"]("active")},_createDropdown:function(e,i){var n,a,o,s,l,c=elCreate("ul");for(c.className="dropdownMenu",elData(c,"object-id",e),s=["instant","daily","divider","none"],l=0;l<4;l++)o=s[l],a=elCreate("li"),"divider"===o?a.className="dropdownDivider":(n=elCreate("a"),n.textContent=t.get("wcf.user.notification.mailNotificationType."+o),a.appendChild(n),elData(a,"value",o),a.addEventListener(WCF_CLICK_EVENT,r),i===o&&(a.className="active")),c.appendChild(a);return c},_selectType:function(e){var i=elData(e.currentTarget,"value"),n=~~elData(e.currentTarget.parentNode,"object-id"),o=a.get(n);o.mailValue.value=i,elBySel("span.title",o.mailSetting).textContent=t.get("wcf.user.notification.mailNotificationType."+i),o.button.classList["none"===i?"remove":"add"]("yellow"),o.button.classList["none"===i?"remove":"add"]("active")}}}),define("WoltLabSuite/Core/Ui/Page/Header/Fixed",["Core","EventHandler","Ui/Alignment","Ui/CloseOverlay","Ui/Screen"],function(e,t,i,n,a){"use strict";var o,r,s,l,c,d,u,h=!1;return{init:function(){o=elById("pageHeader"),r=elById("pageHeaderContainer"),this._initSearchBar(),a.on("screen-md-down",{match:function(){h=!0},unmatch:function(){h=!1},setup:function(){h=!0}}),t.add("com.woltlab.wcf.Search","close",this._closeSearchBar.bind(this))},_initSearchBar:function(){l=elById("pageHeaderSearch"),l.addEventListener(WCF_CLICK_EVENT,function(e){e.stopPropagation()}),s=elById("pageHeaderPanel"),c=elById("pageHeaderSearchInput"),d=elById("topMenu"),u=elById("userPanelSearchButton"),u.addEventListener(WCF_CLICK_EVENT,function(e){e.preventDefault(),e.stopPropagation(),o.classList.contains("searchBarOpen")?this._closeSearchBar():this._openSearchBar()}.bind(this)),n.add("WoltLabSuite/Core/Ui/Page/Header/Fixed",function(){o.classList.contains("searchBarForceOpen")||this._closeSearchBar()}.bind(this)),t.add("com.woltlab.wcf.MainMenuMobile","more",function(t){"com.woltlab.wcf.search"===t.identifier&&(t.handler.close(!0),e.triggerEvent(u,WCF_CLICK_EVENT))}.bind(this))},_openSearchBar:function(){window.WCF.Dropdown.Interactive.Handler.closeAll(),o.classList.add("searchBarOpen"),u.parentNode.classList.add("open"),h||i.set(l,d,{horizontal:"right"}),l.style.setProperty("top",s.clientHeight+"px",""),c.focus()},_closeSearchBar:function(){o.classList.remove("searchBarOpen"),u.parentNode.classList.remove("open"),["bottom","left","right","top"].forEach(function(e){l.style.removeProperty(e)}),c.blur()}}}),define("WoltLabSuite/Core/Ui/Page/Search/Input",["Core","WoltLabSuite/Core/Ui/Search/Input"],function(e,t){"use strict";function i(e,t){this.init(e,t)}return e.inherit(i,t,{init:function(t,n){if(n=e.extend({ajax:{className:"wcf\\data\\page\\PageAction"},callbackSuccess:null},n),"function"!=typeof n.callbackSuccess)throw new Error("Expected a valid callback function for 'callbackSuccess'.");i._super.prototype.init.call(this,t,n),this._pageId=0},setPageId:function(e){this._pageId=e},_getParameters:function(e){var t=i._super.prototype._getParameters.call(this,e);return t.objectIDs=[this._pageId],t},_ajaxSuccess:function(e){this._options.callbackSuccess(e)}}),i}),define("WoltLabSuite/Core/Ui/Page/Search/Handler",["Language","StringUtil","Dom/Util","Ui/Dialog","./Input"],function(e,t,i,n,a){"use strict";var o=null,r=null,s=null,l=null,c=null,d=null;return{open:function(t,i,a,r){o=a,n.open(this),n.setTitle(this,i),r?s.textContent=e.get(r):s.textContent=e.get("wcf.page.pageObjectID.search.terms"),this._getSearchInputHandler().setPageId(t)},_buildList:function(n){var a,o,s,l,u,h;if(this._resetList(),!Array.isArray(n.returnValues)||0===n.returnValues.length)return a=elCreate("small"),a.className="innerError",a.textContent=e.get("wcf.page.pageObjectID.search.noResults"),void i.insertAfter(a,r);for(u=0,h=n.returnValues.length;u<h;u++)s=n.returnValues[u],o=s.image,/^fa-/.test(o)&&(o='<span class="icon icon48 '+o+' pointer jsTooltip" title="'+e.get("wcf.global.select")+'"></span>'),l=elCreate("li"),elData(l,"object-id",s.objectID),l.innerHTML='<div class="box48">'+o+'<div><div class="containerHeadline"><h3><a href="'+t.escapeHTML(s.link)+'">'+t.escapeHTML(s.title)+"</a></h3>"+(s.description?"<p>"+s.description+"</p>":"")+"</div></div></div>",l.addEventListener(WCF_CLICK_EVENT,this._click.bind(this)),c.appendChild(l);elShow(d)},_resetList:function(){var e=r.nextElementSibling;e&&e.classList.contains("innerError")&&elRemove(e),c.innerHTML="",elHide(d)},_getSearchInputHandler:function(){if(null===l){var e=this._buildList.bind(this);l=new a(elById("wcfUiPageSearchInput"),{callbackSuccess:e})}return l},_click:function(e){"A"!==e.target.nodeName&&(e.stopPropagation(),o(elData(e.currentTarget,"object-id")),n.close(this))},_dialogSetup:function(){return{id:"wcfUiPageSearchHandler",options:{onShow:function(){null===r&&(r=elById("wcfUiPageSearchInput"),s=r.parentNode.previousSibling.childNodes[0],c=elById("wcfUiPageSearchResultList"),d=elById("wcfUiPageSearchResultListContainer")),r.value="",elHide(d),c.innerHTML="",r.focus()},title:""},source:'<div class="section"><dl><dt><label for="wcfUiPageSearchInput">'+e.get("wcf.page.pageObjectID.search.terms")+'</label></dt><dd><input type="text" id="wcfUiPageSearchInput" class="long"></dd></dl></div><section id="wcfUiPageSearchResultListContainer" class="section sectionContainerList"><header class="sectionHeader"><h2 class="sectionTitle">'+e.get("wcf.page.pageObjectID.search.results")+'</h2></header><ul id="wcfUiPageSearchResultList" class="containerList wcfUiPageSearchResultList"></ul></section>'}}}}),define("WoltLabSuite/Core/Ui/User/Activity/Recent",["Ajax","Language","Dom/Util"],function(e,t,i){"use strict";function n(e){this.init(e)}return n.prototype={init:function(e){var i,n;this._containerId=e,i=elById(this._containerId),this._list=elBySel(".recentActivityList",i),n=elCreate("li"),n.className="showMore",this._list.childElementCount?(n.innerHTML='<button class="small">'+t.get("wcf.user.recentActivity.more")+"</button>",n.children[0].addEventListener(WCF_CLICK_EVENT,this._showMore.bind(this))):n.innerHTML="<small>"+t.get("wcf.user.recentActivity.noMoreEntries")+"</small>",this._list.appendChild(n),this._showMoreItem=n,elBySelAll(".jsRecentActivitySwitchContext .button",i,function(e){e.addEventListener(WCF_CLICK_EVENT,function(t){t.preventDefault(),e.classList.contains("active")||this._switchContext()}.bind(this))}.bind(this))},_showMore:function(t){t.preventDefault(),this._showMoreItem.children[0].disabled=!0,e.api(this,{actionName:"load",parameters:{boxID:~~elData(this._list,"box-id"),filteredByFollowedUsers:elDataBool(this._list,"filtered-by-followed-users"),lastEventId:elData(this._list,"last-event-id"),lastEventTime:elData(this._list,"last-event-time"),userID:~~elData(this._list,"user-id")}})},_switchContext:function(){e.api(this,{actionName:"switchContext"},function(){window.location.hash="#"+this._containerId,window.location.reload()}.bind(this))},_ajaxSuccess:function(e){e.returnValues.template?(i.insertHtml(e.returnValues.template,this._showMoreItem,"before"),elData(this._list,"last-event-time",e.returnValues.lastEventTime),elData(this._list,"last-event-id",e.returnValues.lastEventID),this._showMoreItem.children[0].disabled=!1):this._showMoreItem.innerHTML="<small>"+t.get("wcf.user.recentActivity.noMoreEntries")+"</small>"},_ajaxSetup:function(){return{data:{className:"wcf\\data\\user\\activity\\event\\UserActivityEventAction"}}}},n}),define("WoltLabSuite/Core/Ui/User/Profile/Menu/Item/Abstract",["Ajax","Dom/Util"],function(e,t){"use strict";function i(e,t){}return i.prototype={init:function(e,t){this._userId=e,this._isActive=t!==!1,this._initButton(),this._updateButton()},_initButton:function(){var e,i,n=elCreate("a");n.href="#",n.addEventListener(WCF_CLICK_EVENT,this._toggle.bind(this)),e=elCreate("li"),e.appendChild(n),i=elBySel('.userProfileButtonMenu[data-menu="interaction"]'),t.prepend(e,i),this._button=n,this._listItem=e},_toggle:function(t){t.preventDefault(),e.api(this,{actionName:this._getAjaxActionName(),parameters:{data:{userID:this._userId}}})},_updateButton:function(){this._button.textContent=this._getLabel(),this._listItem.classList[this._isActive?"add":"remove"]("active")},_getLabel:function(){throw new Error("Implement me!")},_getAjaxActionName:function(){throw new Error("Implement me!")},_ajaxSuccess:function(){throw new Error("Implement me!")},_ajaxSetup:function(){throw new Error("Implement me!")}},i}),define("WoltLabSuite/Core/Ui/User/Profile/Menu/Item/Follow",["Core","Language","Ui/Notification","./Abstract"],function(e,t,i,n){"use strict";function a(e,t){this.init(e,t)}return e.inherit(a,n,{_getLabel:function(){return t.get("wcf.user.button."+(this._isActive?"un":"")+"follow")},_getAjaxActionName:function(){return this._isActive?"unfollow":"follow"},_ajaxSuccess:function(e){this._isActive=!!e.returnValues.following,this._updateButton(),i.show()},_ajaxSetup:function(){return{data:{className:"wcf\\data\\user\\follow\\UserFollowAction"}}}}),a}),define("WoltLabSuite/Core/Ui/User/Profile/Menu/Item/Ignore",["Core","Language","Ui/Notification","./Abstract"],function(e,t,i,n){"use strict";function a(e,t){this.init(e,t)}return e.inherit(a,n,{_getLabel:function(){return t.get("wcf.user.button."+(this._isActive?"un":"")+"ignore")},_getAjaxActionName:function(){return this._isActive?"unignore":"ignore"},_ajaxSuccess:function(e){this._isActive=!!e.returnValues.isIgnoredUser,this._updateButton(),i.show()},_ajaxSetup:function(){return{data:{className:"wcf\\data\\user\\ignore\\UserIgnoreAction"}}}}),a}),function(e){e.matches=e.matches||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector,e.closest=e.closest||function(e){for(var t=this;t&&!t.matches(e);)t=t.parentElement;return t}}(Element.prototype),define("closest",function(){}),function(e){function t(){for(;n.length&&"function"==typeof n[0];)n.shift()()}var i=e.require,n=[],a=0;e.require=function(o,r,s){if(!Array.isArray(o))return i.apply(e,arguments);var l=a++;n.push(l),s?i(o,function(){var i=arguments;n[n.indexOf(l)]=function(){r.apply(e,i)},t()},function(){var i=arguments;n[n.indexOf(l)]=function(){s.apply(e,i)},t()}):i(o,function(){var i=arguments;n[n.indexOf(l)]=function(){r.apply(e,i)},t()})},e.require.config=i.config}(window),define("require.linearExecution",function(){});