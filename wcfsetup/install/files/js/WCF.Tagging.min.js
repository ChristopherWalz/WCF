WCF.Tagging={},WCF.Tagging.TagList=WCF.EditableItemList.extend({_className:"wcf\\data\\tag\\TagAction",_maxLength:0,init:function(t,a,i){this._allowCustomInput=!0,this._maxLength=i,this._super(t,a),this._data=[],this._search=new WCF.Tagging.TagSearch(this._searchInput,$.proxy(this.addItem,this)),this._itemList.addClass("tagList"),$(t).data("__api",this)},_keyDown:function(t){if(this._super(t)){if(null===t)return!0;var a=t.which;return 8===a||27===a||13===a||46===a?!0:a>36&&41>a?!0:this._searchInput.val().length>=this._maxLength?!1:!0}return!1},_submit:function(){this._super();for(var t=0,a=this._data.length;a>t;t++)this._data[t]&&$('<input type="hidden" name="tags[]" />').val(this._data[t]).appendTo(this._form)},addItem:function(t){if(!t.objectID&&t.label.length>this._maxLength&&(t.label=t.label.substr(0,this._maxLength)),WCF.inArray(t.label,this._data))return!0;var a=$('<li class="badge tag">'+WCF.String.escapeHTML(t.label)+"</li>").data("objectID",t.objectID).data("label",t.label).appendTo(this._itemList);return a.click($.proxy(this._click,this)),this._search&&this._search.addExcludedSearchValue(t.label),this._addItem(t.objectID,t.label),!0},_addItem:function(t,a){this._data.push(a)},clearList:function(){this._super(),this._data=[]},getTags:function(){return this._data},_removeItem:function(t,a){for(var i=0,e=this._data.length;e>i;i++)if(this._data[i]===a)return void this._data.splice(i,1)},load:function(t){if(t&&t.length)for(var a=0,i=t.length;i>a;a++)this.addItem({objectID:0,label:WCF.String.unescapeHTML(t[a])})}}),WCF.Tagging.TagSearch=WCF.Search.Base.extend({_className:"wcf\\data\\tag\\TagAction",init:function(t,a,i,e){this._super(t,a,i,e,!1)}});