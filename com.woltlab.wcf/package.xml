<?xml version="1.0" encoding="UTF-8"?>
<package name="com.woltlab.wcf" xmlns="http://www.woltlab.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.woltlab.com http://www.woltlab.com/XSD/2019/package.xsd">
	<packageinformation>
		<packagename>WoltLab Suite Core</packagename>
		<packagedescription>Free CMS and web-framework, designed for awesome websites and communities.</packagedescription>
		<packagedescription language="de">Freies CMS und Web-Framework, das eindrucksvolle Websites und Communities erm√∂glicht.</packagedescription>
		<isapplication>1</isapplication>
		<version>5.3.0 RC 3</version>
		<date>2020-10-27</date>
	</packageinformation>
	
	<authorinformation>
		<author>WoltLab GmbH</author>
		<authorurl>https://www.woltlab.com</authorurl>
	</authorinformation>
	
	<instructions type="install">
		<instruction type="packageInstallationPlugin" />
		<instruction type="acpMenu" />
		<instruction type="userGroupOption" />
		<instruction type="option" />
		
		<instruction type="template" run="standalone" />
		
		<instruction type="eventListener" />
		<instruction type="script">acp/install.php</instruction>
		<instruction type="cronjob" />
		<instruction type="coreObject" />
		<instruction type="clipboardAction" />
		<instruction type="objectTypeDefinition" />
		<instruction type="objectType" />
		<instruction type="acpSearchProvider" />
		<instruction type="style">defaultStyle.tar</instruction>
		
		<instruction type="userOption" run="standalone" />
		
		<instruction type="bbcode" />
		<instruction type="smiley" />
		<instruction type="userProfileMenu" />
		<instruction type="userMenu" />
		<instruction type="userNotificationEvent" />
		<instruction type="aclOption" />
		<instruction type="page" />
		<instruction type="menu" />
		<instruction type="menuItem" />
		<instruction type="box" />
		<instruction type="mediaProvider" />
		<instruction type="templateListener" />
		
		<instruction type="script">acp/post_install.php</instruction>
	</instructions>
	
	<instructions type="update" fromversion="5.2.*">
		<!-- We need to deploy `lib/core.functions.php` and `lib/system/api/*` first, otherwise
		     Guzzle can not be found during the development of the regular file PIP. -->
		<instruction type="file" run="standalone">files_pre.tar</instruction>
		
		<!-- Verify that there are no duplicate usernames and warn about them if any are found. -->
		<instruction type="script" run="standalone">acp/update_com.woltlab.wcf_5.3_preUpdate.php</instruction>
		
		<!-- Deploy the database changes as early as possible to avoid any conflicts by calls to
		     tables that do not exist in 5.2, in particular `wcfN_devtools_missing_language_item`.-->
		<instruction type="script" run="standalone">acp/update_com.woltlab.wcf_5.3.php</instruction>
		
		<instruction type="file" />
		<instruction type="acpTemplate" />
		<instruction type="template" />
		
		<instruction type="option" run="standalone" />
		
		<instruction type="acpMenu" />
		<instruction type="clipboardAction" />
		<instruction type="mediaProvider" />
		<instruction type="userGroupOption" />
		<instruction type="userMenu" />
		<instruction type="page" />
		
		<instruction type="script" run="standalone">acp/update_com.woltlab.wcf_5.3_emailConfirmation.php</instruction>
		
		<!-- The internal data structure of sitemaps have been modified, this script must be run before
		     the `objectType` pip to prevent any data corruption. -->
		<instruction type="script">acp/update_com.woltlab.wcf_5.3_sitemaps.php</instruction>
		
		<instruction type="objectTypeDefinition" />
		<instruction type="objectType" />
		
		<instruction type="userNotificationEvent" />
		<instruction type="userOption" />
		
		<instruction type="language" />
		
		<instruction type="script" run="standalone">acp/update_com.woltlab.wcf_5.3_invalidateMailForm.php</instruction>
		
		<instruction type="script" run="standalone">acp/update_com.woltlab.wcf_5.3_style.php</instruction>
		
		<instruction type="style" run="standalone">defaultStyle.tar</instruction>
		
		<!-- This SQL step purges the legacy package servers, this must come last to make sure that an early
		     abort of the core upgrade does not brick the installation. -->
		<instruction type="sql">update_5.3.sql</instruction>
	</instructions>
	
	<!--
		Update 5.3.0 RC 1 -> 5.3.0 RC 2: Run the script `update_com.woltlab.wcf_5.3.0.rc.2.php`
	-->
	
	<instructions type="update" fromversion="5.3.0 RC 1">
		<instruction type="acpTemplate">acptemplates_update.tar</instruction>
		<instruction type="file">files_update.tar</instruction>
		<instruction type="template">templates_update.tar</instruction>
		
		<instruction type="script" run="standalone">acp/update_com.woltlab.wcf_5.3.0.rc.2.php</instruction>
		
		<instruction type="language" />
	</instructions>
	
	<instructions type="update" fromversion="5.3.0 RC 2">
		<instruction type="file">files_update.tar</instruction>
	</instructions>
</package>
